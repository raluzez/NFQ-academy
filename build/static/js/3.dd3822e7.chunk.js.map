{"version":3,"sources":["../node_modules/react-bootstrap/FormContext.js","../node_modules/react-bootstrap/Button.js","../node_modules/warning/warning.js","../node_modules/react-bootstrap/Feedback.js","../node_modules/react-bootstrap/Form.js","../node_modules/react-bootstrap/FormGroup.js","../node_modules/react-bootstrap/FormControl.js","../node_modules/react-bootstrap/FormCheck.js","../node_modules/react-bootstrap/FormCheckInput.js","../node_modules/react-bootstrap/FormCheckLabel.js","../node_modules/react-bootstrap/FormLabel.js","../node_modules/react-bootstrap/Col.js","../node_modules/react-bootstrap/FormText.js","../node_modules/@fullcalendar/core/main.esm.js","../node_modules/@fullcalendar/react/main.esm.js","../node_modules/fast-deep-equal/index.js","../node_modules/@fullcalendar/daygrid/main.esm.js","../node_modules/@fullcalendar/core/locales/lt.js"],"names":["_interopRequireDefault","exports","__esModule","default","_default","createContext","controlId","undefined","module","_extends2","_objectWithoutPropertiesLoose2","_classnames","_react","_ThemeProvider","_SafeAnchor","Button","forwardRef","_ref","ref","bsPrefix","variant","size","active","className","block","type","as","props","prefix","useBootstrapPrefix","classes","href","createElement","disabled","Component","displayName","defaultProps","warning","_propTypes","propTypes","string","isRequired","elementType","Feedback","_ref$as","_createWithBsPrefix","_FormGroup","_FormControl","_FormCheck","_FormLabel","_FormText","Form","inline","validated","Row","Group","Control","Check","Label","Text","_interopRequireWildcard","_FormContext","FormGroup","children","context","useMemo","Provider","value","_Feedback","FormControl","_classes","id","isValid","isInvalid","plaintext","readOnly","useContext","_classes2","_classes3","_FormCheckInput","_FormCheckLabel","FormCheck","feedback","style","title","label","custom","innerFormContext","hasLabel","input","isStatic","Fragment","Input","FormCheckInput","_useContext","FormCheckLabel","htmlFor","_Col","FormLabel","column","srOnly","DEVICE_SIZES","Col","spans","forEach","brkPoint","span","offset","order","propValue","_propValue$span","infix","push","length","apply","concat","FormText","muted","elementPropHash","colSpan","rowSpan","containerTagHash","tagName","attrs","content","el","document","attrName","applyStyle","setAttribute","innerHTML","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","Array","prototype","slice","call","childNodes","htmlToNodeList","substr","normalizeContent","i","appendChild","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","parentNode","Node","removeElement","removeChild","matchesMethod","Element","matches","matchesSelector","msMatchesSelector","closestMethod","closest","selector","this","documentElement","contains","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","querySelectorAll","j","findChildren","parents","childNode","PIXEL_PROP_RE","propName","applyStyleProp","name","val","test","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","outerEl","position","top","left","border","padding","overflow","direction","body","res","getBoundingClientRect","computeIsRtlScrollbarOnLeft","sanitizeScrollbarWidth","width","Math","max","round","computeEdges","getPadding","computedStyle","window","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","clientWidth","scrollbarBottom","offsetHeight","clientHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeRect","rect","pageXOffset","pageYOffset","right","bottom","computeHeightAndMargins","height","computeVMargins","computed","marginTop","marginBottom","computeClippingRect","overflowY","overflowX","getClippingParents","map","goWithinPadding","outerRect","edges","computeInnerRect","reduce","rect0","rect1","rect2","min","intersectRects","listenBySelector","eventType","handler","realHandler","ev","matchedChild","target","addEventListener","removeEventListener","DAY_IDS","addWeeks","m","n","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","valueOf","diffWholeDays","timeAsMs","startOfDay","getUTCFullYear","getUTCMonth","getUTCDate","weekOfGivenYear","marker","year","dow","doy","firstWeekStart","firstWeekOffset","dayStart","days","floor","fwd","getUTCDay","dateToLocalArray","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","Date","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","UTC","isValidDate","isNaN","PARSE_RE","createDuration","unit","_a","s","exec","sign","years","months","milliseconds","parseString","normalizeObject","obj","month","day","getWeeksFromInput","hours","hour","minutes","minute","seconds","second","millisecond","ms","weeks","week","durationsEqual","d0","d1","asRoughDays","dur","asRoughMs","greatestDurationDenominator","dontReturnWeeks","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","distributeHeight","els","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","minOffset","naturalHeight","naturalOffset","newHeight","matchCellWidths","maxInnerWidth","innerEl","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","compareByFieldSpec","obj0","obj1","fieldSpec","func","b","String","localeCompare","flexibleCompare","field","capitaliseFirstLetter","str","charAt","toUpperCase","padStart","len","isInt","applyAll","functions","thisObj","args","ret","firstDefined","_i","arguments","debounce","wait","timeout","timestamp","result","later","last","setTimeout","refineProps","rawProps","processors","defaults","leftoverProps","refined","key","processor","Function","Number","Boolean","computeAlignedDayRange","timedRange","dayCnt","start","end","computeVisibleDayRange","nextDayThreshold","startDay","endDay","endTimeMS","diffDates","date0","date1","dateEnv","largeUnit","diffWholeYears","diffWholeMonths","m0day","m1day","diffDayAndTime","_extendStatics","d","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","_assign","assign","t","expandRecurringRanges","eventDef","duration","framingRange","recurringTypes","markers","recurringDef","typeId","expand","typeData","subtract","allDay","mergeProps","propObjs","complexProps","complexObjs","dest","unshift","filterHash","hash","filtered","mapHash","newHash","arrayToHash","a_1","hashValuesToArray","isPropsEqual","parseEvents","rawEvents","sourceId","calendar","allowOpenRange","eventStore","defs","instances","rawEvents_1","tuple","parseEvent","eventTupleToStore","def","defId","instance","instanceId","expandRecurring","defaultAllDayEventDuration","defaultTimedEventDuration","starts_1","pluginSystem","hooks","createEventInstance","add","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","def0","def1","groupId","transformEachRawEvent","refinedEvents","rawEvents_2","rawEvent","refinedEvent","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","dateRange","invertedRanges","sort","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","range","isArraysEqual","a0","a1","memoize","workerFunc","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","meridiem","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","weekday","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","format","formatRange","diffSeverity","ca","getMarkerYear","getMarkerMonth","getMarkerDay","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialFormattingFunc","options","biggestUnit","partialOptions","name_2","computePartialFormattingOptions","partial0","partial1","insertion","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","before","after","findCommonInsertion","getLargestUnit","standardDatePropCnt","keys","formatTimeZoneOffset","timeZoneOffset","num","weekLabel","locale","display","parts","simpleNumberFormat","isRtl","reverse","join","formatWeekNumber","computeWeekNumber","sanitizeSettings","timeZone","zeroFormat","normalFormat","Intl","DateTimeFormat","codes","zeroProps","replace","tzoStr","replaced","injectTzoStr","toLocaleLowerCase","postProcess","buildNativeFormattingFunc","CmdFormatter","cmdStr","cmdFormatter","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","doIso","abs","mins","startInfo","expandZonedMarker","localeCodes","dateInfo","markerToArray","array","EventSourceApi","internalEventSource","remove","dispatch","refetch","sourceIds","defineProperty","get","publicId","enumerable","configurable","meta","url","EventApi","_calendar","_def","_instance","setProp","_b","DATE_PROPS","NON_DATE_PROPS","mutate","standardProps","UNSCOPED_EVENT_UI_PROPS","ui","backgroundColor","borderColor","startEditable","durationEditable","setExtendedProp","extendedProps","setStart","startInput","startDelta","granularity","maintainDuration","datesDelta","setEnd","endInput","endDelta","hasEnd","setDates","instanceRange","moveStart","deltaInput","delta","moveEnd","moveDates","setAllDay","opt","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","mutation","fromApi","state","eventSources","toDate","rendering","constraints","overlap","allows","textColor","classNames","sliceEventStore","eventUiBases","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","isStart","isEnd","invertedRanges_1","invertedRange","invertedRanges_2","bg","fg","filterSegsViaEls","view","segs","isMirror","hasPublicHandlers","filter","seg","publiclyTrigger","event","eventRange","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","applyMutationToEventDef","eventConfig","appliers","copy","appliers_1","applier","applyMutationToEventInstance","eventInstance","forceAllDay","clearEnd","getDefaultEventEnd","reduceEventStore","action","dateProfile","eventSource","fetchId","fetchRange","latestFetchId","subset","calEachTransform","sourceEachTransform","eventDataTransform","transformRawEvents","excludeEventsBySourceId","receiveRawEvents","expandRange","addEvent","activeRange","oldDateEnv","newDateEnv","canComputeOffset","rezoneDates","relevant","eventConfigBase","eventConfigs","eventDefMutationAppliers","applyMutationToEventStore","applyMutationToRelated","excludeInstances","removals","isNewPropsValid","newProps","businessHours","dateSelection","eventSelection","eventDrag","eventResize","isPropsValid","dateSpanMeta","filterConfig","interaction","subjectEventStore","mutatedEvents","subjectDefs","subjectInstances","subjectConfigs","isEvent","selectionConfig","otherEventStore","affectedEvents","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","calendarEventStore","subjectAllow","subjectDateSpan","origDef","origInstance","eventApi","buildDateSpanApi","isInteractionPropsValid","relevantEventStore","relevantDefs","relevantInstances","selection","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","isDateSelectionPropsValid","businessHoursUnexpanded","constraints_1","anyRangesContainRange","constraintToRanges","constraint","eventStoreToRanges","outerRanges","outerRanges_1","htmlEscape","cssToStr","cssProps","statements","parseClassName","raw","isArray","split","editable","allow","color","processUnscopedUiProps","leftovers","normalizeConstraint","processScopedUiProps","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","uid","allDayDefault","source","computeIsAllDayDefault","leftovers0","recurringRes","eventInput","localLeftovers","parsed","parse","allDayGuess","parseRecurring","parseEventDef","leftovers1","singleRes","startMeta","endMeta","pluckDateProps","startMarker","endMarker","createMarkerMeta","isTimeUnspecified","parseSingle","preLeftovers","pluckNonDateProps","eventDefParsers","newLeftovers","eventDefParser","freeze","DEF_DEFAULTS","startTime","endTime","daysOfWeek","parseBusinessHours","rawDefs","rawDef","refineInputs","memoizeRendering","renderFunc","unrenderFunc","dependencies","thisContext","prevArgs","dependents","unrender","dependents_1","dependencies_1","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","_this","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","info","buildEventUiForKey","keyInfo","buildEventUi","dateSpan","dateSpans","keys_1","getKeysForDateSpan","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","origSeg","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","component","gotoOptions","innerHtml","forceOff","finalOptions","formatIso","omitTime","attrsToStr","JSON","stringify","getDayClasses","noThemeHighlight","todayStart","todayEnd","theme","currentRange","getNow","getClass","EmitterMixin","_super","on","addToHash","_handlers","one","_oneHandlers","off","removeFromHash","trigger","triggerWith","hasHandlers","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","getMaxScrollTop","getScrollHeight","getClientHeight","getMaxScrollLeft","getScrollWidth","getClientWidth","canScrollVertically","canScrollHorizontally","canScrollUp","getScrollTop","canScrollDown","canScrollLeft","getScrollLeft","canScrollRight","ElementScrollController","scrollTop","scrollLeft","setScrollTop","setScrollLeft","scrollWidth","scrollHeight","ScrollComponent","WindowScrollController","scroll","applyOverflow","clear","setHeight","destroy","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","isView","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","oldProps","comboProps","anyChanges","recycleProps","render","DateComponent","buildPositionCaches","queryHit","positionLeft","positionTop","elWidth","elHeight","isInteractionValid","validRange","isDateSelectionValid","publiclyTriggerAfterSizing","triggerRenderedSegs","isMirrors","loadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_2","segs_3","isValidSegDownEl","isPopover","isInPopover","isValidDateDownEl","segEl","fgSegSelector","classList","bgSegSelector","uid$1","createPlugin","deps","reducers","isDraggableTransformers","eventDragMutationMassagers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","namedTimeZonedImpl","defaultView","elementDraggingImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","hooks0","hooks1","ArrayEventSourcePlugin","ignoreRange","parseMeta","events","fetch","arg","success","FuncEventSourcePlugin","failure","isResolved","wrappedSuccess","wrappedFailure","then","unpromisify","bind","startStr","endStr","requestJson","method","params","successCallback","failureCallback","encodeParams","injectQueryStringParams","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","JsonFeedEventSourcePlugin","extraParams","startParam","endParam","timeZoneParam","requestParams","customRequestParams","buildRequestParams","errorMessage","message","SimpleRecurrencePlugin","startRecur","endRecur","anyValid","clippedFramingRange","dowHash","dayMarker","instanceStarts","instanceStart","expandRanges","DefaultOptionChangeHandlers","_events","deepEqual","handleEventSources","plugins","inputs","addPluginInputs","unfoundSources","newInputs","inputs_1","inputFound","_raw","splice","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","globalDefaults","defaultRangeSeparator","titleRangeSeparator","forceEventDuration","columnHeader","aspectRatio","header","center","weekends","weekNumbers","weekNumberCalculation","scrollTime","minTime","maxTime","showNonCurrentDates","lazyFetching","locales","timeGridEventMinHeight","themeSystem","dragRevertDuration","dragScroll","allDayMaintainDuration","unselectAuto","dropAccept","eventOrder","eventLimit","eventLimitClick","dayPopoverFormat","handleWindowResize","windowResizeDelay","longPressDelay","eventDragMinDistance","rtlDefaults","buttonIcons","prev","next","prevYear","nextYear","complexOptions","INTERNAL_PLUGINS","RAW_EN_LOCALE","code","dir","buttonText","today","list","allDayText","eventLimitText","noEventsMessage","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","codeArg","simpleId","queryRawLocale","parseLocale","queryLocale","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","updates","isDynamic","overrideHash","removals_1","localeDefaults","dirDefaults","calendarSystemClassMap","theClass","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","settings","isNamedTimeZone","namedTimeZoneImpl","createCalendarSystem","weekDow","weekDoy","firstDay","weekNumberFunc","createNowMarker","timestampToMarker","getYear","addYears","addMonths","greatestWholeUnit","diffWholeWeeks","diffHours","diffMinutes","diffSeconds","countDurationsBetween","asRoughMonths","startOf","startOfYear","startOfMonth","startOfWeek","startOfHour","startOfMinute","startOfSecond","y","w","nextW","weekOfYear","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","stripZeroTime","toISOString","buildIsoString","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","eventSourceHash","sources","sources_1","fetchDirtySources","addSources","fetchSourcesByIds","excludeStaticSources","sourceHash","receiveResponse","uid$3","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccessRes","sourceSuccessRes","calSuccess","error","callFailure","console","warn","DateProfileGenerator","viewSpec","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","dateIncrement","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","renderRange","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","dayCount","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","class","usesMinMaxTime","dateIncrementInput","dateIncrementDuration","alignment","dateAlignment","computeRes","isHiddenDay","skipHiddenDays","customAlignment","runningCount","visibleRange","fallback","otherArgs","hiddenDays","isHiddenDayHash","Error","inc","isExclusive","viewType","currentViewType","reduceViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","p0","p1","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","eventSourceLoadingLevel","computeLoadingLevel","reducerFunc","newDate","currentSelection","currentInstanceId","eventInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","parseOpenDateSpan","fabricateEventRange","ensureViewDef","defaultConfigs","overrideConfigs","viewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","buildViewDef","viewSubclass","configs","superProto","getPrototypeOf","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","compileViewDefs","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextKey","buttonTextOverride","buttonTextDefault","buildViewSpec","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupEl","groupChildren","isOnlyButtons","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","text","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","bool","CalendarComponent","_renderToolbars","renderToolbars","buildViewPropTransformers","contentEl","modifyViewContainer","toggleElClassNames","computeTitle","footer","dirClassName","themeClassName","freezeHeight","dateProfileGenerator","renderView","updateSize","thawHeight","headerLayout","footerLayout","now","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","queryScroll","viewProps","transformers_1","transformer","transform","isResize","isHeightAuto","computeHeightVars","viewHeight","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","parentEl","viewOptions","titleFormat","computeTitleFormat","theClasses","Interaction","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","querySelector","jsEvent","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","listenToHoverBySelector","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","button","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","listView","close","Calendar","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","equalityFunc","cachedRes","newRes","memoizeOutput","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","needsFullRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginInputs","pluginDefs","pluginInputs_1","pluginInput","globalName","refinePluginDefs","pluginDefs_1","pluginDef","requestRerender","renderableEventStore","bindHandlers","executeRender","unbindHandlers","removeNavLinkListener","anchorEl","getAttribute","customAction","viewOpt","zoomTo","windowResizeProxy","windowResize","buildInitialState","rawSources","singleRawSource","rawSources_1","batchRendering","getInitialDate","oldState","shift","newState","needsFull","delayedRerender","tryRerender","renderComponent","savedScroll","eventUiSingleBase","eventUiBySource","applyScroll","releaseAfterSizingTriggers","setOption","mutateOptions","getOption","viewOpts","changeHandlers","normalUpdates","specialUpdates","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_3","pluginHooks","rerenderDelay","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_4","isValidViewType","dateOrRange","unselect","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","registerInteractiveComponent","settingsInput","useEventCenter","parseInteractionSettings","interactions","interactionClass","unregisterInteractiveComponent","select","dateOrObj","endDate","triggerDateSelect","pev","triggerDateUnselect","origEvent","triggerDateClick","dayEl","buildDatePointApi","dateStr","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","scrollToDuration","View","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","eventOrderSpecs","token","specs","tokens","substring","parseFieldSpecs","initialize","isAuto","updateBaseSize","renderDates","startNowIndicator","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","computeEventDraggable","eventUi","transformers","computeEventStartResizable","computeEventEndResizable","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","update","delay","getNowIndicatorUnit","initialNowDate","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearTimeout","clearInterval","queuedScroll","applyQueuedScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","renderSegs","mirrorInfo","rangeUpdated","renderSegEls","attachSegs","_segs","detachSegs","displayEventTime","displayEventEnd","eventTimeFormat","computeEventTimeFormat","computeDisplayEventTime","computeDisplayEventEnd","renderSegHtml","getSegClasses","isDraggable","isResizable","isDragging","isResizing","getTimeText","displayEnd","_getTimeText","getSkinCss","sortEventSegs","objs","buildSegCompareObj","fieldSpecs","cmp","compareByFieldSpecs","c","_seg","computeSizes","force","computeSegSizes","assignSizes","assignSegSizes","hideByHash","visibility","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","toLowerCase","ElementDragging","emitter","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","renderDateCell","datesRepDistinctDays","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","columnHeaderHtml","columnHeaderText","DayHeader","thead","dates","renderIntroHtml","computeFallbackHeaderFormat","dates_1","DaySeries","indices","dayIndex","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","row","col","buildCell","seriesSeg","index","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","eventRanges","eventRanges_1","sliceEventRange","isComponentAllDay","FullCalendar","elRef","componentDidMount","current","componentDidUpdate","componentWillUnmount","getApi","keyList","hasProp","equal","arrA","arrB","dateA","dateB","getTime","regexpA","RegExp","regexpB","toString","DayGridDateProfileGenerator","endOfWeek","monthMode","fixedWeekCount","Popover","isHidden","margin","documentMousedown","hide","show","autoHide","elDims","origin","offsetParent","clippingRect","SimpleDayGridEventRenderer","timeText","titleHtml","isResizableFromStart","isResizableFromEnd","skinCss","timeHtml","DayGridEventRenderer","dayGrid","rowStructs","renderSegRows","rowEls","rowNode","tbodyEl","removeSegPopover","rowStruct","pop","segRows","groupSegRows","renderSegRow","rowSegs","levelSegs","tr","td","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","emptyCellsUntil","endCol","leftCol","rightCol","introHtml","renderProps","levels","isDaySegCollision","level","compareDaySegCols","otherSegs","otherSeg","DayGridMirrorRenderer","skeletonTopEl","skeletonTop","skeletonEl","DayGridFillRenderer","renderFillRow","trEl","startCol","getElementsByTagName","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","_renderFrame","renderFgEvents","fgSegs","eventDragInstances","eventResizeInstances","segContainerEl","layer","dayTile","DayBgRow","renderHtml","cell","renderCellHtml","htmlAttrs","DAY_NUM_FORMAT","WEEK_NUM_FORMAT","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","renderDayRowHtml","cellEls","rowPositions","colPositions","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","weekCalcFirstDow","isDayNumberVisible","buildColPositions","buildRowPositions","positionToHit","relativeRect","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowBottom","trEls","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","moreNodes","getCellSegs","renderMoreLink","node","moreEls","limitedEls","limitedEl","hiddenSegs","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","showSegPopover","topEl","dayDate","dayRange","newSegs","startLevel","WEEK_NUM_FORMAT$1","DayGridView","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","scroller","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","scrollerHeight","headRowEl","computeScrollerHeight","setGridHeight","SimpleDayGrid","slicer","DayGridSlicer","dayTable","rawHit","DayGridView$1","_context","buildDayTable","simpleDayGrid","main","dayGridDay","dayGridWeek","dayGridMonth","factory"],"mappings":"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","file":"static/js/3.dd3822e7.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar FormContext = _react.default.createContext({\n  controlId: undefined\n});\n\nvar _default = FormContext;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _SafeAnchor = _interopRequireDefault(require(\"./SafeAnchor\"));\n\nvar defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false,\n  type: 'button'\n};\n\nvar Button = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      size = _ref.size,\n      active = _ref.active,\n      className = _ref.className,\n      block = _ref.block,\n      type = _ref.type,\n      as = _ref.as,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"variant\", \"size\", \"active\", \"className\", \"block\", \"type\", \"as\"]);\n  var prefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'btn');\n  var classes = (0, _classnames.default)(className, prefix, active && 'active', prefix + \"-\" + variant, block && prefix + \"-block\", size && prefix + \"-\" + size);\n\n  if (props.href) {\n    return _react.default.createElement(_SafeAnchor.default, (0, _extends2.default)({}, props, {\n      as: as,\n      ref: ref,\n      className: (0, _classnames.default)(classes, props.disabled && 'disabled')\n    }));\n  }\n\n  if (ref) {\n    props.ref = ref;\n  }\n\n  if (!as) {\n    props.type = type;\n  }\n\n  var Component = as || 'button';\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    className: classes\n  }));\n});\n\nButton.displayName = 'Button';\nButton.defaultProps = defaultProps;\nvar _default = Button;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function warning() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  warning = function warning(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n\n    if (format === undefined) {\n      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar propTypes = {\n  /**\n   * Specify whether the feedback is for valid or invalid fields\n   *\n   * @type {('valid'|'invalid')}\n   */\n  type: _propTypes.default.string.isRequired,\n  as: _propTypes.default.elementType\n};\nvar defaultProps = {\n  type: 'valid'\n};\n\nvar Feedback = _react.default.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      type = _ref.type,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"as\", \"className\", \"type\"]);\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    ref: ref,\n    className: (0, _classnames.default)(className, type && type + \"-feedback\")\n  }));\n});\n\nFeedback.displayName = 'Feedback';\nFeedback.propTypes = propTypes;\nFeedback.defaultProps = defaultProps;\nvar _default = Feedback;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createWithBsPrefix = _interopRequireDefault(require(\"./utils/createWithBsPrefix\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _FormGroup = _interopRequireDefault(require(\"./FormGroup\"));\n\nvar _FormControl = _interopRequireDefault(require(\"./FormControl\"));\n\nvar _FormCheck = _interopRequireDefault(require(\"./FormCheck\"));\n\nvar _FormLabel = _interopRequireDefault(require(\"./FormLabel\"));\n\nvar _FormText = _interopRequireDefault(require(\"./FormText\"));\n\nvar defaultProps = {\n  inline: false\n};\n\nvar Form = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      inline = _ref.inline,\n      className = _ref.className,\n      validated = _ref.validated,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'form' : _ref$as,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"inline\", \"className\", \"validated\", \"as\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form');\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    ref: ref,\n    className: (0, _classnames.default)(className, validated && 'was-validated', inline && bsPrefix + \"-inline\")\n  }));\n});\n\nForm.displayName = 'Form';\nForm.defaultProps = defaultProps;\nForm.Row = (0, _createWithBsPrefix.default)('form-row');\nForm.Group = _FormGroup.default;\nForm.Control = _FormControl.default;\nForm.Check = _FormCheck.default;\nForm.Label = _FormLabel.default;\nForm.Text = _FormText.default;\nvar _default = Form;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar FormGroup = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      children = _ref.children,\n      controlId = _ref.controlId,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"className\", \"children\", \"controlId\", \"as\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-group');\n  var context = (0, _react.useMemo)(function () {\n    return {\n      controlId: controlId\n    };\n  }, [controlId]);\n  return _react.default.createElement(_FormContext.default.Provider, {\n    value: context\n  }, _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    ref: ref,\n    className: (0, _classnames.default)(className, bsPrefix)\n  }), children));\n});\n\nFormGroup.displayName = 'FormGroup';\nvar _default = FormGroup;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _Feedback = _interopRequireDefault(require(\"./Feedback\"));\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar FormControl = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      type = _ref.type,\n      size = _ref.size,\n      id = _ref.id,\n      className = _ref.className,\n      isValid = _ref.isValid,\n      isInvalid = _ref.isInvalid,\n      plaintext = _ref.plaintext,\n      readOnly = _ref.readOnly,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'input' : _ref$as,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"type\", \"size\", \"id\", \"className\", \"isValid\", \"isInvalid\", \"plaintext\", \"readOnly\", \"as\"]);\n\n  var _useContext = (0, _react.useContext)(_FormContext.default),\n      controlId = _useContext.controlId;\n\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-control');\n  var classes;\n\n  if (plaintext) {\n    var _classes;\n\n    classes = (_classes = {}, _classes[bsPrefix + \"-plaintext\"] = true, _classes);\n  } else if (type === 'file') {\n    var _classes2;\n\n    classes = (_classes2 = {}, _classes2[bsPrefix + \"-file\"] = true, _classes2);\n  } else {\n    var _classes3;\n\n    classes = (_classes3 = {}, _classes3[bsPrefix] = true, _classes3[bsPrefix + \"-\" + size] = size, _classes3);\n  }\n\n  process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(controlId == null || !id, '`controlId` is ignored on `<FormControl>` when `id` is specified.') : void 0;\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    type: type,\n    ref: ref,\n    readOnly: readOnly,\n    id: id || controlId,\n    className: (0, _classnames.default)(className, classes, isValid && \"is-valid\", isInvalid && \"is-invalid\")\n  }));\n});\n\nFormControl.displayName = 'FormControl';\nFormControl.Feedback = _Feedback.default;\nvar _default = FormControl;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar _Feedback = _interopRequireDefault(require(\"./Feedback\"));\n\nvar _FormCheckInput = _interopRequireDefault(require(\"./FormCheckInput\"));\n\nvar _FormCheckLabel = _interopRequireDefault(require(\"./FormCheckLabel\"));\n\nvar defaultProps = {\n  type: 'checkbox',\n  inline: false,\n  disabled: false,\n  isValid: false,\n  isInvalid: false,\n  title: ''\n};\n\nvar FormCheck = _react.default.forwardRef(function (_ref, ref) {\n  var id = _ref.id,\n      bsPrefix = _ref.bsPrefix,\n      inline = _ref.inline,\n      disabled = _ref.disabled,\n      isValid = _ref.isValid,\n      isInvalid = _ref.isInvalid,\n      feedback = _ref.feedback,\n      className = _ref.className,\n      style = _ref.style,\n      title = _ref.title,\n      type = _ref.type,\n      label = _ref.label,\n      children = _ref.children,\n      custom = _ref.custom,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"id\", \"bsPrefix\", \"inline\", \"disabled\", \"isValid\", \"isInvalid\", \"feedback\", \"className\", \"style\", \"title\", \"type\", \"label\", \"children\", \"custom\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-check');\n\n  var _useContext = (0, _react.useContext)(_FormContext.default),\n      controlId = _useContext.controlId;\n\n  var innerFormContext = (0, _react.useMemo)(function () {\n    return {\n      controlId: id || controlId,\n      custom: custom\n    };\n  }, [controlId, custom, id]);\n  var hasLabel = label != null && label !== false && !children;\n\n  var input = _react.default.createElement(_FormCheckInput.default, (0, _extends2.default)({}, props, {\n    type: type,\n    ref: ref,\n    isValid: isValid,\n    isInvalid: isInvalid,\n    isStatic: !hasLabel,\n    disabled: disabled\n  }));\n\n  return _react.default.createElement(_FormContext.default.Provider, {\n    value: innerFormContext\n  }, _react.default.createElement(\"div\", {\n    style: style,\n    className: (0, _classnames.default)(className, !custom && bsPrefix, custom && \"custom-control custom-\" + type, inline && (custom ? 'custom-control' : bsPrefix) + \"-inline\")\n  }, children || _react.default.createElement(_react.default.Fragment, null, input, hasLabel && _react.default.createElement(_FormCheckLabel.default, {\n    title: title\n  }, label), (isValid || isInvalid) && _react.default.createElement(_Feedback.default, {\n    type: isValid ? 'valid' : 'invalid'\n  }, feedback))));\n});\n\nFormCheck.displayName = 'FormCheck';\nFormCheck.defaultProps = defaultProps;\nFormCheck.Input = _FormCheckInput.default;\nFormCheck.Label = _FormCheckLabel.default;\nvar _default = FormCheck;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar defaultProps = {\n  type: 'checkbox'\n};\n\nvar FormCheckInput = _react.default.forwardRef(function (_ref, ref) {\n  var id = _ref.id,\n      bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      isValid = _ref.isValid,\n      isInvalid = _ref.isInvalid,\n      isStatic = _ref.isStatic,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"id\", \"bsPrefix\", \"className\", \"isValid\", \"isInvalid\", \"isStatic\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-check-input');\n\n  var _useContext = (0, _react.useContext)(_FormContext.default),\n      controlId = _useContext.controlId,\n      custom = _useContext.custom;\n\n  return _react.default.createElement(\"input\", (0, _extends2.default)({}, props, {\n    ref: ref,\n    id: id || controlId,\n    className: (0, _classnames.default)(className, !custom && bsPrefix, custom && 'custom-control-input', isValid && 'is-valid', isInvalid && 'is-invalid', isStatic && 'position-static')\n  }));\n});\n\nFormCheckInput.displayName = 'FormCheckInput';\nFormCheckInput.defaultProps = defaultProps;\nvar _default = FormCheckInput;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar defaultProps = {\n  type: 'checkbox'\n};\n\nvar FormCheckLabel = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      htmlFor = _ref.htmlFor,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"className\", \"htmlFor\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-check-label');\n\n  var _useContext = (0, _react.useContext)(_FormContext.default),\n      controlId = _useContext.controlId,\n      custom = _useContext.custom;\n\n  return _react.default.createElement(\"label\", (0, _extends2.default)({}, props, {\n    ref: ref,\n    htmlFor: htmlFor || controlId,\n    className: (0, _classnames.default)(className, !custom && bsPrefix, custom && 'custom-control-label')\n  }));\n});\n\nFormCheckLabel.displayName = 'FormCheckLabel';\nFormCheckLabel.defaultProps = defaultProps;\nvar _default = FormCheckLabel;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _Col = _interopRequireDefault(require(\"./Col\"));\n\nvar _FormContext = _interopRequireDefault(require(\"./FormContext\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar defaultProps = {\n  column: false,\n  srOnly: false\n};\n\nvar FormLabel = _react.default.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      column = _ref.column,\n      srOnly = _ref.srOnly,\n      className = _ref.className,\n      htmlFor = _ref.htmlFor,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"column\", \"srOnly\", \"className\", \"htmlFor\"]);\n\n  var _useContext = (0, _react.useContext)(_FormContext.default),\n      controlId = _useContext.controlId;\n\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-label');\n  var classes = (0, _classnames.default)(className, bsPrefix, srOnly && 'sr-only', column && 'col-form-label');\n  process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(controlId == null || !htmlFor, '`controlId` is ignored on `<FormLabel>` when `htmlFor` is specified.') : void 0;\n  htmlFor = htmlFor || controlId;\n  if (column) return _react.default.createElement(_Col.default, (0, _extends2.default)({\n    as: \"label\",\n    className: classes,\n    htmlFor: htmlFor\n  }, props));\n  return (// eslint-disable-next-line jsx-a11y/label-has-for, jsx-a11y/label-has-associated-control\n    _react.default.createElement(\"label\", (0, _extends2.default)({\n      ref: ref,\n      className: classes,\n      htmlFor: htmlFor\n    }, props))\n  );\n});\n\nFormLabel.displayName = 'FormLabel';\nFormLabel.defaultProps = defaultProps;\nvar _default = FormLabel;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar DEVICE_SIZES = ['xl', 'lg', 'md', 'sm', 'xs'];\n\nvar Col = _react.default.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"className\", \"as\"]);\n  var prefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'col');\n  var spans = [];\n  var classes = [];\n  DEVICE_SIZES.forEach(function (brkPoint) {\n    var propValue = props[brkPoint];\n    delete props[brkPoint];\n    var span, offset, order;\n\n    if (propValue != null && typeof propValue === 'object') {\n      var _propValue$span = propValue.span;\n      span = _propValue$span === void 0 ? true : _propValue$span;\n      offset = propValue.offset;\n      order = propValue.order;\n    } else {\n      span = propValue;\n    }\n\n    var infix = brkPoint !== 'xs' ? \"-\" + brkPoint : '';\n    if (span != null) spans.push(span === true ? \"\" + prefix + infix : \"\" + prefix + infix + \"-\" + span);\n    if (order != null) classes.push(\"order\" + infix + \"-\" + order);\n    if (offset != null) classes.push(\"offset\" + infix + \"-\" + offset);\n  });\n\n  if (!spans.length) {\n    spans.push(prefix); // plain 'col'\n  }\n\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    ref: ref,\n    className: _classnames.default.apply(void 0, [className].concat(spans, classes))\n  }));\n});\n\nCol.displayName = 'Col';\nvar _default = Col;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar FormText = _react.default.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'small' : _ref$as,\n      muted = _ref.muted,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"bsPrefix\", \"className\", \"as\", \"muted\"]);\n  bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'form-text');\n  return _react.default.createElement(Component, (0, _extends2.default)({}, props, {\n    ref: ref,\n    className: (0, _classnames.default)(className, bsPrefix, muted && 'text-muted')\n  }));\n});\n\nFormText.displayName = 'FormText';\nvar _default = FormText;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","/*!\nFullCalendar Core Package v4.3.1\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n// Creating\n// ----------------------------------------------------------------------------------------------------------------\nvar elementPropHash = {\n  className: true,\n  colSpan: true,\n  rowSpan: true\n};\nvar containerTagHash = {\n  '<tr': 'tbody',\n  '<td': 'tr'\n};\n\nfunction createElement(tagName, attrs, content) {\n  var el = document.createElement(tagName);\n\n  if (attrs) {\n    for (var attrName in attrs) {\n      if (attrName === 'style') {\n        applyStyle(el, attrs[attrName]);\n      } else if (elementPropHash[attrName]) {\n        el[attrName] = attrs[attrName];\n      } else {\n        el.setAttribute(attrName, attrs[attrName]);\n      }\n    }\n  }\n\n  if (typeof content === 'string') {\n    el.innerHTML = content; // shortcut. no need to process HTML in any way\n  } else if (content != null) {\n    appendToElement(el, content);\n  }\n\n  return el;\n}\n\nfunction htmlToElement(html) {\n  html = html.trim();\n  var container = document.createElement(computeContainerTag(html));\n  container.innerHTML = html;\n  return container.firstChild;\n}\n\nfunction htmlToElements(html) {\n  return Array.prototype.slice.call(htmlToNodeList(html));\n}\n\nfunction htmlToNodeList(html) {\n  html = html.trim();\n  var container = document.createElement(computeContainerTag(html));\n  container.innerHTML = html;\n  return container.childNodes;\n} // assumes html already trimmed and tag names are lowercase\n\n\nfunction computeContainerTag(html) {\n  return containerTagHash[html.substr(0, 3) // faster than using regex\n  ] || 'div';\n}\n\nfunction appendToElement(el, content) {\n  var childNodes = normalizeContent(content);\n\n  for (var i = 0; i < childNodes.length; i++) {\n    el.appendChild(childNodes[i]);\n  }\n}\n\nfunction prependToElement(parent, content) {\n  var newEls = normalizeContent(content);\n  var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n\n  for (var i = 0; i < newEls.length; i++) {\n    parent.insertBefore(newEls[i], afterEl);\n  }\n}\n\nfunction insertAfterElement(refEl, content) {\n  var newEls = normalizeContent(content);\n  var afterEl = refEl.nextSibling || null;\n\n  for (var i = 0; i < newEls.length; i++) {\n    refEl.parentNode.insertBefore(newEls[i], afterEl);\n  }\n}\n\nfunction normalizeContent(content) {\n  var els;\n\n  if (typeof content === 'string') {\n    els = htmlToElements(content);\n  } else if (content instanceof Node) {\n    els = [content];\n  } else {\n    // Node[] or NodeList\n    els = Array.prototype.slice.call(content);\n  }\n\n  return els;\n}\n\nfunction removeElement(el) {\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n} // Querying\n// ----------------------------------------------------------------------------------------------------------------\n// from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n\n\nvar matchesMethod = Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.msMatchesSelector;\n\nvar closestMethod = Element.prototype.closest || function (selector) {\n  // polyfill\n  var el = this;\n\n  if (!document.documentElement.contains(el)) {\n    return null;\n  }\n\n  do {\n    if (elementMatches(el, selector)) {\n      return el;\n    }\n\n    el = el.parentElement || el.parentNode;\n  } while (el !== null && el.nodeType === 1);\n\n  return null;\n};\n\nfunction elementClosest(el, selector) {\n  return closestMethod.call(el, selector);\n}\n\nfunction elementMatches(el, selector) {\n  return matchesMethod.call(el, selector);\n} // accepts multiple subject els\n// returns a real array. good for methods like forEach\n\n\nfunction findElements(container, selector) {\n  var containers = container instanceof HTMLElement ? [container] : container;\n  var allMatches = [];\n\n  for (var i = 0; i < containers.length; i++) {\n    var matches = containers[i].querySelectorAll(selector);\n\n    for (var j = 0; j < matches.length; j++) {\n      allMatches.push(matches[j]);\n    }\n  }\n\n  return allMatches;\n} // accepts multiple subject els\n// only queries direct child elements\n\n\nfunction findChildren(parent, selector) {\n  var parents = parent instanceof HTMLElement ? [parent] : parent;\n  var allMatches = [];\n\n  for (var i = 0; i < parents.length; i++) {\n    var childNodes = parents[i].children; // only ever elements\n\n    for (var j = 0; j < childNodes.length; j++) {\n      var childNode = childNodes[j];\n\n      if (!selector || elementMatches(childNode, selector)) {\n        allMatches.push(childNode);\n      }\n    }\n  }\n\n  return allMatches;\n} // Attributes\n// ----------------------------------------------------------------------------------------------------------------\n\n\nfunction forceClassName(el, className, bool) {\n  if (bool) {\n    el.classList.add(className);\n  } else {\n    el.classList.remove(className);\n  }\n} // Style\n// ----------------------------------------------------------------------------------------------------------------\n\n\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\n\nfunction applyStyle(el, props) {\n  for (var propName in props) {\n    applyStyleProp(el, propName, props[propName]);\n  }\n}\n\nfunction applyStyleProp(el, name, val) {\n  if (val == null) {\n    el.style[name] = '';\n  } else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n    el.style[name] = val + 'px';\n  } else {\n    el.style[name] = val;\n  }\n}\n\nfunction pointInsideRect(point, rect) {\n  return point.left >= rect.left && point.left < rect.right && point.top >= rect.top && point.top < rect.bottom;\n} // Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\n\n\nfunction intersectRects(rect1, rect2) {\n  var res = {\n    left: Math.max(rect1.left, rect2.left),\n    right: Math.min(rect1.right, rect2.right),\n    top: Math.max(rect1.top, rect2.top),\n    bottom: Math.min(rect1.bottom, rect2.bottom)\n  };\n\n  if (res.left < res.right && res.top < res.bottom) {\n    return res;\n  }\n\n  return false;\n}\n\nfunction translateRect(rect, deltaX, deltaY) {\n  return {\n    left: rect.left + deltaX,\n    right: rect.right + deltaX,\n    top: rect.top + deltaY,\n    bottom: rect.bottom + deltaY\n  };\n} // Returns a new point that will have been moved to reside within the given rectangle\n\n\nfunction constrainPoint(point, rect) {\n  return {\n    left: Math.min(Math.max(point.left, rect.left), rect.right),\n    top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n  };\n} // Returns a point that is the center of the given rectangle\n\n\nfunction getRectCenter(rect) {\n  return {\n    left: (rect.left + rect.right) / 2,\n    top: (rect.top + rect.bottom) / 2\n  };\n} // Subtracts point2's coordinates from point1's coordinates, returning a delta\n\n\nfunction diffPoints(point1, point2) {\n  return {\n    left: point1.left - point2.left,\n    top: point1.top - point2.top\n  };\n} // Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\n\n\nvar isRtlScrollbarOnLeft = null;\n\nfunction getIsRtlScrollbarOnLeft() {\n  if (isRtlScrollbarOnLeft === null) {\n    isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n  }\n\n  return isRtlScrollbarOnLeft;\n}\n\nfunction computeIsRtlScrollbarOnLeft() {\n  var outerEl = createElement('div', {\n    style: {\n      position: 'absolute',\n      top: -1000,\n      left: 0,\n      border: 0,\n      padding: 0,\n      overflow: 'scroll',\n      direction: 'rtl'\n    }\n  }, '<div></div>');\n  document.body.appendChild(outerEl);\n  var innerEl = outerEl.firstChild;\n  var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n  removeElement(outerEl);\n  return res;\n} // The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\n\n\nfunction sanitizeScrollbarWidth(width) {\n  width = Math.max(0, width); // no negatives\n\n  width = Math.round(width);\n  return width;\n}\n\nfunction computeEdges(el, getPadding) {\n  if (getPadding === void 0) {\n    getPadding = false;\n  }\n\n  var computedStyle = window.getComputedStyle(el);\n  var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n  var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n  var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n  var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0; // must use offset(Width|Height) because compatible with client(Width|Height)\n\n  var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n  var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n  var res = {\n    borderLeft: borderLeft,\n    borderRight: borderRight,\n    borderTop: borderTop,\n    borderBottom: borderBottom,\n    scrollbarBottom: scrollbarBottom,\n    scrollbarLeft: 0,\n    scrollbarRight: 0\n  };\n\n  if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') {\n    // is the scrollbar on the left side?\n    res.scrollbarLeft = scrollbarLeftRight;\n  } else {\n    res.scrollbarRight = scrollbarLeftRight;\n  }\n\n  if (getPadding) {\n    res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n    res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n    res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n    res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n  }\n\n  return res;\n}\n\nfunction computeInnerRect(el, goWithinPadding) {\n  if (goWithinPadding === void 0) {\n    goWithinPadding = false;\n  }\n\n  var outerRect = computeRect(el);\n  var edges = computeEdges(el, goWithinPadding);\n  var res = {\n    left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n    right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n    top: outerRect.top + edges.borderTop,\n    bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n  };\n\n  if (goWithinPadding) {\n    res.left += edges.paddingLeft;\n    res.right -= edges.paddingRight;\n    res.top += edges.paddingTop;\n    res.bottom -= edges.paddingBottom;\n  }\n\n  return res;\n}\n\nfunction computeRect(el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + window.pageXOffset,\n    top: rect.top + window.pageYOffset,\n    right: rect.right + window.pageXOffset,\n    bottom: rect.bottom + window.pageYOffset\n  };\n}\n\nfunction computeViewportRect() {\n  return {\n    left: window.pageXOffset,\n    right: window.pageXOffset + document.documentElement.clientWidth,\n    top: window.pageYOffset,\n    bottom: window.pageYOffset + document.documentElement.clientHeight\n  };\n}\n\nfunction computeHeightAndMargins(el) {\n  return el.getBoundingClientRect().height + computeVMargins(el);\n}\n\nfunction computeVMargins(el) {\n  var computed = window.getComputedStyle(el);\n  return parseInt(computed.marginTop, 10) + parseInt(computed.marginBottom, 10);\n} // does not return window\n\n\nfunction getClippingParents(el) {\n  var parents = [];\n\n  while (el instanceof HTMLElement) {\n    // will stop when gets to document or null\n    var computedStyle = window.getComputedStyle(el);\n\n    if (computedStyle.position === 'fixed') {\n      break;\n    }\n\n    if (/(auto|scroll)/.test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n      parents.push(el);\n    }\n\n    el = el.parentNode;\n  }\n\n  return parents;\n}\n\nfunction computeClippingRect(el) {\n  return getClippingParents(el).map(function (el) {\n    return computeInnerRect(el);\n  }).concat(computeViewportRect()).reduce(function (rect0, rect1) {\n    return intersectRects(rect0, rect1) || rect1; // should always intersect\n  });\n} // Stops a mouse/touch event from doing it's native browser action\n\n\nfunction preventDefault(ev) {\n  ev.preventDefault();\n} // Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\n\n\nfunction listenBySelector(container, eventType, selector, handler) {\n  function realHandler(ev) {\n    var matchedChild = elementClosest(ev.target, selector);\n\n    if (matchedChild) {\n      handler.call(matchedChild, ev, matchedChild);\n    }\n  }\n\n  container.addEventListener(eventType, realHandler);\n  return function () {\n    container.removeEventListener(eventType, realHandler);\n  };\n}\n\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n  var currentMatchedChild;\n  return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n    if (matchedChild !== currentMatchedChild) {\n      currentMatchedChild = matchedChild;\n      onMouseEnter(ev, matchedChild);\n\n      var realOnMouseLeave_1 = function realOnMouseLeave_1(ev) {\n        currentMatchedChild = null;\n        onMouseLeave(ev, matchedChild);\n        matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n      }; // listen to the next mouseleave, and then unattach\n\n\n      matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n    }\n  });\n} // Animation\n// ----------------------------------------------------------------------------------------------------------------\n\n\nvar transitionEventNames = ['webkitTransitionEnd', 'otransitionend', 'oTransitionEnd', 'msTransitionEnd', 'transitionend']; // triggered only when the next single subsequent transition finishes\n\nfunction whenTransitionDone(el, callback) {\n  var realCallback = function realCallback(ev) {\n    callback(ev);\n    transitionEventNames.forEach(function (eventName) {\n      el.removeEventListener(eventName, realCallback);\n    });\n  };\n\n  transitionEventNames.forEach(function (eventName) {\n    el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n  });\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat']; // Adding\n\nfunction addWeeks(m, n) {\n  var a = dateToUtcArray(m);\n  a[2] += n * 7;\n  return arrayToUtcDate(a);\n}\n\nfunction addDays(m, n) {\n  var a = dateToUtcArray(m);\n  a[2] += n;\n  return arrayToUtcDate(a);\n}\n\nfunction addMs(m, n) {\n  var a = dateToUtcArray(m);\n  a[6] += n;\n  return arrayToUtcDate(a);\n} // Diffing (all return floats)\n\n\nfunction diffWeeks(m0, m1) {\n  return diffDays(m0, m1) / 7;\n}\n\nfunction diffDays(m0, m1) {\n  return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\n\nfunction diffHours(m0, m1) {\n  return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\n\nfunction diffMinutes(m0, m1) {\n  return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\n\nfunction diffSeconds(m0, m1) {\n  return (m1.valueOf() - m0.valueOf()) / 1000;\n}\n\nfunction diffDayAndTime(m0, m1) {\n  var m0day = startOfDay(m0);\n  var m1day = startOfDay(m1);\n  return {\n    years: 0,\n    months: 0,\n    days: Math.round(diffDays(m0day, m1day)),\n    milliseconds: m1.valueOf() - m1day.valueOf() - (m0.valueOf() - m0day.valueOf())\n  };\n} // Diffing Whole Units\n\n\nfunction diffWholeWeeks(m0, m1) {\n  var d = diffWholeDays(m0, m1);\n\n  if (d !== null && d % 7 === 0) {\n    return d / 7;\n  }\n\n  return null;\n}\n\nfunction diffWholeDays(m0, m1) {\n  if (timeAsMs(m0) === timeAsMs(m1)) {\n    return Math.round(diffDays(m0, m1));\n  }\n\n  return null;\n} // Start-Of\n\n\nfunction startOfDay(m) {\n  return arrayToUtcDate([m.getUTCFullYear(), m.getUTCMonth(), m.getUTCDate()]);\n}\n\nfunction startOfHour(m) {\n  return arrayToUtcDate([m.getUTCFullYear(), m.getUTCMonth(), m.getUTCDate(), m.getUTCHours()]);\n}\n\nfunction startOfMinute(m) {\n  return arrayToUtcDate([m.getUTCFullYear(), m.getUTCMonth(), m.getUTCDate(), m.getUTCHours(), m.getUTCMinutes()]);\n}\n\nfunction startOfSecond(m) {\n  return arrayToUtcDate([m.getUTCFullYear(), m.getUTCMonth(), m.getUTCDate(), m.getUTCHours(), m.getUTCMinutes(), m.getUTCSeconds()]);\n} // Week Computation\n\n\nfunction weekOfYear(marker, dow, doy) {\n  var y = marker.getUTCFullYear();\n  var w = weekOfGivenYear(marker, y, dow, doy);\n\n  if (w < 1) {\n    return weekOfGivenYear(marker, y - 1, dow, doy);\n  }\n\n  var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n\n  if (nextW >= 1) {\n    return Math.min(w, nextW);\n  }\n\n  return w;\n}\n\nfunction weekOfGivenYear(marker, year, dow, doy) {\n  var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n  var dayStart = startOfDay(marker);\n  var days = Math.round(diffDays(firstWeekStart, dayStart));\n  return Math.floor(days / 7) + 1; // zero-indexed\n} // start-of-first-week - start-of-year\n\n\nfunction firstWeekOffset(year, dow, doy) {\n  // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n  var fwd = 7 + dow - doy; // first-week day local weekday -- which local weekday is fwd\n\n  var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n  return -fwdlw + fwd - 1;\n} // Array Conversion\n\n\nfunction dateToLocalArray(date) {\n  return [date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()];\n}\n\nfunction arrayToLocalDate(a) {\n  return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n  a[3] || 0, a[4] || 0, a[5] || 0);\n}\n\nfunction dateToUtcArray(date) {\n  return [date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds()];\n}\n\nfunction arrayToUtcDate(a) {\n  // according to web standards (and Safari), a month index is required.\n  // massage if only given a year.\n  if (a.length === 1) {\n    a = a.concat([0]);\n  }\n\n  return new Date(Date.UTC.apply(Date, a));\n} // Other Utils\n\n\nfunction isValidDate(m) {\n  return !isNaN(m.valueOf());\n}\n\nfunction timeAsMs(m) {\n  return m.getUTCHours() * 1000 * 60 * 60 + m.getUTCMinutes() * 1000 * 60 + m.getUTCSeconds() * 1000 + m.getUTCMilliseconds();\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/; // Parsing and Creation\n\nfunction createDuration(input, unit) {\n  var _a;\n\n  if (typeof input === 'string') {\n    return parseString(input);\n  } else if (typeof input === 'object' && input) {\n    // non-null object\n    return normalizeObject(input);\n  } else if (typeof input === 'number') {\n    return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n  } else {\n    return null;\n  }\n}\n\nfunction parseString(s) {\n  var m = PARSE_RE.exec(s);\n\n  if (m) {\n    var sign = m[1] ? -1 : 1;\n    return {\n      years: 0,\n      months: 0,\n      days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n      milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n      (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n      (m[5] ? parseInt(m[5], 10) : 0) * 1000 + ( // seconds\n      m[6] ? parseInt(m[6], 10) : 0) // ms\n      )\n    };\n  }\n\n  return null;\n}\n\nfunction normalizeObject(obj) {\n  return {\n    years: obj.years || obj.year || 0,\n    months: obj.months || obj.month || 0,\n    days: (obj.days || obj.day || 0) + getWeeksFromInput(obj) * 7,\n    milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n    (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n    (obj.seconds || obj.second || 0) * 1000 + ( // seconds\n    obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n\n  };\n}\n\nfunction getWeeksFromInput(obj) {\n  return obj.weeks || obj.week || 0;\n} // Equality\n\n\nfunction durationsEqual(d0, d1) {\n  return d0.years === d1.years && d0.months === d1.months && d0.days === d1.days && d0.milliseconds === d1.milliseconds;\n}\n\nfunction isSingleDay(dur) {\n  return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n} // Simple Math\n\n\nfunction addDurations(d0, d1) {\n  return {\n    years: d0.years + d1.years,\n    months: d0.months + d1.months,\n    days: d0.days + d1.days,\n    milliseconds: d0.milliseconds + d1.milliseconds\n  };\n}\n\nfunction subtractDurations(d1, d0) {\n  return {\n    years: d1.years - d0.years,\n    months: d1.months - d0.months,\n    days: d1.days - d0.days,\n    milliseconds: d1.milliseconds - d0.milliseconds\n  };\n}\n\nfunction multiplyDuration(d, n) {\n  return {\n    years: d.years * n,\n    months: d.months * n,\n    days: d.days * n,\n    milliseconds: d.milliseconds * n\n  };\n} // Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\n\n\nfunction asRoughYears(dur) {\n  return asRoughDays(dur) / 365;\n}\n\nfunction asRoughMonths(dur) {\n  return asRoughDays(dur) / 30;\n}\n\nfunction asRoughDays(dur) {\n  return asRoughMs(dur) / 864e5;\n}\n\nfunction asRoughMinutes(dur) {\n  return asRoughMs(dur) / (1000 * 60);\n}\n\nfunction asRoughSeconds(dur) {\n  return asRoughMs(dur) / 1000;\n}\n\nfunction asRoughMs(dur) {\n  return dur.years * (365 * 864e5) + dur.months * (30 * 864e5) + dur.days * 864e5 + dur.milliseconds;\n} // Advanced Math\n\n\nfunction wholeDivideDurations(numerator, denominator) {\n  var res = null;\n\n  for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n    var unit = INTERNAL_UNITS[i];\n\n    if (denominator[unit]) {\n      var localRes = numerator[unit] / denominator[unit];\n\n      if (!isInt(localRes) || res !== null && res !== localRes) {\n        return null;\n      }\n\n      res = localRes;\n    } else if (numerator[unit]) {\n      // needs to divide by something but can't!\n      return null;\n    }\n  }\n\n  return res;\n}\n\nfunction greatestDurationDenominator(dur, dontReturnWeeks) {\n  var ms = dur.milliseconds;\n\n  if (ms) {\n    if (ms % 1000 !== 0) {\n      return {\n        unit: 'millisecond',\n        value: ms\n      };\n    }\n\n    if (ms % (1000 * 60) !== 0) {\n      return {\n        unit: 'second',\n        value: ms / 1000\n      };\n    }\n\n    if (ms % (1000 * 60 * 60) !== 0) {\n      return {\n        unit: 'minute',\n        value: ms / (1000 * 60)\n      };\n    }\n\n    if (ms) {\n      return {\n        unit: 'hour',\n        value: ms / (1000 * 60 * 60)\n      };\n    }\n  }\n\n  if (dur.days) {\n    if (!dontReturnWeeks && dur.days % 7 === 0) {\n      return {\n        unit: 'week',\n        value: dur.days / 7\n      };\n    }\n\n    return {\n      unit: 'day',\n      value: dur.days\n    };\n  }\n\n  if (dur.months) {\n    return {\n      unit: 'month',\n      value: dur.months\n    };\n  }\n\n  if (dur.years) {\n    return {\n      unit: 'year',\n      value: dur.years\n    };\n  }\n\n  return {\n    unit: 'millisecond',\n    value: 0\n  };\n}\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\n\n\nfunction compensateScroll(rowEl, scrollbarWidths) {\n  if (scrollbarWidths.left) {\n    applyStyle(rowEl, {\n      borderLeftWidth: 1,\n      marginLeft: scrollbarWidths.left - 1\n    });\n  }\n\n  if (scrollbarWidths.right) {\n    applyStyle(rowEl, {\n      borderRightWidth: 1,\n      marginRight: scrollbarWidths.right - 1\n    });\n  }\n} // Undoes compensateScroll and restores all borders/margins\n\n\nfunction uncompensateScroll(rowEl) {\n  applyStyle(rowEl, {\n    marginLeft: '',\n    marginRight: '',\n    borderLeftWidth: '',\n    borderRightWidth: ''\n  });\n} // Make the mouse cursor express that an event is not allowed in the current area\n\n\nfunction disableCursor() {\n  document.body.classList.add('fc-not-allowed');\n} // Returns the mouse cursor to its original look\n\n\nfunction enableCursor() {\n  document.body.classList.remove('fc-not-allowed');\n} // Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\n\n\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n  // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n  // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n  var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n\n  var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n\n  var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n\n  var flexOffsets = []; // amount of vertical space it takes up\n\n  var flexHeights = []; // actual css height\n\n  var usedHeight = 0;\n  undistributeHeight(els); // give all elements their natural height\n  // find elements that are below the recommended height (expandable).\n  // important to query for heights in a single first pass (to avoid reflow oscillation).\n\n  els.forEach(function (el, i) {\n    var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n    var naturalHeight = el.getBoundingClientRect().height;\n    var naturalOffset = naturalHeight + computeVMargins(el);\n\n    if (naturalOffset < minOffset) {\n      flexEls.push(el);\n      flexOffsets.push(naturalOffset);\n      flexHeights.push(naturalHeight);\n    } else {\n      // this element stretches past recommended height (non-expandable). mark the space as occupied.\n      usedHeight += naturalOffset;\n    }\n  }); // readjust the recommended height to only consider the height available to non-maxed-out rows.\n\n  if (shouldRedistribute) {\n    availableHeight -= usedHeight;\n    minOffset1 = Math.floor(availableHeight / flexEls.length);\n    minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n  } // assign heights to all expandable elements\n\n\n  flexEls.forEach(function (el, i) {\n    var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n    var naturalOffset = flexOffsets[i];\n    var naturalHeight = flexHeights[i];\n    var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n\n    if (naturalOffset < minOffset) {\n      // we check this again because redistribution might have changed things\n      el.style.height = newHeight + 'px';\n    }\n  });\n} // Undoes distrubuteHeight, restoring all els to their natural height\n\n\nfunction undistributeHeight(els) {\n  els.forEach(function (el) {\n    el.style.height = '';\n  });\n} // Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\n\n\nfunction matchCellWidths(els) {\n  var maxInnerWidth = 0;\n  els.forEach(function (el) {\n    var innerEl = el.firstChild; // hopefully an element\n\n    if (innerEl instanceof HTMLElement) {\n      var innerWidth_1 = innerEl.getBoundingClientRect().width;\n\n      if (innerWidth_1 > maxInnerWidth) {\n        maxInnerWidth = innerWidth_1;\n      }\n    }\n  });\n  maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n\n  els.forEach(function (el) {\n    el.style.width = maxInnerWidth + 'px';\n  });\n  return maxInnerWidth;\n} // Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\n\n\nfunction subtractInnerElHeight(outerEl, innerEl) {\n  // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n  var reflowStyleProps = {\n    position: 'relative',\n    left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n\n  };\n  applyStyle(outerEl, reflowStyleProps);\n  applyStyle(innerEl, reflowStyleProps);\n  var diff = // grab the dimensions\n  outerEl.getBoundingClientRect().height - innerEl.getBoundingClientRect().height; // undo hack\n\n  var resetStyleProps = {\n    position: '',\n    left: ''\n  };\n  applyStyle(outerEl, resetStyleProps);\n  applyStyle(innerEl, resetStyleProps);\n  return diff;\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction preventSelection(el) {\n  el.classList.add('fc-unselectable');\n  el.addEventListener('selectstart', preventDefault);\n}\n\nfunction allowSelection(el) {\n  el.classList.remove('fc-unselectable');\n  el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction preventContextMenu(el) {\n  el.addEventListener('contextmenu', preventDefault);\n}\n\nfunction allowContextMenu(el) {\n  el.removeEventListener('contextmenu', preventDefault);\n}\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction parseFieldSpecs(input) {\n  var specs = [];\n  var tokens = [];\n  var i;\n  var token;\n\n  if (typeof input === 'string') {\n    tokens = input.split(/\\s*,\\s*/);\n  } else if (typeof input === 'function') {\n    tokens = [input];\n  } else if (Array.isArray(input)) {\n    tokens = input;\n  }\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    if (typeof token === 'string') {\n      specs.push(token.charAt(0) === '-' ? {\n        field: token.substring(1),\n        order: -1\n      } : {\n        field: token,\n        order: 1\n      });\n    } else if (typeof token === 'function') {\n      specs.push({\n        func: token\n      });\n    }\n  }\n\n  return specs;\n}\n\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n  var i;\n  var cmp;\n\n  for (i = 0; i < fieldSpecs.length; i++) {\n    cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n\n    if (cmp) {\n      return cmp;\n    }\n  }\n\n  return 0;\n}\n\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n  if (fieldSpec.func) {\n    return fieldSpec.func(obj0, obj1);\n  }\n\n  return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field]) * (fieldSpec.order || 1);\n}\n\nfunction flexibleCompare(a, b) {\n  if (!a && !b) {\n    return 0;\n  }\n\n  if (b == null) {\n    return -1;\n  }\n\n  if (a == null) {\n    return 1;\n  }\n\n  if (typeof a === 'string' || typeof b === 'string') {\n    return String(a).localeCompare(String(b));\n  }\n\n  return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction capitaliseFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction padStart(val, len) {\n  var s = String(val);\n  return '000'.substr(0, len - s.length) + s;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction isInt(n) {\n  return n % 1 === 0;\n}\n/* Weird Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction applyAll(functions, thisObj, args) {\n  if (typeof functions === 'function') {\n    // supplied a single function\n    functions = [functions];\n  }\n\n  if (functions) {\n    var i = void 0;\n    var ret = void 0;\n\n    for (i = 0; i < functions.length; i++) {\n      ret = functions[i].apply(thisObj, args) || ret;\n    }\n\n    return ret;\n  }\n}\n\nfunction firstDefined() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  for (var i = 0; i < args.length; i++) {\n    if (args[i] !== undefined) {\n      return args[i];\n    }\n  }\n} // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\n\n\nfunction debounce(func, wait) {\n  var timeout;\n  var args;\n  var context;\n  var timestamp;\n  var result;\n\n  var later = function later() {\n    var last = new Date().valueOf() - timestamp;\n\n    if (last < wait) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    }\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n    timestamp = new Date().valueOf();\n\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n    }\n\n    return result;\n  };\n} // Number and Boolean are only types that defaults or not computed for\n// TODO: write more comments\n\n\nfunction refineProps(rawProps, processors, defaults, leftoverProps) {\n  if (defaults === void 0) {\n    defaults = {};\n  }\n\n  var refined = {};\n\n  for (var key in processors) {\n    var processor = processors[key];\n\n    if (rawProps[key] !== undefined) {\n      // found\n      if (processor === Function) {\n        refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n      } else if (processor) {\n        // a refining function?\n        refined[key] = processor(rawProps[key]);\n      } else {\n        refined[key] = rawProps[key];\n      }\n    } else if (defaults[key] !== undefined) {\n      // there's an explicit default\n      refined[key] = defaults[key];\n    } else {\n      // must compute a default\n      if (processor === String) {\n        refined[key] = ''; // empty string is default for String\n      } else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n        refined[key] = null; // assign null for other non-custom processor funcs\n      } else {\n        refined[key] = processor(null); // run the custom processor func\n      }\n    }\n  }\n\n  if (leftoverProps) {\n    for (var key in rawProps) {\n      if (processors[key] === undefined) {\n        leftoverProps[key] = rawProps[key];\n      }\n    }\n  }\n\n  return refined;\n}\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\n\n\nfunction computeAlignedDayRange(timedRange) {\n  var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n  var start = startOfDay(timedRange.start);\n  var end = addDays(start, dayCnt);\n  return {\n    start: start,\n    end: end\n  };\n} // given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\n\n\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n  if (nextDayThreshold === void 0) {\n    nextDayThreshold = createDuration(0);\n  }\n\n  var startDay = null;\n  var endDay = null;\n\n  if (timedRange.end) {\n    endDay = startOfDay(timedRange.end);\n    var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n    // If the end time is actually inclusively part of the next day and is equal to or\n    // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n    // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n\n    if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n      endDay = addDays(endDay, 1);\n    }\n  }\n\n  if (timedRange.start) {\n    startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n    // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n\n    if (endDay && endDay <= startDay) {\n      endDay = addDays(startDay, 1);\n    }\n  }\n\n  return {\n    start: startDay,\n    end: endDay\n  };\n} // spans from one day into another?\n\n\nfunction isMultiDayRange(range) {\n  var visibleRange = computeVisibleDayRange(range);\n  return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\n\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n  if (largeUnit === 'year') {\n    return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n  } else if (largeUnit === 'month') {\n    return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n  } else {\n    return diffDayAndTime(date0, date1); // returns a duration\n  }\n}\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n  for (var i = 0; i < recurringTypes.length; i++) {\n    var localLeftovers = {};\n    var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n\n    if (parsed) {\n      var allDay = localLeftovers.allDay;\n      delete localLeftovers.allDay; // remove from leftovers\n\n      if (allDay == null) {\n        allDay = allDayDefault;\n\n        if (allDay == null) {\n          allDay = parsed.allDayGuess;\n\n          if (allDay == null) {\n            allDay = false;\n          }\n        }\n      }\n\n      _assign(leftovers, localLeftovers);\n\n      return {\n        allDay: allDay,\n        duration: parsed.duration,\n        typeData: parsed.typeData,\n        typeId: i\n      };\n    }\n  }\n\n  return null;\n}\n/*\nEvent MUST have a recurringDef\n*/\n\n\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n  var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n  var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n    start: dateEnv.subtract(framingRange.start, duration),\n    end: framingRange.end\n  }, dateEnv); // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n\n  if (eventDef.allDay) {\n    markers = markers.map(startOfDay);\n  }\n\n  return markers;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty; // Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\n\nfunction mergeProps(propObjs, complexProps) {\n  var dest = {};\n  var i;\n  var name;\n  var complexObjs;\n  var j;\n  var val;\n  var props;\n\n  if (complexProps) {\n    for (i = 0; i < complexProps.length; i++) {\n      name = complexProps[i];\n      complexObjs = []; // collect the trailing object values, stopping when a non-object is discovered\n\n      for (j = propObjs.length - 1; j >= 0; j--) {\n        val = propObjs[j][name];\n\n        if (typeof val === 'object' && val) {\n          // non-null object\n          complexObjs.unshift(val);\n        } else if (val !== undefined) {\n          dest[name] = val; // if there were no objects, this value will be used\n\n          break;\n        }\n      } // if the trailing values were objects, use the merged value\n\n\n      if (complexObjs.length) {\n        dest[name] = mergeProps(complexObjs);\n      }\n    }\n  } // copy values into the destination, going from last to first\n\n\n  for (i = propObjs.length - 1; i >= 0; i--) {\n    props = propObjs[i];\n\n    for (name in props) {\n      if (!(name in dest)) {\n        // if already assigned by previous props or complex props, don't reassign\n        dest[name] = props[name];\n      }\n    }\n  }\n\n  return dest;\n}\n\nfunction filterHash(hash, func) {\n  var filtered = {};\n\n  for (var key in hash) {\n    if (func(hash[key], key)) {\n      filtered[key] = hash[key];\n    }\n  }\n\n  return filtered;\n}\n\nfunction mapHash(hash, func) {\n  var newHash = {};\n\n  for (var key in hash) {\n    newHash[key] = func(hash[key], key);\n  }\n\n  return newHash;\n}\n\nfunction arrayToHash(a) {\n  var hash = {};\n\n  for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n    var item = a_1[_i];\n    hash[item] = true;\n  }\n\n  return hash;\n}\n\nfunction hashValuesToArray(obj) {\n  var a = [];\n\n  for (var key in obj) {\n    a.push(obj[key]);\n  }\n\n  return a;\n}\n\nfunction isPropsEqual(obj0, obj1) {\n  for (var key in obj0) {\n    if (hasOwnProperty.call(obj0, key)) {\n      if (!(key in obj1)) {\n        return false;\n      }\n    }\n  }\n\n  for (var key in obj1) {\n    if (hasOwnProperty.call(obj1, key)) {\n      if (obj0[key] !== obj1[key]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n  var eventStore = createEmptyEventStore();\n\n  for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n    var rawEvent = rawEvents_1[_i];\n    var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n\n    if (tuple) {\n      eventTupleToStore(tuple, eventStore);\n    }\n  }\n\n  return eventStore;\n}\n\nfunction eventTupleToStore(tuple, eventStore) {\n  if (eventStore === void 0) {\n    eventStore = createEmptyEventStore();\n  }\n\n  eventStore.defs[tuple.def.defId] = tuple.def;\n\n  if (tuple.instance) {\n    eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n  }\n\n  return eventStore;\n}\n\nfunction expandRecurring(eventStore, framingRange, calendar) {\n  var dateEnv = calendar.dateEnv;\n  var defs = eventStore.defs,\n      instances = eventStore.instances; // remove existing recurring instances\n\n  instances = filterHash(instances, function (instance) {\n    return !defs[instance.defId].recurringDef;\n  });\n\n  for (var defId in defs) {\n    var def = defs[defId];\n\n    if (def.recurringDef) {\n      var duration = def.recurringDef.duration;\n\n      if (!duration) {\n        duration = def.allDay ? calendar.defaultAllDayEventDuration : calendar.defaultTimedEventDuration;\n      }\n\n      var starts = expandRecurringRanges(def, duration, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n\n      for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n        var start = starts_1[_i];\n        var instance = createEventInstance(defId, {\n          start: start,\n          end: dateEnv.add(start, duration)\n        });\n        instances[instance.instanceId] = instance;\n      }\n    }\n  }\n\n  return {\n    defs: defs,\n    instances: instances\n  };\n} // retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\n\n\nfunction getRelevantEvents(eventStore, instanceId) {\n  var instance = eventStore.instances[instanceId];\n\n  if (instance) {\n    var def_1 = eventStore.defs[instance.defId]; // get events/instances with same group\n\n    var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n      return isEventDefsGrouped(def_1, lookDef);\n    }); // add the original\n    // TODO: wish we could use eventTupleToStore or something like it\n\n    newStore.defs[def_1.defId] = def_1;\n    newStore.instances[instance.instanceId] = instance;\n    return newStore;\n  }\n\n  return createEmptyEventStore();\n}\n\nfunction isEventDefsGrouped(def0, def1) {\n  return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\n\nfunction transformRawEvents(rawEvents, eventSource, calendar) {\n  var calEachTransform = calendar.opt('eventDataTransform');\n  var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n\n  if (sourceEachTransform) {\n    rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n  }\n\n  if (calEachTransform) {\n    rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n  }\n\n  return rawEvents;\n}\n\nfunction transformEachRawEvent(rawEvents, func) {\n  var refinedEvents;\n\n  if (!func) {\n    refinedEvents = rawEvents;\n  } else {\n    refinedEvents = [];\n\n    for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n      var rawEvent = rawEvents_2[_i];\n      var refinedEvent = func(rawEvent);\n\n      if (refinedEvent) {\n        refinedEvents.push(refinedEvent);\n      } else if (refinedEvent == null) {\n        refinedEvents.push(rawEvent);\n      } // if a different falsy value, do nothing\n\n    }\n  }\n\n  return refinedEvents;\n}\n\nfunction createEmptyEventStore() {\n  return {\n    defs: {},\n    instances: {}\n  };\n}\n\nfunction mergeEventStores(store0, store1) {\n  return {\n    defs: _assign({}, store0.defs, store1.defs),\n    instances: _assign({}, store0.instances, store1.instances)\n  };\n}\n\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n  var defs = filterHash(eventStore.defs, filterFunc);\n  var instances = filterHash(eventStore.instances, function (instance) {\n    return defs[instance.defId]; // still exists?\n  });\n  return {\n    defs: defs,\n    instances: instances\n  };\n}\n\nfunction parseRange(input, dateEnv) {\n  var start = null;\n  var end = null;\n\n  if (input.start) {\n    start = dateEnv.createMarker(input.start);\n  }\n\n  if (input.end) {\n    end = dateEnv.createMarker(input.end);\n  }\n\n  if (!start && !end) {\n    return null;\n  }\n\n  if (start && end && end < start) {\n    return null;\n  }\n\n  return {\n    start: start,\n    end: end\n  };\n} // SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\n\n\nfunction invertRanges(ranges, constraintRange) {\n  var invertedRanges = [];\n  var start = constraintRange.start; // the end of the previous range. the start of the new range\n\n  var i;\n  var dateRange; // ranges need to be in order. required for our date-walking algorithm\n\n  ranges.sort(compareRanges);\n\n  for (i = 0; i < ranges.length; i++) {\n    dateRange = ranges[i]; // add the span of time before the event (if there is any)\n\n    if (dateRange.start > start) {\n      // compare millisecond time (skip any ambig logic)\n      invertedRanges.push({\n        start: start,\n        end: dateRange.start\n      });\n    }\n\n    if (dateRange.end > start) {\n      start = dateRange.end;\n    }\n  } // add the span of time after the last event (if there is any)\n\n\n  if (start < constraintRange.end) {\n    // compare millisecond time (skip any ambig logic)\n    invertedRanges.push({\n      start: start,\n      end: constraintRange.end\n    });\n  }\n\n  return invertedRanges;\n}\n\nfunction compareRanges(range0, range1) {\n  return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\n\nfunction intersectRanges(range0, range1) {\n  var start = range0.start;\n  var end = range0.end;\n  var newRange = null;\n\n  if (range1.start !== null) {\n    if (start === null) {\n      start = range1.start;\n    } else {\n      start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n    }\n  }\n\n  if (range1.end != null) {\n    if (end === null) {\n      end = range1.end;\n    } else {\n      end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n    }\n  }\n\n  if (start === null || end === null || start < end) {\n    newRange = {\n      start: start,\n      end: end\n    };\n  }\n\n  return newRange;\n}\n\nfunction rangesEqual(range0, range1) {\n  return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) && (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\n\nfunction rangesIntersect(range0, range1) {\n  return (range0.end === null || range1.start === null || range0.end > range1.start) && (range0.start === null || range1.end === null || range0.start < range1.end);\n}\n\nfunction rangeContainsRange(outerRange, innerRange) {\n  return (outerRange.start === null || innerRange.start !== null && innerRange.start >= outerRange.start) && (outerRange.end === null || innerRange.end !== null && innerRange.end <= outerRange.end);\n}\n\nfunction rangeContainsMarker(range, date) {\n  return (range.start === null || date >= range.start) && (range.end === null || date < range.end);\n} // If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\n\n\nfunction constrainMarkerToRange(date, range) {\n  if (range.start != null && date < range.start) {\n    return range.start;\n  }\n\n  if (range.end != null && date >= range.end) {\n    return new Date(range.end.valueOf() - 1);\n  }\n\n  return date;\n}\n\nfunction removeExact(array, exactVal) {\n  var removeCnt = 0;\n  var i = 0;\n\n  while (i < array.length) {\n    if (array[i] === exactVal) {\n      array.splice(i, 1);\n      removeCnt++;\n    } else {\n      i++;\n    }\n  }\n\n  return removeCnt;\n}\n\nfunction isArraysEqual(a0, a1) {\n  var len = a0.length;\n  var i;\n\n  if (len !== a1.length) {\n    // not array? or not same length?\n    return false;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (a0[i] !== a1[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction memoize(workerFunc) {\n  var args;\n  var res;\n  return function () {\n    if (!args || !isArraysEqual(args, arguments)) {\n      args = arguments;\n      res = workerFunc.apply(this, arguments);\n    }\n\n    return res;\n  };\n}\n/*\nalways executes the workerFunc, but if the result is equal to the previous result,\nreturn the previous result instead.\n*/\n\n\nfunction memoizeOutput(workerFunc, equalityFunc) {\n  var cachedRes = null;\n  return function () {\n    var newRes = workerFunc.apply(this, arguments);\n\n    if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n      cachedRes = newRes;\n    }\n\n    return cachedRes;\n  };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n  week: 3,\n  separator: 0,\n  omitZeroMinute: 0,\n  meridiem: 0,\n  omitCommas: 0\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n  timeZoneName: 7,\n  era: 6,\n  year: 5,\n  month: 4,\n  day: 2,\n  weekday: 2,\n  hour: 1,\n  minute: 1,\n  second: 1\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\n\nvar COMMA_RE = /,/g; // we need re for globalness\n\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\n\nvar UTC_RE = /UTC|GMT/;\n\nvar NativeFormatter =\n/** @class */\nfunction () {\n  function NativeFormatter(formatSettings) {\n    var standardDateProps = {};\n    var extendedSettings = {};\n    var severity = 0;\n\n    for (var name_1 in formatSettings) {\n      if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n        extendedSettings[name_1] = formatSettings[name_1];\n        severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n      } else {\n        standardDateProps[name_1] = formatSettings[name_1];\n\n        if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n          severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n        }\n      }\n    }\n\n    this.standardDateProps = standardDateProps;\n    this.extendedSettings = extendedSettings;\n    this.severity = severity;\n    this.buildFormattingFunc = memoize(buildFormattingFunc);\n  }\n\n  NativeFormatter.prototype.format = function (date, context) {\n    return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n  };\n\n  NativeFormatter.prototype.formatRange = function (start, end, context) {\n    var _a = this,\n        standardDateProps = _a.standardDateProps,\n        extendedSettings = _a.extendedSettings;\n\n    var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n\n    if (!diffSeverity) {\n      return this.format(start, context);\n    }\n\n    var biggestUnitForPartial = diffSeverity;\n\n    if (biggestUnitForPartial > 1 && ( // the two dates are different in a way that's larger scale than time\n    standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') && (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') && (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n      biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n    }\n\n    var full0 = this.format(start, context);\n    var full1 = this.format(end, context);\n\n    if (full0 === full1) {\n      return full0;\n    }\n\n    var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n    var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n    var partial0 = partialFormattingFunc(start);\n    var partial1 = partialFormattingFunc(end);\n    var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n    var separator = extendedSettings.separator || '';\n\n    if (insertion) {\n      return insertion.before + partial0 + separator + partial1 + insertion.after;\n    }\n\n    return full0 + separator + full1;\n  };\n\n  NativeFormatter.prototype.getLargestUnit = function () {\n    switch (this.severity) {\n      case 7:\n      case 6:\n      case 5:\n        return 'year';\n\n      case 4:\n        return 'month';\n\n      case 3:\n        return 'week';\n\n      default:\n        return 'day';\n    }\n  };\n\n  return NativeFormatter;\n}();\n\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n  var standardDatePropCnt = Object.keys(standardDateProps).length;\n\n  if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n    return function (date) {\n      return formatTimeZoneOffset(date.timeZoneOffset);\n    };\n  }\n\n  if (standardDatePropCnt === 0 && extendedSettings.week) {\n    return function (date) {\n      return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n    };\n  }\n\n  return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\n\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n  standardDateProps = _assign({}, standardDateProps); // copy\n\n  extendedSettings = _assign({}, extendedSettings); // copy\n\n  sanitizeSettings(standardDateProps, extendedSettings);\n  standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n\n  var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n  var zeroFormat; // needed?\n\n  if (extendedSettings.omitZeroMinute) {\n    var zeroProps = _assign({}, standardDateProps);\n\n    delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n\n    zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n  }\n\n  return function (date) {\n    var marker = date.marker;\n    var format;\n\n    if (zeroFormat && !marker.getUTCMinutes()) {\n      format = zeroFormat;\n    } else {\n      format = normalFormat;\n    }\n\n    var s = format.format(marker);\n    return postProcess(s, date, standardDateProps, extendedSettings, context);\n  };\n}\n\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n  // deal with a browser inconsistency where formatting the timezone\n  // requires that the hour/minute be present.\n  if (standardDateProps.timeZoneName) {\n    if (!standardDateProps.hour) {\n      standardDateProps.hour = '2-digit';\n    }\n\n    if (!standardDateProps.minute) {\n      standardDateProps.minute = '2-digit';\n    }\n  } // only support short timezone names\n\n\n  if (standardDateProps.timeZoneName === 'long') {\n    standardDateProps.timeZoneName = 'short';\n  } // if requesting to display seconds, MUST display minutes\n\n\n  if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n    delete extendedSettings.omitZeroMinute;\n  }\n}\n\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n  s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n\n  if (standardDateProps.timeZoneName === 'short') {\n    s = injectTzoStr(s, context.timeZone === 'UTC' || date.timeZoneOffset == null ? 'UTC' : // important to normalize for IE, which does \"GMT\"\n    formatTimeZoneOffset(date.timeZoneOffset));\n  }\n\n  if (extendedSettings.omitCommas) {\n    s = s.replace(COMMA_RE, '').trim();\n  }\n\n  if (extendedSettings.omitZeroMinute) {\n    s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n  } // ^ do anything that might create adjacent spaces before this point,\n  // because MERIDIEM_RE likes to eat up loading spaces\n\n\n  if (extendedSettings.meridiem === false) {\n    s = s.replace(MERIDIEM_RE, '').trim();\n  } else if (extendedSettings.meridiem === 'narrow') {\n    // a/p\n    s = s.replace(MERIDIEM_RE, function (m0, m1) {\n      return m1.toLocaleLowerCase();\n    });\n  } else if (extendedSettings.meridiem === 'short') {\n    // am/pm\n    s = s.replace(MERIDIEM_RE, function (m0, m1) {\n      return m1.toLocaleLowerCase() + 'm';\n    });\n  } else if (extendedSettings.meridiem === 'lowercase') {\n    // other meridiem transformers already converted to lowercase\n    s = s.replace(MERIDIEM_RE, function (m0) {\n      return m0.toLocaleLowerCase();\n    });\n  }\n\n  s = s.replace(MULTI_SPACE_RE, ' ');\n  s = s.trim();\n  return s;\n}\n\nfunction injectTzoStr(s, tzoStr) {\n  var replaced = false;\n  s = s.replace(UTC_RE, function () {\n    replaced = true;\n    return tzoStr;\n  }); // IE11 doesn't include UTC/GMT in the original string, so append to end\n\n  if (!replaced) {\n    s += ' ' + tzoStr;\n  }\n\n  return s;\n}\n\nfunction formatWeekNumber(num, weekLabel, locale, display) {\n  var parts = [];\n\n  if (display === 'narrow') {\n    parts.push(weekLabel);\n  } else if (display === 'short') {\n    parts.push(weekLabel, ' ');\n  } // otherwise, considered 'numeric'\n\n\n  parts.push(locale.simpleNumberFormat.format(num));\n\n  if (locale.options.isRtl) {\n    // TODO: use control characters instead?\n    parts.reverse();\n  }\n\n  return parts.join('');\n} // Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\n\n\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n  if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n    return 5;\n  }\n\n  if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n    return 4;\n  }\n\n  if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n    return 2;\n  }\n\n  if (timeAsMs(d0) !== timeAsMs(d1)) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction computePartialFormattingOptions(options, biggestUnit) {\n  var partialOptions = {};\n\n  for (var name_2 in options) {\n    if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n    STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n      partialOptions[name_2] = options[name_2];\n    }\n  }\n\n  return partialOptions;\n}\n\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n  var i0 = 0;\n\n  while (i0 < full0.length) {\n    var found0 = full0.indexOf(partial0, i0);\n\n    if (found0 === -1) {\n      break;\n    }\n\n    var before0 = full0.substr(0, found0);\n    i0 = found0 + partial0.length;\n    var after0 = full0.substr(i0);\n    var i1 = 0;\n\n    while (i1 < full1.length) {\n      var found1 = full1.indexOf(partial1, i1);\n\n      if (found1 === -1) {\n        break;\n      }\n\n      var before1 = full1.substr(0, found1);\n      i1 = found1 + partial1.length;\n      var after1 = full1.substr(i1);\n\n      if (before0 === before1 && after0 === after1) {\n        return {\n          before: before0,\n          after: after0\n        };\n      }\n    }\n  }\n\n  return null;\n}\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\n\n\nvar CmdFormatter =\n/** @class */\nfunction () {\n  function CmdFormatter(cmdStr, separator) {\n    this.cmdStr = cmdStr;\n    this.separator = separator;\n  }\n\n  CmdFormatter.prototype.format = function (date, context) {\n    return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n  };\n\n  CmdFormatter.prototype.formatRange = function (start, end, context) {\n    return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n  };\n\n  return CmdFormatter;\n}();\n\nvar FuncFormatter =\n/** @class */\nfunction () {\n  function FuncFormatter(func) {\n    this.func = func;\n  }\n\n  FuncFormatter.prototype.format = function (date, context) {\n    return this.func(createVerboseFormattingArg(date, null, context));\n  };\n\n  FuncFormatter.prototype.formatRange = function (start, end, context) {\n    return this.func(createVerboseFormattingArg(start, end, context));\n  };\n\n  return FuncFormatter;\n}(); // Formatter Object Creation\n\n\nfunction createFormatter(input, defaultSeparator) {\n  if (typeof input === 'object' && input) {\n    // non-null object\n    if (typeof defaultSeparator === 'string') {\n      input = _assign({\n        separator: defaultSeparator\n      }, input);\n    }\n\n    return new NativeFormatter(input);\n  } else if (typeof input === 'string') {\n    return new CmdFormatter(input, defaultSeparator);\n  } else if (typeof input === 'function') {\n    return new FuncFormatter(input);\n  }\n} // String Utils\n// timeZoneOffset is in minutes\n\n\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n  if (stripZeroTime === void 0) {\n    stripZeroTime = false;\n  }\n\n  var s = marker.toISOString();\n  s = s.replace('.000', '');\n\n  if (stripZeroTime) {\n    s = s.replace('T00:00:00Z', '');\n  }\n\n  if (s.length > 10) {\n    // time part wasn't stripped, can add timezone info\n    if (timeZoneOffset == null) {\n      s = s.replace('Z', '');\n    } else if (timeZoneOffset !== 0) {\n      s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n    } // otherwise, its UTC-0 and we want to keep the Z\n\n  }\n\n  return s;\n}\n\nfunction formatIsoTimeString(marker) {\n  return padStart(marker.getUTCHours(), 2) + ':' + padStart(marker.getUTCMinutes(), 2) + ':' + padStart(marker.getUTCSeconds(), 2);\n}\n\nfunction formatTimeZoneOffset(minutes, doIso) {\n  if (doIso === void 0) {\n    doIso = false;\n  }\n\n  var sign = minutes < 0 ? '-' : '+';\n  var abs = Math.abs(minutes);\n  var hours = Math.floor(abs / 60);\n  var mins = Math.round(abs % 60);\n\n  if (doIso) {\n    return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n  } else {\n    return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n  }\n} // Arg Utils\n\n\nfunction createVerboseFormattingArg(start, end, context, separator) {\n  var startInfo = expandZonedMarker(start, context.calendarSystem);\n  var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n  return {\n    date: startInfo,\n    start: startInfo,\n    end: endInfo,\n    timeZone: context.timeZone,\n    localeCodes: context.locale.codes,\n    separator: separator\n  };\n}\n\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n  var a = calendarSystem.markerToArray(dateInfo.marker);\n  return {\n    marker: dateInfo.marker,\n    timeZoneOffset: dateInfo.timeZoneOffset,\n    array: a,\n    year: a[0],\n    month: a[1],\n    day: a[2],\n    hour: a[3],\n    minute: a[4],\n    second: a[5],\n    millisecond: a[6]\n  };\n}\n\nvar EventSourceApi =\n/** @class */\nfunction () {\n  function EventSourceApi(calendar, internalEventSource) {\n    this.calendar = calendar;\n    this.internalEventSource = internalEventSource;\n  }\n\n  EventSourceApi.prototype.remove = function () {\n    this.calendar.dispatch({\n      type: 'REMOVE_EVENT_SOURCE',\n      sourceId: this.internalEventSource.sourceId\n    });\n  };\n\n  EventSourceApi.prototype.refetch = function () {\n    this.calendar.dispatch({\n      type: 'FETCH_EVENT_SOURCES',\n      sourceIds: [this.internalEventSource.sourceId]\n    });\n  };\n\n  Object.defineProperty(EventSourceApi.prototype, \"id\", {\n    get: function get() {\n      return this.internalEventSource.publicId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventSourceApi.prototype, \"url\", {\n    // only relevant to json-feed event sources\n    get: function get() {\n      return this.internalEventSource.meta.url;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return EventSourceApi;\n}();\n\nvar EventApi =\n/** @class */\nfunction () {\n  function EventApi(calendar, def, instance) {\n    this._calendar = calendar;\n    this._def = def;\n    this._instance = instance || null;\n  }\n  /*\n  TODO: make event struct more responsible for this\n  */\n\n\n  EventApi.prototype.setProp = function (name, val) {\n    var _a, _b;\n\n    if (name in DATE_PROPS) ;else if (name in NON_DATE_PROPS) {\n      if (typeof NON_DATE_PROPS[name] === 'function') {\n        val = NON_DATE_PROPS[name](val);\n      }\n\n      this.mutate({\n        standardProps: (_a = {}, _a[name] = val, _a)\n      });\n    } else if (name in UNSCOPED_EVENT_UI_PROPS) {\n      var ui = void 0;\n\n      if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n        val = UNSCOPED_EVENT_UI_PROPS[name](val);\n      }\n\n      if (name === 'color') {\n        ui = {\n          backgroundColor: val,\n          borderColor: val\n        };\n      } else if (name === 'editable') {\n        ui = {\n          startEditable: val,\n          durationEditable: val\n        };\n      } else {\n        ui = (_b = {}, _b[name] = val, _b);\n      }\n\n      this.mutate({\n        standardProps: {\n          ui: ui\n        }\n      });\n    }\n  };\n\n  EventApi.prototype.setExtendedProp = function (name, val) {\n    var _a;\n\n    this.mutate({\n      extendedProps: (_a = {}, _a[name] = val, _a)\n    });\n  };\n\n  EventApi.prototype.setStart = function (startInput, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var dateEnv = this._calendar.dateEnv;\n    var start = dateEnv.createMarker(startInput);\n\n    if (start && this._instance) {\n      // TODO: warning if parsed bad\n      var instanceRange = this._instance.range;\n      var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n\n      if (options.maintainDuration) {\n        this.mutate({\n          datesDelta: startDelta\n        });\n      } else {\n        this.mutate({\n          startDelta: startDelta\n        });\n      }\n    }\n  };\n\n  EventApi.prototype.setEnd = function (endInput, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var dateEnv = this._calendar.dateEnv;\n    var end;\n\n    if (endInput != null) {\n      end = dateEnv.createMarker(endInput);\n\n      if (!end) {\n        return; // TODO: warning if parsed bad\n      }\n    }\n\n    if (this._instance) {\n      if (end) {\n        var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n        this.mutate({\n          endDelta: endDelta\n        });\n      } else {\n        this.mutate({\n          standardProps: {\n            hasEnd: false\n          }\n        });\n      }\n    }\n  };\n\n  EventApi.prototype.setDates = function (startInput, endInput, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var dateEnv = this._calendar.dateEnv;\n    var standardProps = {\n      allDay: options.allDay\n    };\n    var start = dateEnv.createMarker(startInput);\n    var end;\n\n    if (!start) {\n      return; // TODO: warning if parsed bad\n    }\n\n    if (endInput != null) {\n      end = dateEnv.createMarker(endInput);\n\n      if (!end) {\n        // TODO: warning if parsed bad\n        return;\n      }\n    }\n\n    if (this._instance) {\n      var instanceRange = this._instance.range; // when computing the diff for an event being converted to all-day,\n      // compute diff off of the all-day values the way event-mutation does.\n\n      if (options.allDay === true) {\n        instanceRange = computeAlignedDayRange(instanceRange);\n      }\n\n      var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n\n      if (end) {\n        var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n\n        if (durationsEqual(startDelta, endDelta)) {\n          this.mutate({\n            datesDelta: startDelta,\n            standardProps: standardProps\n          });\n        } else {\n          this.mutate({\n            startDelta: startDelta,\n            endDelta: endDelta,\n            standardProps: standardProps\n          });\n        }\n      } else {\n        // means \"clear the end\"\n        standardProps.hasEnd = false;\n        this.mutate({\n          datesDelta: startDelta,\n          standardProps: standardProps\n        });\n      }\n    }\n  };\n\n  EventApi.prototype.moveStart = function (deltaInput) {\n    var delta = createDuration(deltaInput);\n\n    if (delta) {\n      // TODO: warning if parsed bad\n      this.mutate({\n        startDelta: delta\n      });\n    }\n  };\n\n  EventApi.prototype.moveEnd = function (deltaInput) {\n    var delta = createDuration(deltaInput);\n\n    if (delta) {\n      // TODO: warning if parsed bad\n      this.mutate({\n        endDelta: delta\n      });\n    }\n  };\n\n  EventApi.prototype.moveDates = function (deltaInput) {\n    var delta = createDuration(deltaInput);\n\n    if (delta) {\n      // TODO: warning if parsed bad\n      this.mutate({\n        datesDelta: delta\n      });\n    }\n  };\n\n  EventApi.prototype.setAllDay = function (allDay, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var standardProps = {\n      allDay: allDay\n    };\n    var maintainDuration = options.maintainDuration;\n\n    if (maintainDuration == null) {\n      maintainDuration = this._calendar.opt('allDayMaintainDuration');\n    }\n\n    if (this._def.allDay !== allDay) {\n      standardProps.hasEnd = maintainDuration;\n    }\n\n    this.mutate({\n      standardProps: standardProps\n    });\n  };\n\n  EventApi.prototype.formatRange = function (formatInput) {\n    var dateEnv = this._calendar.dateEnv;\n    var instance = this._instance;\n    var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n\n    if (this._def.hasEnd) {\n      return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n        forcedStartTzo: instance.forcedStartTzo,\n        forcedEndTzo: instance.forcedEndTzo\n      });\n    } else {\n      return dateEnv.format(instance.range.start, formatter, {\n        forcedTzo: instance.forcedStartTzo\n      });\n    }\n  };\n\n  EventApi.prototype.mutate = function (mutation) {\n    var def = this._def;\n    var instance = this._instance;\n\n    if (instance) {\n      this._calendar.dispatch({\n        type: 'MUTATE_EVENTS',\n        instanceId: instance.instanceId,\n        mutation: mutation,\n        fromApi: true\n      });\n\n      var eventStore = this._calendar.state.eventStore;\n      this._def = eventStore.defs[def.defId];\n      this._instance = eventStore.instances[instance.instanceId];\n    }\n  };\n\n  EventApi.prototype.remove = function () {\n    this._calendar.dispatch({\n      type: 'REMOVE_EVENT_DEF',\n      defId: this._def.defId\n    });\n  };\n\n  Object.defineProperty(EventApi.prototype, \"source\", {\n    get: function get() {\n      var sourceId = this._def.sourceId;\n\n      if (sourceId) {\n        return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n      }\n\n      return null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"start\", {\n    get: function get() {\n      return this._instance ? this._calendar.dateEnv.toDate(this._instance.range.start) : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"end\", {\n    get: function get() {\n      return this._instance && this._def.hasEnd ? this._calendar.dateEnv.toDate(this._instance.range.end) : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"id\", {\n    // computable props that all access the def\n    // TODO: find a TypeScript-compatible way to do this at scale\n    get: function get() {\n      return this._def.publicId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"groupId\", {\n    get: function get() {\n      return this._def.groupId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"allDay\", {\n    get: function get() {\n      return this._def.allDay;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"title\", {\n    get: function get() {\n      return this._def.title;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"url\", {\n    get: function get() {\n      return this._def.url;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"rendering\", {\n    get: function get() {\n      return this._def.rendering;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"startEditable\", {\n    get: function get() {\n      return this._def.ui.startEditable;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n    get: function get() {\n      return this._def.ui.durationEditable;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"constraint\", {\n    get: function get() {\n      return this._def.ui.constraints[0] || null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"overlap\", {\n    get: function get() {\n      return this._def.ui.overlap;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"allow\", {\n    get: function get() {\n      return this._def.ui.allows[0] || null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n    get: function get() {\n      return this._def.ui.backgroundColor;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"borderColor\", {\n    get: function get() {\n      return this._def.ui.borderColor;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"textColor\", {\n    get: function get() {\n      return this._def.ui.textColor;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"classNames\", {\n    // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n    get: function get() {\n      return this._def.ui.classNames;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n    get: function get() {\n      return this._def.extendedProps;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return EventApi;\n}();\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\n\n\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n  var inverseBgByGroupId = {};\n  var inverseBgByDefId = {};\n  var defByGroupId = {};\n  var bgRanges = [];\n  var fgRanges = [];\n  var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n\n  for (var defId in eventStore.defs) {\n    var def = eventStore.defs[defId];\n\n    if (def.rendering === 'inverse-background') {\n      if (def.groupId) {\n        inverseBgByGroupId[def.groupId] = [];\n\n        if (!defByGroupId[def.groupId]) {\n          defByGroupId[def.groupId] = def;\n        }\n      } else {\n        inverseBgByDefId[defId] = [];\n      }\n    }\n  }\n\n  for (var instanceId in eventStore.instances) {\n    var instance = eventStore.instances[instanceId];\n    var def = eventStore.defs[instance.defId];\n    var ui = eventUis[def.defId];\n    var origRange = instance.range;\n    var normalRange = !def.allDay && nextDayThreshold ? computeVisibleDayRange(origRange, nextDayThreshold) : origRange;\n    var slicedRange = intersectRanges(normalRange, framingRange);\n\n    if (slicedRange) {\n      if (def.rendering === 'inverse-background') {\n        if (def.groupId) {\n          inverseBgByGroupId[def.groupId].push(slicedRange);\n        } else {\n          inverseBgByDefId[instance.defId].push(slicedRange);\n        }\n      } else {\n        (def.rendering === 'background' ? bgRanges : fgRanges).push({\n          def: def,\n          ui: ui,\n          instance: instance,\n          range: slicedRange,\n          isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n          isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n        });\n      }\n    }\n  }\n\n  for (var groupId in inverseBgByGroupId) {\n    // BY GROUP\n    var ranges = inverseBgByGroupId[groupId];\n    var invertedRanges = invertRanges(ranges, framingRange);\n\n    for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n      var invertedRange = invertedRanges_1[_i];\n      var def = defByGroupId[groupId];\n      var ui = eventUis[def.defId];\n      bgRanges.push({\n        def: def,\n        ui: ui,\n        instance: null,\n        range: invertedRange,\n        isStart: false,\n        isEnd: false\n      });\n    }\n  }\n\n  for (var defId in inverseBgByDefId) {\n    var ranges = inverseBgByDefId[defId];\n    var invertedRanges = invertRanges(ranges, framingRange);\n\n    for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n      var invertedRange = invertedRanges_2[_a];\n      bgRanges.push({\n        def: eventStore.defs[defId],\n        ui: eventUis[defId],\n        instance: null,\n        range: invertedRange,\n        isStart: false,\n        isEnd: false\n      });\n    }\n  }\n\n  return {\n    bg: bgRanges,\n    fg: fgRanges\n  };\n}\n\nfunction hasBgRendering(def) {\n  return def.rendering === 'background' || def.rendering === 'inverse-background';\n}\n\nfunction filterSegsViaEls(view, segs, isMirror) {\n  if (view.hasPublicHandlers('eventRender')) {\n    segs = segs.filter(function (seg) {\n      var custom = view.publiclyTrigger('eventRender', [{\n        event: new EventApi(view.calendar, seg.eventRange.def, seg.eventRange.instance),\n        isMirror: isMirror,\n        isStart: seg.isStart,\n        isEnd: seg.isEnd,\n        // TODO: include seg.range once all components consistently generate it\n        el: seg.el,\n        view: view\n      }]);\n\n      if (custom === false) {\n        // means don't render at all\n        return false;\n      } else if (custom && custom !== true) {\n        seg.el = custom;\n      }\n\n      return true;\n    });\n  }\n\n  for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n    var seg = segs_1[_i];\n    setElSeg(seg.el, seg);\n  }\n\n  return segs;\n}\n\nfunction setElSeg(el, seg) {\n  el.fcSeg = seg;\n}\n\nfunction getElSeg(el) {\n  return el.fcSeg || null;\n} // event ui computation\n\n\nfunction compileEventUis(eventDefs, eventUiBases) {\n  return mapHash(eventDefs, function (eventDef) {\n    return compileEventUi(eventDef, eventUiBases);\n  });\n}\n\nfunction compileEventUi(eventDef, eventUiBases) {\n  var uis = [];\n\n  if (eventUiBases['']) {\n    uis.push(eventUiBases['']);\n  }\n\n  if (eventUiBases[eventDef.defId]) {\n    uis.push(eventUiBases[eventDef.defId]);\n  }\n\n  uis.push(eventDef.ui);\n  return combineEventUis(uis);\n} // applies the mutation to ALL defs/instances within the event store\n\n\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n  var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n  var dest = createEmptyEventStore();\n\n  for (var defId in eventStore.defs) {\n    var def = eventStore.defs[defId];\n    dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n  }\n\n  for (var instanceId in eventStore.instances) {\n    var instance = eventStore.instances[instanceId];\n    var def = dest.defs[instance.defId]; // important to grab the newly modified def\n\n    dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n  }\n\n  return dest;\n}\n\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n  var standardProps = mutation.standardProps || {}; // if hasEnd has not been specified, guess a good value based on deltas.\n  // if duration will change, there's no way the default duration will persist,\n  // and thus, we need to mark the event as having a real end\n\n  if (standardProps.hasEnd == null && eventConfig.durationEditable && (mutation.startDelta || mutation.endDelta)) {\n    standardProps.hasEnd = true; // TODO: is this mutation okay?\n  }\n\n  var copy = _assign({}, eventDef, standardProps, {\n    ui: _assign({}, eventDef.ui, standardProps.ui)\n  });\n\n  if (mutation.extendedProps) {\n    copy.extendedProps = _assign({}, copy.extendedProps, mutation.extendedProps);\n  }\n\n  for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n    var applier = appliers_1[_i];\n    applier(copy, mutation, calendar);\n  }\n\n  if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n    copy.hasEnd = true;\n  }\n\n  return copy;\n}\n\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, calendar) {\n  var dateEnv = calendar.dateEnv;\n  var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n  var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n\n  var copy = _assign({}, eventInstance);\n\n  if (forceAllDay) {\n    copy.range = computeAlignedDayRange(copy.range);\n  }\n\n  if (mutation.datesDelta && eventConfig.startEditable) {\n    copy.range = {\n      start: dateEnv.add(copy.range.start, mutation.datesDelta),\n      end: dateEnv.add(copy.range.end, mutation.datesDelta)\n    };\n  }\n\n  if (mutation.startDelta && eventConfig.durationEditable) {\n    copy.range = {\n      start: dateEnv.add(copy.range.start, mutation.startDelta),\n      end: copy.range.end\n    };\n  }\n\n  if (mutation.endDelta && eventConfig.durationEditable) {\n    copy.range = {\n      start: copy.range.start,\n      end: dateEnv.add(copy.range.end, mutation.endDelta)\n    };\n  }\n\n  if (clearEnd) {\n    copy.range = {\n      start: copy.range.start,\n      end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n    };\n  } // in case event was all-day but the supplied deltas were not\n  // better util for this?\n\n\n  if (eventDef.allDay) {\n    copy.range = {\n      start: startOfDay(copy.range.start),\n      end: startOfDay(copy.range.end)\n    };\n  } // handle invalid durations\n\n\n  if (copy.range.end < copy.range.start) {\n    copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n  }\n\n  return copy;\n}\n\nfunction reduceEventStore(eventStore, action, eventSources, dateProfile, calendar) {\n  switch (action.type) {\n    case 'RECEIVE_EVENTS':\n      // raw\n      return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n\n    case 'ADD_EVENTS':\n      // already parsed, but not expanded\n      return addEvent(eventStore, action.eventStore, // new ones\n      dateProfile ? dateProfile.activeRange : null, calendar);\n\n    case 'MERGE_EVENTS':\n      // already parsed and expanded\n      return mergeEventStores(eventStore, action.eventStore);\n\n    case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n\n    case 'NEXT':\n    case 'SET_DATE':\n    case 'SET_VIEW_TYPE':\n      if (dateProfile) {\n        return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n      } else {\n        return eventStore;\n      }\n\n    case 'CHANGE_TIMEZONE':\n      return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n\n    case 'MUTATE_EVENTS':\n      return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n\n    case 'REMOVE_EVENT_INSTANCES':\n      return excludeInstances(eventStore, action.instances);\n\n    case 'REMOVE_EVENT_DEF':\n      return filterEventStoreDefs(eventStore, function (eventDef) {\n        return eventDef.defId !== action.defId;\n      });\n\n    case 'REMOVE_EVENT_SOURCE':\n      return excludeEventsBySourceId(eventStore, action.sourceId);\n\n    case 'REMOVE_ALL_EVENT_SOURCES':\n      return filterEventStoreDefs(eventStore, function (eventDef) {\n        return !eventDef.sourceId; // only keep events with no source id\n      });\n\n    case 'REMOVE_ALL_EVENTS':\n      return createEmptyEventStore();\n\n    case 'RESET_EVENTS':\n      return {\n        defs: eventStore.defs,\n        instances: eventStore.instances\n      };\n\n    default:\n      return eventStore;\n  }\n}\n\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n  if (eventSource && // not already removed\n  fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n  ) {\n      var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n\n      if (fetchRange) {\n        subset = expandRecurring(subset, fetchRange, calendar);\n      }\n\n      return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n\n  return eventStore;\n}\n\nfunction addEvent(eventStore, subset, expandRange, calendar) {\n  if (expandRange) {\n    subset = expandRecurring(subset, expandRange, calendar);\n  }\n\n  return mergeEventStores(eventStore, subset);\n}\n\nfunction rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n  var defs = eventStore.defs;\n  var instances = mapHash(eventStore.instances, function (instance) {\n    var def = defs[instance.defId];\n\n    if (def.allDay || def.recurringDef) {\n      return instance; // isn't dependent on timezone\n    } else {\n      return _assign({}, instance, {\n        range: {\n          start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n          end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n        },\n        forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo,\n        forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo\n      });\n    }\n  });\n  return {\n    defs: defs,\n    instances: instances\n  };\n}\n\nfunction applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n  var relevant = getRelevantEvents(eventStore, instanceId);\n  var eventConfigBase = fromApi ? {\n    '': {\n      startEditable: true,\n      durationEditable: true,\n      constraints: [],\n      overlap: null,\n      allows: [],\n      backgroundColor: '',\n      borderColor: '',\n      textColor: '',\n      classNames: []\n    }\n  } : calendar.eventUiBases;\n  relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n  return mergeEventStores(eventStore, relevant);\n}\n\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n  return filterEventStoreDefs(eventStore, function (eventDef) {\n    return eventDef.sourceId !== sourceId;\n  });\n} // QUESTION: why not just return instances? do a general object-property-exclusion util\n\n\nfunction excludeInstances(eventStore, removals) {\n  return {\n    defs: eventStore.defs,\n    instances: filterHash(eventStore.instances, function (instance) {\n      return !removals[instance.instanceId];\n    })\n  };\n} // high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\n\n\nfunction isInteractionValid(interaction, calendar) {\n  return isNewPropsValid({\n    eventDrag: interaction\n  }, calendar); // HACK: the eventDrag props is used for ALL interactions\n}\n\nfunction isDateSelectionValid(dateSelection, calendar) {\n  return isNewPropsValid({\n    dateSelection: dateSelection\n  }, calendar);\n}\n\nfunction isNewPropsValid(newProps, calendar) {\n  var view = calendar.view;\n\n  var props = _assign({\n    businessHours: view ? view.props.businessHours : createEmptyEventStore(),\n    dateSelection: '',\n    eventStore: calendar.state.eventStore,\n    eventUiBases: calendar.eventUiBases,\n    eventSelection: '',\n    eventDrag: null,\n    eventResize: null\n  }, newProps);\n\n  return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n}\n\nfunction isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n  if (dateSpanMeta === void 0) {\n    dateSpanMeta = {};\n  }\n\n  if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n    return false;\n  }\n\n  if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n    return false;\n  }\n\n  return true;\n} // Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\n\n\nfunction isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n  var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n\n  var subjectEventStore = interaction.mutatedEvents;\n  var subjectDefs = subjectEventStore.defs;\n  var subjectInstances = subjectEventStore.instances;\n  var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ? state.eventUiBases : {\n    '': calendar.selectionConfig\n  } // if not a real event, validate as a selection\n  );\n\n  if (filterConfig) {\n    subjectConfigs = mapHash(subjectConfigs, filterConfig);\n  }\n\n  var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n\n  var otherDefs = otherEventStore.defs;\n  var otherInstances = otherEventStore.instances;\n  var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n\n  for (var subjectInstanceId in subjectInstances) {\n    var subjectInstance = subjectInstances[subjectInstanceId];\n    var subjectRange = subjectInstance.range;\n    var subjectConfig = subjectConfigs[subjectInstance.defId];\n    var subjectDef = subjectDefs[subjectInstance.defId]; // constraint\n\n    if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n      return false;\n    } // overlap\n\n\n    var overlapFunc = calendar.opt('eventOverlap');\n\n    if (typeof overlapFunc !== 'function') {\n      overlapFunc = null;\n    }\n\n    for (var otherInstanceId in otherInstances) {\n      var otherInstance = otherInstances[otherInstanceId]; // intersect! evaluate\n\n      if (rangesIntersect(subjectRange, otherInstance.range)) {\n        var otherOverlap = otherConfigs[otherInstance.defId].overlap; // consider the other event's overlap. only do this if the subject event is a \"real\" event\n\n        if (otherOverlap === false && interaction.isEvent) {\n          return false;\n        }\n\n        if (subjectConfig.overlap === false) {\n          return false;\n        }\n\n        if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n        new EventApi(calendar, subjectDef, subjectInstance) // moving event\n        )) {\n          return false;\n        }\n      }\n    } // allow (a function)\n\n\n    var calendarEventStore = calendar.state.eventStore; // need global-to-calendar, not local to component (splittable)state\n\n    for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n      var subjectAllow = _a[_i];\n\n      var subjectDateSpan = _assign({}, dateSpanMeta, {\n        range: subjectInstance.range,\n        allDay: subjectDef.allDay\n      });\n\n      var origDef = calendarEventStore.defs[subjectDef.defId];\n      var origInstance = calendarEventStore.instances[subjectInstanceId];\n      var eventApi = void 0;\n\n      if (origDef) {\n        // was previously in the calendar\n        eventApi = new EventApi(calendar, origDef, origInstance);\n      } else {\n        // was an external event\n        eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n      }\n\n      if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n} // Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\n\n\nfunction isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n  var relevantEventStore = state.eventStore;\n  var relevantDefs = relevantEventStore.defs;\n  var relevantInstances = relevantEventStore.instances;\n  var selection = state.dateSelection;\n  var selectionRange = selection.range;\n  var selectionConfig = calendar.selectionConfig;\n\n  if (filterConfig) {\n    selectionConfig = filterConfig(selectionConfig);\n  } // constraint\n\n\n  if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n    return false;\n  } // overlap\n\n\n  var overlapFunc = calendar.opt('selectOverlap');\n\n  if (typeof overlapFunc !== 'function') {\n    overlapFunc = null;\n  }\n\n  for (var relevantInstanceId in relevantInstances) {\n    var relevantInstance = relevantInstances[relevantInstanceId]; // intersect! evaluate\n\n    if (rangesIntersect(selectionRange, relevantInstance.range)) {\n      if (selectionConfig.overlap === false) {\n        return false;\n      }\n\n      if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n        return false;\n      }\n    }\n  } // allow (a function)\n\n\n  for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n    var selectionAllow = _a[_i];\n\n    var fullDateSpan = _assign({}, dateSpanMeta, selection);\n\n    if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n      return false;\n    }\n  }\n\n  return true;\n} // Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\n\n\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n  for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n    var constraint = constraints_1[_i];\n\n    if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncalendar // for expanding businesshours\n) {\n  if (constraint === 'businessHours') {\n    return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n  } else if (typeof constraint === 'string') {\n    // an group ID\n    return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n      return eventDef.groupId === constraint;\n    }));\n  } else if (typeof constraint === 'object' && constraint) {\n    // non-null object\n    return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n  }\n\n  return []; // if it's false\n} // TODO: move to event-store file?\n\n\nfunction eventStoreToRanges(eventStore) {\n  var instances = eventStore.instances;\n  var ranges = [];\n\n  for (var instanceId in instances) {\n    ranges.push(instances[instanceId].range);\n  }\n\n  return ranges;\n} // TODO: move to geom file?\n\n\nfunction anyRangesContainRange(outerRanges, innerRange) {\n  for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n    var outerRange = outerRanges_1[_i];\n\n    if (rangeContainsRange(outerRange, innerRange)) {\n      return true;\n    }\n  }\n\n  return false;\n} // Parsing\n// ------------------------------------------------------------------------------------------------------------------------\n\n\nfunction normalizeConstraint(input, calendar) {\n  if (Array.isArray(input)) {\n    return parseEvents(input, '', calendar, true); // allowOpenRange=true\n  } else if (typeof input === 'object' && input) {\n    // non-null object\n    return parseEvents([input], '', calendar, true); // allowOpenRange=true\n  } else if (input != null) {\n    return String(input);\n  } else {\n    return null;\n  }\n}\n\nfunction htmlEscape(s) {\n  return (s + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&#039;').replace(/\"/g, '&quot;').replace(/\\n/g, '<br />');\n} // Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\n\n\nfunction cssToStr(cssProps) {\n  var statements = [];\n\n  for (var name_1 in cssProps) {\n    var val = cssProps[name_1];\n\n    if (val != null && val !== '') {\n      statements.push(name_1 + ':' + val);\n    }\n  }\n\n  return statements.join(';');\n} // Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\n\n\nfunction attrsToStr(attrs) {\n  var parts = [];\n\n  for (var name_2 in attrs) {\n    var val = attrs[name_2];\n\n    if (val != null) {\n      parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n    }\n  }\n\n  return parts.join(' ');\n}\n\nfunction parseClassName(raw) {\n  if (Array.isArray(raw)) {\n    return raw;\n  } else if (typeof raw === 'string') {\n    return raw.split(/\\s+/);\n  } else {\n    return [];\n  }\n}\n\nvar UNSCOPED_EVENT_UI_PROPS = {\n  editable: Boolean,\n  startEditable: Boolean,\n  durationEditable: Boolean,\n  constraint: null,\n  overlap: null,\n  allow: null,\n  className: parseClassName,\n  classNames: parseClassName,\n  color: String,\n  backgroundColor: String,\n  borderColor: String,\n  textColor: String\n};\n\nfunction processUnscopedUiProps(rawProps, calendar, leftovers) {\n  var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n  var constraint = normalizeConstraint(props.constraint, calendar);\n  return {\n    startEditable: props.startEditable != null ? props.startEditable : props.editable,\n    durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n    constraints: constraint != null ? [constraint] : [],\n    overlap: props.overlap,\n    allows: props.allow != null ? [props.allow] : [],\n    backgroundColor: props.backgroundColor || props.color,\n    borderColor: props.borderColor || props.color,\n    textColor: props.textColor,\n    classNames: props.classNames.concat(props.className)\n  };\n}\n\nfunction processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n  var rawUnscoped = {};\n  var wasFound = {};\n\n  for (var key in UNSCOPED_EVENT_UI_PROPS) {\n    var scopedKey = prefix + capitaliseFirstLetter(key);\n    rawUnscoped[key] = rawScoped[scopedKey];\n    wasFound[scopedKey] = true;\n  }\n\n  if (prefix === 'event') {\n    rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n  }\n\n  if (leftovers) {\n    for (var key in rawScoped) {\n      if (!wasFound[key]) {\n        leftovers[key] = rawScoped[key];\n      }\n    }\n  }\n\n  return processUnscopedUiProps(rawUnscoped, calendar);\n}\n\nvar EMPTY_EVENT_UI = {\n  startEditable: null,\n  durationEditable: null,\n  constraints: [],\n  overlap: null,\n  allows: [],\n  backgroundColor: '',\n  borderColor: '',\n  textColor: '',\n  classNames: []\n}; // prevent against problems with <2 args!\n\nfunction combineEventUis(uis) {\n  return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\n\nfunction combineTwoEventUis(item0, item1) {\n  return {\n    startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n    durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n    constraints: item0.constraints.concat(item1.constraints),\n    overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n    allows: item0.allows.concat(item1.allows),\n    backgroundColor: item1.backgroundColor || item0.backgroundColor,\n    borderColor: item1.borderColor || item0.borderColor,\n    textColor: item1.textColor || item0.textColor,\n    classNames: item0.classNames.concat(item1.classNames)\n  };\n}\n\nvar NON_DATE_PROPS = {\n  id: String,\n  groupId: String,\n  title: String,\n  url: String,\n  rendering: String,\n  extendedProps: null\n};\nvar DATE_PROPS = {\n  start: null,\n  date: null,\n  end: null,\n  allDay: null\n};\nvar uid = 0;\n\nfunction parseEvent(raw, sourceId, calendar, allowOpenRange) {\n  var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n  var leftovers0 = {};\n  var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n  allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n  );\n\n  if (recurringRes) {\n    var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n    def.recurringDef = {\n      typeId: recurringRes.typeId,\n      typeData: recurringRes.typeData,\n      duration: recurringRes.duration\n    };\n    return {\n      def: def,\n      instance: null\n    };\n  } else {\n    var leftovers1 = {};\n    var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n\n    if (singleRes) {\n      var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n      var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n      return {\n        def: def,\n        instance: instance\n      };\n    }\n  }\n\n  return null;\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\nThe EventNonDateInput has been normalized (id => publicId, etc).\n*/\n\n\nfunction parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n  var leftovers = {};\n  var def = pluckNonDateProps(raw, calendar, leftovers);\n  def.defId = String(uid++);\n  def.sourceId = sourceId;\n  def.allDay = allDay;\n  def.hasEnd = hasEnd;\n\n  for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n    var eventDefParser = _a[_i];\n    var newLeftovers = {};\n    eventDefParser(def, leftovers, newLeftovers);\n    leftovers = newLeftovers;\n  }\n\n  def.extendedProps = _assign(leftovers, def.extendedProps || {}); // help out EventApi from having user modify props\n\n  Object.freeze(def.ui.classNames);\n  Object.freeze(def.extendedProps);\n  return def;\n}\n\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n  return {\n    instanceId: String(uid++),\n    defId: defId,\n    range: range,\n    forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n    forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n  };\n}\n\nfunction parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n  var props = pluckDateProps(raw, leftovers);\n  var allDay = props.allDay;\n  var startMeta;\n  var startMarker = null;\n  var hasEnd = false;\n  var endMeta;\n  var endMarker = null;\n  startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n\n  if (startMeta) {\n    startMarker = startMeta.marker;\n  } else if (!allowOpenRange) {\n    return null;\n  }\n\n  if (props.end != null) {\n    endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n  }\n\n  if (allDay == null) {\n    if (allDayDefault != null) {\n      allDay = allDayDefault;\n    } else {\n      // fall back to the date props LAST\n      allDay = (!startMeta || startMeta.isTimeUnspecified) && (!endMeta || endMeta.isTimeUnspecified);\n    }\n  }\n\n  if (allDay && startMarker) {\n    startMarker = startOfDay(startMarker);\n  }\n\n  if (endMeta) {\n    endMarker = endMeta.marker;\n\n    if (allDay) {\n      endMarker = startOfDay(endMarker);\n    }\n\n    if (startMarker && endMarker <= startMarker) {\n      endMarker = null;\n    }\n  }\n\n  if (endMarker) {\n    hasEnd = true;\n  } else if (!allowOpenRange) {\n    hasEnd = calendar.opt('forceEventDuration') || false;\n    endMarker = calendar.dateEnv.add(startMarker, allDay ? calendar.defaultAllDayEventDuration : calendar.defaultTimedEventDuration);\n  }\n\n  return {\n    allDay: allDay,\n    hasEnd: hasEnd,\n    range: {\n      start: startMarker,\n      end: endMarker\n    },\n    forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n    forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n  };\n}\n\nfunction pluckDateProps(raw, leftovers) {\n  var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n  props.start = props.start !== null ? props.start : props.date;\n  delete props.date;\n  return props;\n}\n\nfunction pluckNonDateProps(raw, calendar, leftovers) {\n  var preLeftovers = {};\n  var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n  var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n  props.publicId = props.id;\n  delete props.id;\n  props.ui = ui;\n  return props;\n}\n\nfunction computeIsAllDayDefault(sourceId, calendar) {\n  var res = null;\n\n  if (sourceId) {\n    var source = calendar.state.eventSources[sourceId];\n    res = source.allDayDefault;\n  }\n\n  if (res == null) {\n    res = calendar.opt('allDayDefault');\n  }\n\n  return res;\n}\n\nvar DEF_DEFAULTS = {\n  startTime: '09:00',\n  endTime: '17:00',\n  daysOfWeek: [1, 2, 3, 4, 5],\n  rendering: 'inverse-background',\n  classNames: 'fc-nonbusiness',\n  groupId: '_businessHours' // so multiple defs get grouped\n\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\n\nfunction parseBusinessHours(input, calendar) {\n  return parseEvents(refineInputs(input), '', calendar);\n}\n\nfunction refineInputs(input) {\n  var rawDefs;\n\n  if (input === true) {\n    rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n  } else if (Array.isArray(input)) {\n    // if specifying an array, every sub-definition NEEDS a day-of-week\n    rawDefs = input.filter(function (rawDef) {\n      return rawDef.daysOfWeek;\n    });\n  } else if (typeof input === 'object' && input) {\n    // non-null object\n    rawDefs = [input];\n  } else {\n    // is probably false\n    rawDefs = [];\n  }\n\n  rawDefs = rawDefs.map(function (rawDef) {\n    return _assign({}, DEF_DEFAULTS, rawDef);\n  });\n  return rawDefs;\n}\n\nfunction memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n  if (dependencies === void 0) {\n    dependencies = [];\n  }\n\n  var dependents = [];\n  var thisContext;\n  var prevArgs;\n\n  function unrender() {\n    if (prevArgs) {\n      for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n        var dependent = dependents_1[_i];\n        dependent.unrender();\n      }\n\n      if (unrenderFunc) {\n        unrenderFunc.apply(thisContext, prevArgs);\n      }\n\n      prevArgs = null;\n    }\n  }\n\n  function res() {\n    if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n      unrender();\n      thisContext = this;\n      prevArgs = arguments;\n      renderFunc.apply(this, arguments);\n    }\n  }\n\n  res.dependents = dependents;\n  res.unrender = unrender;\n\n  for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n    var dependency = dependencies_1[_i];\n    dependency.dependents.push(res);\n  }\n\n  return res;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\n\nvar Splitter =\n/** @class */\nfunction () {\n  function Splitter() {\n    this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n    this.splitDateSelection = memoize(this._splitDateSpan);\n    this.splitEventStore = memoize(this._splitEventStore);\n    this.splitIndividualUi = memoize(this._splitIndividualUi);\n    this.splitEventDrag = memoize(this._splitInteraction);\n    this.splitEventResize = memoize(this._splitInteraction);\n    this.eventUiBuilders = {}; // TODO: typescript protection\n  }\n\n  Splitter.prototype.splitProps = function (props) {\n    var _this = this;\n\n    var keyInfos = this.getKeyInfo(props);\n    var defKeys = this.getKeysForEventDefs(props.eventStore);\n    var dateSelections = this.splitDateSelection(props.dateSelection);\n    var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n\n    var eventStores = this.splitEventStore(props.eventStore, defKeys);\n    var eventDrags = this.splitEventDrag(props.eventDrag);\n    var eventResizes = this.splitEventResize(props.eventResize);\n    var splitProps = {};\n    this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n      return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n    });\n\n    for (var key in keyInfos) {\n      var keyInfo = keyInfos[key];\n      var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n      var buildEventUi = this.eventUiBuilders[key];\n      splitProps[key] = {\n        businessHours: keyInfo.businessHours || props.businessHours,\n        dateSelection: dateSelections[key] || null,\n        eventStore: eventStore,\n        eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n        eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n        eventDrag: eventDrags[key] || null,\n        eventResize: eventResizes[key] || null\n      };\n    }\n\n    return splitProps;\n  };\n\n  Splitter.prototype._splitDateSpan = function (dateSpan) {\n    var dateSpans = {};\n\n    if (dateSpan) {\n      var keys = this.getKeysForDateSpan(dateSpan);\n\n      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        dateSpans[key] = dateSpan;\n      }\n    }\n\n    return dateSpans;\n  };\n\n  Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n    var _this = this;\n\n    return mapHash(eventStore.defs, function (eventDef) {\n      return _this.getKeysForEventDef(eventDef);\n    });\n  };\n\n  Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n    var defs = eventStore.defs,\n        instances = eventStore.instances;\n    var splitStores = {};\n\n    for (var defId in defs) {\n      for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n        var key = _a[_i];\n\n        if (!splitStores[key]) {\n          splitStores[key] = createEmptyEventStore();\n        }\n\n        splitStores[key].defs[defId] = defs[defId];\n      }\n    }\n\n    for (var instanceId in instances) {\n      var instance = instances[instanceId];\n\n      for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n        var key = _c[_b];\n\n        if (splitStores[key]) {\n          // must have already been created\n          splitStores[key].instances[instanceId] = instance;\n        }\n      }\n    }\n\n    return splitStores;\n  };\n\n  Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n    var splitHashes = {};\n\n    for (var defId in eventUiBases) {\n      if (defId) {\n        // not the '' key\n        for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n          var key = _a[_i];\n\n          if (!splitHashes[key]) {\n            splitHashes[key] = {};\n          }\n\n          splitHashes[key][defId] = eventUiBases[defId];\n        }\n      }\n    }\n\n    return splitHashes;\n  };\n\n  Splitter.prototype._splitInteraction = function (interaction) {\n    var splitStates = {};\n\n    if (interaction) {\n      var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n      ); // can't rely on defKeys because event data is mutated\n\n\n      var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n\n      var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n\n      var populate = function populate(key) {\n        if (!splitStates[key]) {\n          splitStates[key] = {\n            affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n            mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n            isEvent: interaction.isEvent,\n            origSeg: interaction.origSeg\n          };\n        }\n      };\n\n      for (var key in affectedStores_1) {\n        populate(key);\n      }\n\n      for (var key in mutatedStores_1) {\n        populate(key);\n      }\n    }\n\n    return splitStates;\n  };\n\n  return Splitter;\n}();\n\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n  var baseParts = [];\n\n  if (allUi) {\n    baseParts.push(allUi);\n  }\n\n  if (eventUiForKey) {\n    baseParts.push(eventUiForKey);\n  }\n\n  var stuff = {\n    '': combineEventUis(baseParts)\n  };\n\n  if (individualUi) {\n    _assign(stuff, individualUi);\n  }\n\n  return stuff;\n} // Generates HTML for an anchor to another view into the calendar.\n// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n// `gotoOptions` can either be a DateMarker, or an object with the form:\n// { date, type, forceOff }\n// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\n\n\nfunction buildGotoAnchorHtml(component, gotoOptions, attrs, innerHtml) {\n  var dateEnv = component.dateEnv;\n  var date;\n  var type;\n  var forceOff;\n  var finalOptions;\n\n  if (gotoOptions instanceof Date) {\n    date = gotoOptions; // a single date-like input\n  } else {\n    date = gotoOptions.date;\n    type = gotoOptions.type;\n    forceOff = gotoOptions.forceOff;\n  }\n\n  finalOptions = {\n    date: dateEnv.formatIso(date, {\n      omitTime: true\n    }),\n    type: type || 'day'\n  };\n\n  if (typeof attrs === 'string') {\n    innerHtml = attrs;\n    attrs = null;\n  }\n\n  attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n\n  innerHtml = innerHtml || '';\n\n  if (!forceOff && component.opt('navLinks')) {\n    return '<a' + attrs + ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' + innerHtml + '</a>';\n  } else {\n    return '<span' + attrs + '>' + innerHtml + '</span>';\n  }\n}\n\nfunction getAllDayHtml(component) {\n  return component.opt('allDayHtml') || htmlEscape(component.opt('allDayText'));\n} // Computes HTML classNames for a single-day element\n\n\nfunction getDayClasses(date, dateProfile, context, noThemeHighlight) {\n  var calendar = context.calendar,\n      view = context.view,\n      theme = context.theme,\n      dateEnv = context.dateEnv;\n  var classes = [];\n  var todayStart;\n  var todayEnd;\n\n  if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n    classes.push('fc-disabled-day');\n  } else {\n    classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n\n    if (view.opt('monthMode') && dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n      classes.push('fc-other-month');\n    }\n\n    todayStart = startOfDay(calendar.getNow());\n    todayEnd = addDays(todayStart, 1);\n\n    if (date < todayStart) {\n      classes.push('fc-past');\n    } else if (date >= todayEnd) {\n      classes.push('fc-future');\n    } else {\n      classes.push('fc-today');\n\n      if (noThemeHighlight !== true) {\n        classes.push(theme.getClass('today'));\n      }\n    }\n  }\n\n  return classes;\n} // given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\n\n\nfunction unpromisify(func, success, failure) {\n  // guard against success/failure callbacks being called more than once\n  // and guard against a promise AND callback being used together.\n  var isResolved = false;\n\n  var wrappedSuccess = function wrappedSuccess() {\n    if (!isResolved) {\n      isResolved = true;\n      success.apply(this, arguments);\n    }\n  };\n\n  var wrappedFailure = function wrappedFailure() {\n    if (!isResolved) {\n      isResolved = true;\n\n      if (failure) {\n        failure.apply(this, arguments);\n      }\n    }\n  };\n\n  var res = func(wrappedSuccess, wrappedFailure);\n\n  if (res && typeof res.then === 'function') {\n    res.then(wrappedSuccess, wrappedFailure);\n  }\n}\n\nvar Mixin =\n/** @class */\nfunction () {\n  function Mixin() {} // mix into a CLASS\n\n\n  Mixin.mixInto = function (destClass) {\n    this.mixIntoObj(destClass.prototype);\n  }; // mix into ANY object\n\n\n  Mixin.mixIntoObj = function (destObj) {\n    var _this = this;\n\n    Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n      if (!destObj[name]) {\n        // if destination doesn't already define it\n        destObj[name] = _this.prototype[name];\n      }\n    });\n  };\n  /*\n  will override existing methods\n  TODO: remove! not used anymore\n  */\n\n\n  Mixin.mixOver = function (destClass) {\n    var _this = this;\n\n    Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n      destClass.prototype[name] = _this.prototype[name];\n    });\n  };\n\n  return Mixin;\n}();\n/*\nUSAGE:\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\nin class:\n  on: EmitterInterface['on']\n  one: EmitterInterface['one']\n  off: EmitterInterface['off']\n  trigger: EmitterInterface['trigger']\n  triggerWith: EmitterInterface['triggerWith']\n  hasHandlers: EmitterInterface['hasHandlers']\nafter class:\n  EmitterMixin.mixInto(TheClass)\n*/\n\n\nvar EmitterMixin =\n/** @class */\nfunction (_super) {\n  __extends(EmitterMixin, _super);\n\n  function EmitterMixin() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  EmitterMixin.prototype.on = function (type, handler) {\n    addToHash(this._handlers || (this._handlers = {}), type, handler);\n    return this; // for chaining\n  }; // todo: add comments\n\n\n  EmitterMixin.prototype.one = function (type, handler) {\n    addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n    return this; // for chaining\n  };\n\n  EmitterMixin.prototype.off = function (type, handler) {\n    if (this._handlers) {\n      removeFromHash(this._handlers, type, handler);\n    }\n\n    if (this._oneHandlers) {\n      removeFromHash(this._oneHandlers, type, handler);\n    }\n\n    return this; // for chaining\n  };\n\n  EmitterMixin.prototype.trigger = function (type) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    this.triggerWith(type, this, args);\n    return this; // for chaining\n  };\n\n  EmitterMixin.prototype.triggerWith = function (type, context, args) {\n    if (this._handlers) {\n      applyAll(this._handlers[type], context, args);\n    }\n\n    if (this._oneHandlers) {\n      applyAll(this._oneHandlers[type], context, args);\n      delete this._oneHandlers[type]; // will never fire again\n    }\n\n    return this; // for chaining\n  };\n\n  EmitterMixin.prototype.hasHandlers = function (type) {\n    return this._handlers && this._handlers[type] && this._handlers[type].length || this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length;\n  };\n\n  return EmitterMixin;\n}(Mixin);\n\nfunction addToHash(hash, type, handler) {\n  (hash[type] || (hash[type] = [])).push(handler);\n}\n\nfunction removeFromHash(hash, type, handler) {\n  if (handler) {\n    if (hash[type]) {\n      hash[type] = hash[type].filter(function (func) {\n        return func !== handler;\n      });\n    }\n  } else {\n    delete hash[type]; // remove all handler funcs for this type\n  }\n}\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\n\n\nvar PositionCache =\n/** @class */\nfunction () {\n  function PositionCache(originEl, els, isHorizontal, isVertical) {\n    this.originEl = originEl;\n    this.els = els;\n    this.isHorizontal = isHorizontal;\n    this.isVertical = isVertical;\n  } // Queries the els for coordinates and stores them.\n  // Call this method before using and of the get* methods below.\n\n\n  PositionCache.prototype.build = function () {\n    var originEl = this.originEl;\n    var originClientRect = this.originClientRect = originEl.getBoundingClientRect(); // relative to viewport top-left\n\n    if (this.isHorizontal) {\n      this.buildElHorizontals(originClientRect.left);\n    }\n\n    if (this.isVertical) {\n      this.buildElVerticals(originClientRect.top);\n    }\n  }; // Populates the left/right internal coordinate arrays\n\n\n  PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n    var lefts = [];\n    var rights = [];\n\n    for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n      var el = _a[_i];\n      var rect = el.getBoundingClientRect();\n      lefts.push(rect.left - originClientLeft);\n      rights.push(rect.right - originClientLeft);\n    }\n\n    this.lefts = lefts;\n    this.rights = rights;\n  }; // Populates the top/bottom internal coordinate arrays\n\n\n  PositionCache.prototype.buildElVerticals = function (originClientTop) {\n    var tops = [];\n    var bottoms = [];\n\n    for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n      var el = _a[_i];\n      var rect = el.getBoundingClientRect();\n      tops.push(rect.top - originClientTop);\n      bottoms.push(rect.bottom - originClientTop);\n    }\n\n    this.tops = tops;\n    this.bottoms = bottoms;\n  }; // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n  // If no intersection is made, returns undefined.\n\n\n  PositionCache.prototype.leftToIndex = function (leftPosition) {\n    var lefts = this.lefts;\n    var rights = this.rights;\n    var len = lefts.length;\n    var i;\n\n    for (i = 0; i < len; i++) {\n      if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n        return i;\n      }\n    }\n  }; // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n  // If no intersection is made, returns undefined.\n\n\n  PositionCache.prototype.topToIndex = function (topPosition) {\n    var tops = this.tops;\n    var bottoms = this.bottoms;\n    var len = tops.length;\n    var i;\n\n    for (i = 0; i < len; i++) {\n      if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n        return i;\n      }\n    }\n  }; // Gets the width of the element at the given index\n\n\n  PositionCache.prototype.getWidth = function (leftIndex) {\n    return this.rights[leftIndex] - this.lefts[leftIndex];\n  }; // Gets the height of the element at the given index\n\n\n  PositionCache.prototype.getHeight = function (topIndex) {\n    return this.bottoms[topIndex] - this.tops[topIndex];\n  };\n\n  return PositionCache;\n}();\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\n\n\nvar ScrollController =\n/** @class */\nfunction () {\n  function ScrollController() {}\n\n  ScrollController.prototype.getMaxScrollTop = function () {\n    return this.getScrollHeight() - this.getClientHeight();\n  };\n\n  ScrollController.prototype.getMaxScrollLeft = function () {\n    return this.getScrollWidth() - this.getClientWidth();\n  };\n\n  ScrollController.prototype.canScrollVertically = function () {\n    return this.getMaxScrollTop() > 0;\n  };\n\n  ScrollController.prototype.canScrollHorizontally = function () {\n    return this.getMaxScrollLeft() > 0;\n  };\n\n  ScrollController.prototype.canScrollUp = function () {\n    return this.getScrollTop() > 0;\n  };\n\n  ScrollController.prototype.canScrollDown = function () {\n    return this.getScrollTop() < this.getMaxScrollTop();\n  };\n\n  ScrollController.prototype.canScrollLeft = function () {\n    return this.getScrollLeft() > 0;\n  };\n\n  ScrollController.prototype.canScrollRight = function () {\n    return this.getScrollLeft() < this.getMaxScrollLeft();\n  };\n\n  return ScrollController;\n}();\n\nvar ElementScrollController =\n/** @class */\nfunction (_super) {\n  __extends(ElementScrollController, _super);\n\n  function ElementScrollController(el) {\n    var _this = _super.call(this) || this;\n\n    _this.el = el;\n    return _this;\n  }\n\n  ElementScrollController.prototype.getScrollTop = function () {\n    return this.el.scrollTop;\n  };\n\n  ElementScrollController.prototype.getScrollLeft = function () {\n    return this.el.scrollLeft;\n  };\n\n  ElementScrollController.prototype.setScrollTop = function (top) {\n    this.el.scrollTop = top;\n  };\n\n  ElementScrollController.prototype.setScrollLeft = function (left) {\n    this.el.scrollLeft = left;\n  };\n\n  ElementScrollController.prototype.getScrollWidth = function () {\n    return this.el.scrollWidth;\n  };\n\n  ElementScrollController.prototype.getScrollHeight = function () {\n    return this.el.scrollHeight;\n  };\n\n  ElementScrollController.prototype.getClientHeight = function () {\n    return this.el.clientHeight;\n  };\n\n  ElementScrollController.prototype.getClientWidth = function () {\n    return this.el.clientWidth;\n  };\n\n  return ElementScrollController;\n}(ScrollController);\n\nvar WindowScrollController =\n/** @class */\nfunction (_super) {\n  __extends(WindowScrollController, _super);\n\n  function WindowScrollController() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  WindowScrollController.prototype.getScrollTop = function () {\n    return window.pageYOffset;\n  };\n\n  WindowScrollController.prototype.getScrollLeft = function () {\n    return window.pageXOffset;\n  };\n\n  WindowScrollController.prototype.setScrollTop = function (n) {\n    window.scroll(window.pageXOffset, n);\n  };\n\n  WindowScrollController.prototype.setScrollLeft = function (n) {\n    window.scroll(n, window.pageYOffset);\n  };\n\n  WindowScrollController.prototype.getScrollWidth = function () {\n    return document.documentElement.scrollWidth;\n  };\n\n  WindowScrollController.prototype.getScrollHeight = function () {\n    return document.documentElement.scrollHeight;\n  };\n\n  WindowScrollController.prototype.getClientHeight = function () {\n    return document.documentElement.clientHeight;\n  };\n\n  WindowScrollController.prototype.getClientWidth = function () {\n    return document.documentElement.clientWidth;\n  };\n\n  return WindowScrollController;\n}(ScrollController);\n/*\nEmbodies a div that has potential scrollbars\n*/\n\n\nvar ScrollComponent =\n/** @class */\nfunction (_super) {\n  __extends(ScrollComponent, _super);\n\n  function ScrollComponent(overflowX, overflowY) {\n    var _this = _super.call(this, createElement('div', {\n      className: 'fc-scroller'\n    })) || this;\n\n    _this.overflowX = overflowX;\n    _this.overflowY = overflowY;\n\n    _this.applyOverflow();\n\n    return _this;\n  } // sets to natural height, unlocks overflow\n\n\n  ScrollComponent.prototype.clear = function () {\n    this.setHeight('auto');\n    this.applyOverflow();\n  };\n\n  ScrollComponent.prototype.destroy = function () {\n    removeElement(this.el);\n  }; // Overflow\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  ScrollComponent.prototype.applyOverflow = function () {\n    applyStyle(this.el, {\n      overflowX: this.overflowX,\n      overflowY: this.overflowY\n    });\n  }; // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n  // Useful for preserving scrollbar widths regardless of future resizes.\n  // Can pass in scrollbarWidths for optimization.\n\n\n  ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n    var overflowX = this.overflowX;\n    var overflowY = this.overflowY;\n    scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n\n    if (overflowX === 'auto') {\n      overflowX = scrollbarWidths.bottom || // horizontal scrollbars?\n      this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n      ? 'scroll' : 'hidden';\n    }\n\n    if (overflowY === 'auto') {\n      overflowY = scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n      this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n      ? 'scroll' : 'hidden';\n    }\n\n    applyStyle(this.el, {\n      overflowX: overflowX,\n      overflowY: overflowY\n    });\n  };\n\n  ScrollComponent.prototype.setHeight = function (height) {\n    applyStyleProp(this.el, 'height', height);\n  };\n\n  ScrollComponent.prototype.getScrollbarWidths = function () {\n    var edges = computeEdges(this.el);\n    return {\n      left: edges.scrollbarLeft,\n      right: edges.scrollbarRight,\n      bottom: edges.scrollbarBottom\n    };\n  };\n\n  return ScrollComponent;\n}(ElementScrollController);\n\nvar Theme =\n/** @class */\nfunction () {\n  function Theme(calendarOptions) {\n    this.calendarOptions = calendarOptions;\n    this.processIconOverride();\n  }\n\n  Theme.prototype.processIconOverride = function () {\n    if (this.iconOverrideOption) {\n      this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n    }\n  };\n\n  Theme.prototype.setIconOverride = function (iconOverrideHash) {\n    var iconClassesCopy;\n    var buttonName;\n\n    if (typeof iconOverrideHash === 'object' && iconOverrideHash) {\n      // non-null object\n      iconClassesCopy = _assign({}, this.iconClasses);\n\n      for (buttonName in iconOverrideHash) {\n        iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n      }\n\n      this.iconClasses = iconClassesCopy;\n    } else if (iconOverrideHash === false) {\n      this.iconClasses = {};\n    }\n  };\n\n  Theme.prototype.applyIconOverridePrefix = function (className) {\n    var prefix = this.iconOverridePrefix;\n\n    if (prefix && className.indexOf(prefix) !== 0) {\n      // if not already present\n      className = prefix + className;\n    }\n\n    return className;\n  };\n\n  Theme.prototype.getClass = function (key) {\n    return this.classes[key] || '';\n  };\n\n  Theme.prototype.getIconClass = function (buttonName) {\n    var className = this.iconClasses[buttonName];\n\n    if (className) {\n      return this.baseIconClass + ' ' + className;\n    }\n\n    return '';\n  };\n\n  Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n    var className;\n\n    if (this.iconOverrideCustomButtonOption) {\n      className = customButtonProps[this.iconOverrideCustomButtonOption];\n\n      if (className) {\n        return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n      }\n    }\n\n    return '';\n  };\n\n  return Theme;\n}();\n\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\nvar guid = 0;\n\nvar Component =\n/** @class */\nfunction () {\n  function Component(context, isView) {\n    // HACK to populate view at top of component instantiation call chain\n    if (isView) {\n      context.view = this;\n    }\n\n    this.uid = String(guid++);\n    this.context = context;\n    this.dateEnv = context.dateEnv;\n    this.theme = context.theme;\n    this.view = context.view;\n    this.calendar = context.calendar;\n    this.isRtl = this.opt('dir') === 'rtl';\n  }\n\n  Component.addEqualityFuncs = function (newFuncs) {\n    this.prototype.equalityFuncs = _assign({}, this.prototype.equalityFuncs, newFuncs);\n  };\n\n  Component.prototype.opt = function (name) {\n    return this.context.options[name];\n  };\n\n  Component.prototype.receiveProps = function (props) {\n    var _a = recycleProps(this.props || {}, props, this.equalityFuncs),\n        anyChanges = _a.anyChanges,\n        comboProps = _a.comboProps;\n\n    this.props = comboProps;\n\n    if (anyChanges) {\n      this.render(comboProps);\n    }\n  };\n\n  Component.prototype.render = function (props) {}; // after destroy is called, this component won't ever be used again\n\n\n  Component.prototype.destroy = function () {};\n\n  return Component;\n}();\n\nComponent.prototype.equalityFuncs = {};\n/*\nReuses old values when equal. If anything is unequal, returns newProps as-is.\nGreat for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n*/\n\nfunction recycleProps(oldProps, newProps, equalityFuncs) {\n  var comboProps = {}; // some old, some new\n\n  var anyChanges = false;\n\n  for (var key in newProps) {\n    if (key in oldProps && (oldProps[key] === newProps[key] || equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key]))) {\n      // equal to old? use old prop\n      comboProps[key] = oldProps[key];\n    } else {\n      comboProps[key] = newProps[key];\n      anyChanges = true;\n    }\n  }\n\n  for (var key in oldProps) {\n    if (!(key in newProps)) {\n      anyChanges = true;\n      break;\n    }\n  }\n\n  return {\n    anyChanges: anyChanges,\n    comboProps: comboProps\n  };\n}\n/*\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\n\n\nvar DateComponent =\n/** @class */\nfunction (_super) {\n  __extends(DateComponent, _super);\n\n  function DateComponent(context, el, isView) {\n    var _this = _super.call(this, context, isView) || this;\n\n    _this.el = el;\n    return _this;\n  }\n\n  DateComponent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    removeElement(this.el);\n  }; // TODO: WHAT ABOUT (sourceSeg && sourceSeg.component.doesDragMirror)\n  //\n  // Event Drag-n-Drop Rendering (for both events and external elements)\n  // ---------------------------------------------------------------------------------------------------------------\n\n  /*\n  renderEventDragSegs(state: EventSegUiInteractionState) {\n    if (state) {\n      let { isEvent, segs, sourceSeg } = state\n         if (this.eventRenderer) {\n        this.eventRenderer.hideByHash(state.affectedInstances)\n      }\n         // if the user is dragging something that is considered an event with real event data,\n      // and this component likes to do drag mirrors OR the component where the seg came from\n      // likes to do drag mirrors, then render a drag mirror.\n      if (isEvent && (this.doesDragMirror || sourceSeg && sourceSeg.component.doesDragMirror)) {\n        if (this.mirrorRenderer) {\n          this.mirrorRenderer.renderSegs(segs, { isDragging: true, sourceSeg })\n        }\n      }\n         // if it would be impossible to render a drag mirror OR this component likes to render\n      // highlights, then render a highlight.\n      if (!isEvent || this.doesDragHighlight) {\n        if (this.fillRenderer) {\n          this.fillRenderer.renderSegs('highlight', segs)\n        }\n      }\n    }\n  }\n  */\n  // Hit System\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  DateComponent.prototype.buildPositionCaches = function () {};\n\n  DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n    return null; // this should be abstract\n  }; // Validation\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  DateComponent.prototype.isInteractionValid = function (interaction) {\n    var calendar = this.calendar;\n    var dateProfile = this.props.dateProfile; // HACK\n\n    var instances = interaction.mutatedEvents.instances;\n\n    if (dateProfile) {\n      // HACK for DayTile\n      for (var instanceId in instances) {\n        if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n          return false;\n        }\n      }\n    }\n\n    return isInteractionValid(interaction, calendar);\n  };\n\n  DateComponent.prototype.isDateSelectionValid = function (selection) {\n    var dateProfile = this.props.dateProfile; // HACK\n\n    if (dateProfile && // HACK for DayTile\n    !rangeContainsRange(dateProfile.validRange, selection.range)) {\n      return false;\n    }\n\n    return isDateSelectionValid(selection, this.calendar);\n  }; // Triggering\n  // -----------------------------------------------------------------------------------------------------------------\n  // TODO: move to Calendar\n\n\n  DateComponent.prototype.publiclyTrigger = function (name, args) {\n    var calendar = this.calendar;\n    return calendar.publiclyTrigger(name, args);\n  };\n\n  DateComponent.prototype.publiclyTriggerAfterSizing = function (name, args) {\n    var calendar = this.calendar;\n    return calendar.publiclyTriggerAfterSizing(name, args);\n  };\n\n  DateComponent.prototype.hasPublicHandlers = function (name) {\n    var calendar = this.calendar;\n    return calendar.hasPublicHandlers(name);\n  };\n\n  DateComponent.prototype.triggerRenderedSegs = function (segs, isMirrors) {\n    var calendar = this.calendar;\n\n    if (this.hasPublicHandlers('eventPositioned')) {\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        this.publiclyTriggerAfterSizing('eventPositioned', [{\n          event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n          isMirror: isMirrors,\n          isStart: seg.isStart,\n          isEnd: seg.isEnd,\n          el: seg.el,\n          view: this // safe to cast because this method is only called on context.view\n\n        }]);\n      }\n    }\n\n    if (!calendar.state.loadingLevel) {\n      // avoid initial empty state while pending\n      calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n    }\n  };\n\n  DateComponent.prototype.triggerWillRemoveSegs = function (segs, isMirrors) {\n    var calendar = this.calendar;\n\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      calendar.trigger('eventElRemove', seg.el);\n    }\n\n    if (this.hasPublicHandlers('eventDestroy')) {\n      for (var _a = 0, segs_3 = segs; _a < segs_3.length; _a++) {\n        var seg = segs_3[_a];\n        this.publiclyTrigger('eventDestroy', [{\n          event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n          isMirror: isMirrors,\n          el: seg.el,\n          view: this // safe to cast because this method is only called on context.view\n\n        }]);\n      }\n    }\n  }; // Pointer Interaction Utils\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  DateComponent.prototype.isValidSegDownEl = function (el) {\n    return !this.props.eventDrag && // HACK\n    !this.props.eventResize && // HACK\n    !elementClosest(el, '.fc-mirror') && (this.isPopover() || !this.isInPopover(el)); // ^above line ensures we don't detect a seg interaction within a nested component.\n    // it's a HACK because it only supports a popover as the nested component.\n  };\n\n  DateComponent.prototype.isValidDateDownEl = function (el) {\n    var segEl = elementClosest(el, this.fgSegSelector);\n    return (!segEl || segEl.classList.contains('fc-mirror')) && !elementClosest(el, '.fc-more') && // a \"more..\" link\n    !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n    !this.isInPopover(el);\n  };\n\n  DateComponent.prototype.isPopover = function () {\n    return this.el.classList.contains('fc-popover');\n  };\n\n  DateComponent.prototype.isInPopover = function (el) {\n    return Boolean(elementClosest(el, '.fc-popover'));\n  };\n\n  return DateComponent;\n}(Component);\n\nDateComponent.prototype.fgSegSelector = '.fc-event-container > *';\nDateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\nvar uid$1 = 0;\n\nfunction createPlugin(input) {\n  return {\n    id: String(uid$1++),\n    deps: input.deps || [],\n    reducers: input.reducers || [],\n    eventDefParsers: input.eventDefParsers || [],\n    isDraggableTransformers: input.isDraggableTransformers || [],\n    eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n    eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n    dateSelectionTransformers: input.dateSelectionTransformers || [],\n    datePointTransforms: input.datePointTransforms || [],\n    dateSpanTransforms: input.dateSpanTransforms || [],\n    views: input.views || {},\n    viewPropsTransformers: input.viewPropsTransformers || [],\n    isPropsValid: input.isPropsValid || null,\n    externalDefTransforms: input.externalDefTransforms || [],\n    eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n    viewContainerModifiers: input.viewContainerModifiers || [],\n    eventDropTransformers: input.eventDropTransformers || [],\n    componentInteractions: input.componentInteractions || [],\n    calendarInteractions: input.calendarInteractions || [],\n    themeClasses: input.themeClasses || {},\n    eventSourceDefs: input.eventSourceDefs || [],\n    cmdFormatter: input.cmdFormatter,\n    recurringTypes: input.recurringTypes || [],\n    namedTimeZonedImpl: input.namedTimeZonedImpl,\n    defaultView: input.defaultView || '',\n    elementDraggingImpl: input.elementDraggingImpl,\n    optionChangeHandlers: input.optionChangeHandlers || {}\n  };\n}\n\nvar PluginSystem =\n/** @class */\nfunction () {\n  function PluginSystem() {\n    this.hooks = {\n      reducers: [],\n      eventDefParsers: [],\n      isDraggableTransformers: [],\n      eventDragMutationMassagers: [],\n      eventDefMutationAppliers: [],\n      dateSelectionTransformers: [],\n      datePointTransforms: [],\n      dateSpanTransforms: [],\n      views: {},\n      viewPropsTransformers: [],\n      isPropsValid: null,\n      externalDefTransforms: [],\n      eventResizeJoinTransforms: [],\n      viewContainerModifiers: [],\n      eventDropTransformers: [],\n      componentInteractions: [],\n      calendarInteractions: [],\n      themeClasses: {},\n      eventSourceDefs: [],\n      cmdFormatter: null,\n      recurringTypes: [],\n      namedTimeZonedImpl: null,\n      defaultView: '',\n      elementDraggingImpl: null,\n      optionChangeHandlers: {}\n    };\n    this.addedHash = {};\n  }\n\n  PluginSystem.prototype.add = function (plugin) {\n    if (!this.addedHash[plugin.id]) {\n      this.addedHash[plugin.id] = true;\n\n      for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n        var dep = _a[_i];\n        this.add(dep);\n      }\n\n      this.hooks = combineHooks(this.hooks, plugin);\n    }\n  };\n\n  return PluginSystem;\n}();\n\nfunction combineHooks(hooks0, hooks1) {\n  return {\n    reducers: hooks0.reducers.concat(hooks1.reducers),\n    eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n    isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n    eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n    eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n    dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n    datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n    dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n    views: _assign({}, hooks0.views, hooks1.views),\n    viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n    isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n    externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n    eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n    viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n    eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n    calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n    componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n    themeClasses: _assign({}, hooks0.themeClasses, hooks1.themeClasses),\n    eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n    cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n    recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n    namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n    defaultView: hooks0.defaultView || hooks1.defaultView,\n    elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n    optionChangeHandlers: _assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n  };\n}\n\nvar eventSourceDef = {\n  ignoreRange: true,\n  parseMeta: function parseMeta(raw) {\n    if (Array.isArray(raw)) {\n      // short form\n      return raw;\n    } else if (Array.isArray(raw.events)) {\n      return raw.events;\n    }\n\n    return null;\n  },\n  fetch: function fetch(arg, success) {\n    success({\n      rawEvents: arg.eventSource.meta\n    });\n  }\n};\nvar ArrayEventSourcePlugin = createPlugin({\n  eventSourceDefs: [eventSourceDef]\n});\nvar eventSourceDef$1 = {\n  parseMeta: function parseMeta(raw) {\n    if (typeof raw === 'function') {\n      // short form\n      return raw;\n    } else if (typeof raw.events === 'function') {\n      return raw.events;\n    }\n\n    return null;\n  },\n  fetch: function fetch(arg, success, failure) {\n    var dateEnv = arg.calendar.dateEnv;\n    var func = arg.eventSource.meta;\n    unpromisify(func.bind(null, {\n      start: dateEnv.toDate(arg.range.start),\n      end: dateEnv.toDate(arg.range.end),\n      startStr: dateEnv.formatIso(arg.range.start),\n      endStr: dateEnv.formatIso(arg.range.end),\n      timeZone: dateEnv.timeZone\n    }), function (rawEvents) {\n      success({\n        rawEvents: rawEvents\n      }); // needs an object response\n    }, failure // send errorObj directly to failure callback\n    );\n  }\n};\nvar FuncEventSourcePlugin = createPlugin({\n  eventSourceDefs: [eventSourceDef$1]\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n  method = method.toUpperCase();\n  var body = null;\n\n  if (method === 'GET') {\n    url = injectQueryStringParams(url, params);\n  } else {\n    body = encodeParams(params);\n  }\n\n  var xhr = new XMLHttpRequest();\n  xhr.open(method, url, true);\n\n  if (method !== 'GET') {\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  }\n\n  xhr.onload = function () {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      try {\n        var res = JSON.parse(xhr.responseText);\n        successCallback(res, xhr);\n      } catch (err) {\n        failureCallback('Failure parsing JSON', xhr);\n      }\n    } else {\n      failureCallback('Request failed', xhr);\n    }\n  };\n\n  xhr.onerror = function () {\n    failureCallback('Request failed', xhr);\n  };\n\n  xhr.send(body);\n}\n\nfunction injectQueryStringParams(url, params) {\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + encodeParams(params);\n}\n\nfunction encodeParams(params) {\n  var parts = [];\n\n  for (var key in params) {\n    parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n  }\n\n  return parts.join('&');\n}\n\nvar eventSourceDef$2 = {\n  parseMeta: function parseMeta(raw) {\n    if (typeof raw === 'string') {\n      // short form\n      raw = {\n        url: raw\n      };\n    } else if (!raw || typeof raw !== 'object' || !raw.url) {\n      return null;\n    }\n\n    return {\n      url: raw.url,\n      method: (raw.method || 'GET').toUpperCase(),\n      extraParams: raw.extraParams,\n      startParam: raw.startParam,\n      endParam: raw.endParam,\n      timeZoneParam: raw.timeZoneParam\n    };\n  },\n  fetch: function fetch(arg, success, failure) {\n    var meta = arg.eventSource.meta;\n    var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n    requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n      success({\n        rawEvents: rawEvents,\n        xhr: xhr\n      });\n    }, function (errorMessage, xhr) {\n      failure({\n        message: errorMessage,\n        xhr: xhr\n      });\n    });\n  }\n};\nvar JsonFeedEventSourcePlugin = createPlugin({\n  eventSourceDefs: [eventSourceDef$2]\n});\n\nfunction buildRequestParams(meta, range, calendar) {\n  var dateEnv = calendar.dateEnv;\n  var startParam;\n  var endParam;\n  var timeZoneParam;\n  var customRequestParams;\n  var params = {};\n  startParam = meta.startParam;\n\n  if (startParam == null) {\n    startParam = calendar.opt('startParam');\n  }\n\n  endParam = meta.endParam;\n\n  if (endParam == null) {\n    endParam = calendar.opt('endParam');\n  }\n\n  timeZoneParam = meta.timeZoneParam;\n\n  if (timeZoneParam == null) {\n    timeZoneParam = calendar.opt('timeZoneParam');\n  } // retrieve any outbound GET/POST data from the options\n\n\n  if (typeof meta.extraParams === 'function') {\n    // supplied as a function that returns a key/value object\n    customRequestParams = meta.extraParams();\n  } else {\n    // probably supplied as a straight key/value object\n    customRequestParams = meta.extraParams || {};\n  }\n\n  _assign(params, customRequestParams);\n\n  params[startParam] = dateEnv.formatIso(range.start);\n  params[endParam] = dateEnv.formatIso(range.end);\n\n  if (dateEnv.timeZone !== 'local') {\n    params[timeZoneParam] = dateEnv.timeZone;\n  }\n\n  return params;\n}\n\nvar recurring = {\n  parse: function parse(rawEvent, leftoverProps, dateEnv) {\n    var createMarker = dateEnv.createMarker.bind(dateEnv);\n    var processors = {\n      daysOfWeek: null,\n      startTime: createDuration,\n      endTime: createDuration,\n      startRecur: createMarker,\n      endRecur: createMarker\n    };\n    var props = refineProps(rawEvent, processors, {}, leftoverProps);\n    var anyValid = false;\n\n    for (var propName in props) {\n      if (props[propName] != null) {\n        anyValid = true;\n        break;\n      }\n    }\n\n    if (anyValid) {\n      var duration = null;\n\n      if ('duration' in leftoverProps) {\n        duration = createDuration(leftoverProps.duration);\n        delete leftoverProps.duration;\n      }\n\n      if (!duration && props.startTime && props.endTime) {\n        duration = subtractDurations(props.endTime, props.startTime);\n      }\n\n      return {\n        allDayGuess: Boolean(!props.startTime && !props.endTime),\n        duration: duration,\n        typeData: props // doesn't need endTime anymore but oh well\n\n      };\n    }\n\n    return null;\n  },\n  expand: function expand(typeData, framingRange, dateEnv) {\n    var clippedFramingRange = intersectRanges(framingRange, {\n      start: typeData.startRecur,\n      end: typeData.endRecur\n    });\n\n    if (clippedFramingRange) {\n      return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n    } else {\n      return [];\n    }\n  }\n};\nvar SimpleRecurrencePlugin = createPlugin({\n  recurringTypes: [recurring]\n});\n\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n  var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n  var dayMarker = startOfDay(framingRange.start);\n  var endMarker = framingRange.end;\n  var instanceStarts = [];\n\n  while (dayMarker < endMarker) {\n    var instanceStart // if everyday, or this particular day-of-week\n    = void 0; // if everyday, or this particular day-of-week\n\n    if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n      if (startTime) {\n        instanceStart = dateEnv.add(dayMarker, startTime);\n      } else {\n        instanceStart = dayMarker;\n      }\n\n      instanceStarts.push(instanceStart);\n    }\n\n    dayMarker = addDays(dayMarker, 1);\n  }\n\n  return instanceStarts;\n}\n\nvar DefaultOptionChangeHandlers = createPlugin({\n  optionChangeHandlers: {\n    events: function events(_events, calendar, deepEqual) {\n      handleEventSources([_events], calendar, deepEqual);\n    },\n    eventSources: handleEventSources,\n    plugins: handlePlugins\n  }\n});\n\nfunction handleEventSources(inputs, calendar, deepEqual) {\n  var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n  var newInputs = [];\n\n  for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n    var input = inputs_1[_i];\n    var inputFound = false;\n\n    for (var i = 0; i < unfoundSources.length; i++) {\n      if (deepEqual(unfoundSources[i]._raw, input)) {\n        unfoundSources.splice(i, 1); // delete\n\n        inputFound = true;\n        break;\n      }\n    }\n\n    if (!inputFound) {\n      newInputs.push(input);\n    }\n  }\n\n  for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n    var unfoundSource = unfoundSources_1[_a];\n    calendar.dispatch({\n      type: 'REMOVE_EVENT_SOURCE',\n      sourceId: unfoundSource.sourceId\n    });\n  }\n\n  for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n    var newInput = newInputs_1[_b];\n    calendar.addEventSource(newInput);\n  }\n} // shortcoming: won't remove plugins\n\n\nfunction handlePlugins(inputs, calendar) {\n  calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n}\n\nvar config = {}; // TODO: make these options\n\nvar globalDefaults = {\n  defaultRangeSeparator: ' - ',\n  titleRangeSeparator: \" \\u2013 \",\n  defaultTimedEventDuration: '01:00:00',\n  defaultAllDayEventDuration: {\n    day: 1\n  },\n  forceEventDuration: false,\n  nextDayThreshold: '00:00:00',\n  // display\n  columnHeader: true,\n  defaultView: '',\n  aspectRatio: 1.35,\n  header: {\n    left: 'title',\n    center: '',\n    right: 'today prev,next'\n  },\n  weekends: true,\n  weekNumbers: false,\n  weekNumberCalculation: 'local',\n  editable: false,\n  // nowIndicator: false,\n  scrollTime: '06:00:00',\n  minTime: '00:00:00',\n  maxTime: '24:00:00',\n  showNonCurrentDates: true,\n  // event ajax\n  lazyFetching: true,\n  startParam: 'start',\n  endParam: 'end',\n  timeZoneParam: 'timeZone',\n  timeZone: 'local',\n  // allDayDefault: undefined,\n  // locale\n  locales: [],\n  locale: '',\n  // dir: will get this from the default locale\n  // buttonIcons: null,\n  // allows setting a min-height to the event segment to prevent short events overlapping each other\n  timeGridEventMinHeight: 0,\n  themeSystem: 'standard',\n  // eventResizableFromStart: false,\n  dragRevertDuration: 500,\n  dragScroll: true,\n  allDayMaintainDuration: false,\n  // selectable: false,\n  unselectAuto: true,\n  // selectMinDistance: 0,\n  dropAccept: '*',\n  eventOrder: 'start,-duration,allDay,title',\n  // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n  // rerenderDelay: null,\n  eventLimit: false,\n  eventLimitClick: 'popover',\n  dayPopoverFormat: {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  },\n  handleWindowResize: true,\n  windowResizeDelay: 100,\n  longPressDelay: 1000,\n  eventDragMinDistance: 5 // only applies to mouse\n\n};\nvar rtlDefaults = {\n  header: {\n    left: 'next,prev today',\n    center: '',\n    right: 'title'\n  },\n  buttonIcons: {\n    // TODO: make RTL support the responibility of the theme\n    prev: 'fc-icon-chevron-right',\n    next: 'fc-icon-chevron-left',\n    prevYear: 'fc-icon-chevrons-right',\n    nextYear: 'fc-icon-chevrons-left'\n  }\n};\nvar complexOptions = ['header', 'footer', 'buttonText', 'buttonIcons']; // Merges an array of option objects into a single object\n\nfunction mergeOptions(optionObjs) {\n  return mergeProps(optionObjs, complexOptions);\n} // TODO: move this stuff to a \"plugin\"-related file...\n\n\nvar INTERNAL_PLUGINS = [ArrayEventSourcePlugin, FuncEventSourcePlugin, JsonFeedEventSourcePlugin, SimpleRecurrencePlugin, DefaultOptionChangeHandlers];\n\nfunction refinePluginDefs(pluginInputs) {\n  var plugins = [];\n\n  for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n    var pluginInput = pluginInputs_1[_i];\n\n    if (typeof pluginInput === 'string') {\n      var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n\n      if (!window[globalName]) {\n        console.warn('Plugin file not loaded for ' + pluginInput);\n      } else {\n        plugins.push(window[globalName].default); // is an ES6 module\n      }\n    } else {\n      plugins.push(pluginInput);\n    }\n  }\n\n  return INTERNAL_PLUGINS.concat(plugins);\n}\n\nvar RAW_EN_LOCALE = {\n  code: 'en',\n  week: {\n    dow: 0,\n    doy: 4 // 4 days need to be within the year to be considered the first week\n\n  },\n  dir: 'ltr',\n  buttonText: {\n    prev: 'prev',\n    next: 'next',\n    prevYear: 'prev year',\n    nextYear: 'next year',\n    year: 'year',\n    today: 'today',\n    month: 'month',\n    week: 'week',\n    day: 'day',\n    list: 'list'\n  },\n  weekLabel: 'W',\n  allDayText: 'all-day',\n  eventLimitText: 'more',\n  noEventsMessage: 'No events to display'\n};\n\nfunction parseRawLocales(explicitRawLocales) {\n  var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n  var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n\n  var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n\n  var allRawLocales = globalArray.concat( // globalArray is low prio\n  hashValuesToArray(globalObject), // medium prio\n  explicitRawLocales // highest prio\n  );\n  var rawLocaleMap = {\n    en: RAW_EN_LOCALE // necessary?\n\n  };\n\n  for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n    var rawLocale = allRawLocales_1[_i];\n    rawLocaleMap[rawLocale.code] = rawLocale;\n  }\n\n  return {\n    map: rawLocaleMap,\n    defaultCode: defaultCode\n  };\n}\n\nfunction buildLocale(inputSingular, available) {\n  if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n    return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n  } else {\n    return queryLocale(inputSingular, available);\n  }\n}\n\nfunction queryLocale(codeArg, available) {\n  var codes = [].concat(codeArg || []); // will convert to array\n\n  var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n  return parseLocale(codeArg, codes, raw);\n}\n\nfunction queryRawLocale(codes, available) {\n  for (var i = 0; i < codes.length; i++) {\n    var parts = codes[i].toLocaleLowerCase().split('-');\n\n    for (var j = parts.length; j > 0; j--) {\n      var simpleId = parts.slice(0, j).join('-');\n\n      if (available[simpleId]) {\n        return available[simpleId];\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction parseLocale(codeArg, codes, raw) {\n  var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n  delete merged.code; // don't want this part of the options\n\n  var week = merged.week;\n  delete merged.week;\n  return {\n    codeArg: codeArg,\n    codes: codes,\n    week: week,\n    simpleNumberFormat: new Intl.NumberFormat(codeArg),\n    options: merged\n  };\n}\n\nvar OptionsManager =\n/** @class */\nfunction () {\n  function OptionsManager(overrides) {\n    this.overrides = _assign({}, overrides); // make a copy\n\n    this.dynamicOverrides = {};\n    this.compute();\n  }\n\n  OptionsManager.prototype.mutate = function (updates, removals, isDynamic) {\n    var overrideHash = isDynamic ? this.dynamicOverrides : this.overrides;\n\n    _assign(overrideHash, updates);\n\n    for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n      var propName = removals_1[_i];\n      delete overrideHash[propName];\n    }\n\n    this.compute();\n  }; // Computes the flattened options hash for the calendar and assigns to `this.options`.\n  // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n\n\n  OptionsManager.prototype.compute = function () {\n    // TODO: not a very efficient system\n    var locales = firstDefined( // explicit locale option given?\n    this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n    var locale = firstDefined( // explicit locales option given?\n    this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n    var available = parseRawLocales(locales);\n    var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n    var dir = firstDefined( // based on options computed so far, is direction RTL?\n    this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n    var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n    this.dirDefaults = dirDefaults;\n    this.localeDefaults = localeDefaults;\n    this.computed = mergeOptions([globalDefaults, dirDefaults, localeDefaults, this.overrides, this.dynamicOverrides]);\n  };\n\n  return OptionsManager;\n}();\n\nvar calendarSystemClassMap = {};\n\nfunction registerCalendarSystem(name, theClass) {\n  calendarSystemClassMap[name] = theClass;\n}\n\nfunction createCalendarSystem(name) {\n  return new calendarSystemClassMap[name]();\n}\n\nvar GregorianCalendarSystem =\n/** @class */\nfunction () {\n  function GregorianCalendarSystem() {}\n\n  GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n    return d.getUTCFullYear();\n  };\n\n  GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n    return d.getUTCMonth();\n  };\n\n  GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n    return d.getUTCDate();\n  };\n\n  GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n    return arrayToUtcDate(arr);\n  };\n\n  GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n    return dateToUtcArray(marker);\n  };\n\n  return GregorianCalendarSystem;\n}();\n\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\nvar ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\n\nfunction parse(str) {\n  var m = ISO_RE.exec(str);\n\n  if (m) {\n    var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n\n    if (isValidDate(marker)) {\n      var timeZoneOffset = null;\n\n      if (m[13]) {\n        timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 + Number(m[18] || 0));\n      }\n\n      return {\n        marker: marker,\n        isTimeUnspecified: !m[6],\n        timeZoneOffset: timeZoneOffset\n      };\n    }\n  }\n\n  return null;\n}\n\nvar DateEnv =\n/** @class */\nfunction () {\n  function DateEnv(settings) {\n    var timeZone = this.timeZone = settings.timeZone;\n    var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n\n    if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n      this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n    }\n\n    this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n    this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n    this.locale = settings.locale;\n    this.weekDow = settings.locale.week.dow;\n    this.weekDoy = settings.locale.week.doy;\n\n    if (settings.weekNumberCalculation === 'ISO') {\n      this.weekDow = 1;\n      this.weekDoy = 4;\n    }\n\n    if (typeof settings.firstDay === 'number') {\n      this.weekDow = settings.firstDay;\n    }\n\n    if (typeof settings.weekNumberCalculation === 'function') {\n      this.weekNumberFunc = settings.weekNumberCalculation;\n    }\n\n    this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n    this.cmdFormatter = settings.cmdFormatter;\n  } // Creating / Parsing\n\n\n  DateEnv.prototype.createMarker = function (input) {\n    var meta = this.createMarkerMeta(input);\n\n    if (meta === null) {\n      return null;\n    }\n\n    return meta.marker;\n  };\n\n  DateEnv.prototype.createNowMarker = function () {\n    if (this.canComputeOffset) {\n      return this.timestampToMarker(new Date().valueOf());\n    } else {\n      // if we can't compute the current date val for a timezone,\n      // better to give the current local date vals than UTC\n      return arrayToUtcDate(dateToLocalArray(new Date()));\n    }\n  };\n\n  DateEnv.prototype.createMarkerMeta = function (input) {\n    if (typeof input === 'string') {\n      return this.parse(input);\n    }\n\n    var marker = null;\n\n    if (typeof input === 'number') {\n      marker = this.timestampToMarker(input);\n    } else if (input instanceof Date) {\n      input = input.valueOf();\n\n      if (!isNaN(input)) {\n        marker = this.timestampToMarker(input);\n      }\n    } else if (Array.isArray(input)) {\n      marker = arrayToUtcDate(input);\n    }\n\n    if (marker === null || !isValidDate(marker)) {\n      return null;\n    }\n\n    return {\n      marker: marker,\n      isTimeUnspecified: false,\n      forcedTzo: null\n    };\n  };\n\n  DateEnv.prototype.parse = function (s) {\n    var parts = parse(s);\n\n    if (parts === null) {\n      return null;\n    }\n\n    var marker = parts.marker;\n    var forcedTzo = null;\n\n    if (parts.timeZoneOffset !== null) {\n      if (this.canComputeOffset) {\n        marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n      } else {\n        forcedTzo = parts.timeZoneOffset;\n      }\n    }\n\n    return {\n      marker: marker,\n      isTimeUnspecified: parts.isTimeUnspecified,\n      forcedTzo: forcedTzo\n    };\n  }; // Accessors\n\n\n  DateEnv.prototype.getYear = function (marker) {\n    return this.calendarSystem.getMarkerYear(marker);\n  };\n\n  DateEnv.prototype.getMonth = function (marker) {\n    return this.calendarSystem.getMarkerMonth(marker);\n  }; // Adding / Subtracting\n\n\n  DateEnv.prototype.add = function (marker, dur) {\n    var a = this.calendarSystem.markerToArray(marker);\n    a[0] += dur.years;\n    a[1] += dur.months;\n    a[2] += dur.days;\n    a[6] += dur.milliseconds;\n    return this.calendarSystem.arrayToMarker(a);\n  };\n\n  DateEnv.prototype.subtract = function (marker, dur) {\n    var a = this.calendarSystem.markerToArray(marker);\n    a[0] -= dur.years;\n    a[1] -= dur.months;\n    a[2] -= dur.days;\n    a[6] -= dur.milliseconds;\n    return this.calendarSystem.arrayToMarker(a);\n  };\n\n  DateEnv.prototype.addYears = function (marker, n) {\n    var a = this.calendarSystem.markerToArray(marker);\n    a[0] += n;\n    return this.calendarSystem.arrayToMarker(a);\n  };\n\n  DateEnv.prototype.addMonths = function (marker, n) {\n    var a = this.calendarSystem.markerToArray(marker);\n    a[1] += n;\n    return this.calendarSystem.arrayToMarker(a);\n  }; // Diffing Whole Units\n\n\n  DateEnv.prototype.diffWholeYears = function (m0, m1) {\n    var calendarSystem = this.calendarSystem;\n\n    if (timeAsMs(m0) === timeAsMs(m1) && calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) && calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n      return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n    }\n\n    return null;\n  };\n\n  DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n    var calendarSystem = this.calendarSystem;\n\n    if (timeAsMs(m0) === timeAsMs(m1) && calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n      return calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0) + (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n    }\n\n    return null;\n  }; // Range / Duration\n\n\n  DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n    var n = this.diffWholeYears(m0, m1);\n\n    if (n !== null) {\n      return {\n        unit: 'year',\n        value: n\n      };\n    }\n\n    n = this.diffWholeMonths(m0, m1);\n\n    if (n !== null) {\n      return {\n        unit: 'month',\n        value: n\n      };\n    }\n\n    n = diffWholeWeeks(m0, m1);\n\n    if (n !== null) {\n      return {\n        unit: 'week',\n        value: n\n      };\n    }\n\n    n = diffWholeDays(m0, m1);\n\n    if (n !== null) {\n      return {\n        unit: 'day',\n        value: n\n      };\n    }\n\n    n = diffHours(m0, m1);\n\n    if (isInt(n)) {\n      return {\n        unit: 'hour',\n        value: n\n      };\n    }\n\n    n = diffMinutes(m0, m1);\n\n    if (isInt(n)) {\n      return {\n        unit: 'minute',\n        value: n\n      };\n    }\n\n    n = diffSeconds(m0, m1);\n\n    if (isInt(n)) {\n      return {\n        unit: 'second',\n        value: n\n      };\n    }\n\n    return {\n      unit: 'millisecond',\n      value: m1.valueOf() - m0.valueOf()\n    };\n  };\n\n  DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n    // TODO: can use greatestWholeUnit\n    var diff;\n\n    if (d.years) {\n      diff = this.diffWholeYears(m0, m1);\n\n      if (diff !== null) {\n        return diff / asRoughYears(d);\n      }\n    }\n\n    if (d.months) {\n      diff = this.diffWholeMonths(m0, m1);\n\n      if (diff !== null) {\n        return diff / asRoughMonths(d);\n      }\n    }\n\n    if (d.days) {\n      diff = diffWholeDays(m0, m1);\n\n      if (diff !== null) {\n        return diff / asRoughDays(d);\n      }\n    }\n\n    return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n  }; // Start-Of\n\n\n  DateEnv.prototype.startOf = function (m, unit) {\n    if (unit === 'year') {\n      return this.startOfYear(m);\n    } else if (unit === 'month') {\n      return this.startOfMonth(m);\n    } else if (unit === 'week') {\n      return this.startOfWeek(m);\n    } else if (unit === 'day') {\n      return startOfDay(m);\n    } else if (unit === 'hour') {\n      return startOfHour(m);\n    } else if (unit === 'minute') {\n      return startOfMinute(m);\n    } else if (unit === 'second') {\n      return startOfSecond(m);\n    }\n  };\n\n  DateEnv.prototype.startOfYear = function (m) {\n    return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m)]);\n  };\n\n  DateEnv.prototype.startOfMonth = function (m) {\n    return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m), this.calendarSystem.getMarkerMonth(m)]);\n  };\n\n  DateEnv.prototype.startOfWeek = function (m) {\n    return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m), this.calendarSystem.getMarkerMonth(m), m.getUTCDate() - (m.getUTCDay() - this.weekDow + 7) % 7]);\n  }; // Week Number\n\n\n  DateEnv.prototype.computeWeekNumber = function (marker) {\n    if (this.weekNumberFunc) {\n      return this.weekNumberFunc(this.toDate(marker));\n    } else {\n      return weekOfYear(marker, this.weekDow, this.weekDoy);\n    }\n  }; // TODO: choke on timeZoneName: long\n\n\n  DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n    if (dateOptions === void 0) {\n      dateOptions = {};\n    }\n\n    return formatter.format({\n      marker: marker,\n      timeZoneOffset: dateOptions.forcedTzo != null ? dateOptions.forcedTzo : this.offsetForMarker(marker)\n    }, this);\n  };\n\n  DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n    if (dateOptions === void 0) {\n      dateOptions = {};\n    }\n\n    if (dateOptions.isEndExclusive) {\n      end = addMs(end, -1);\n    }\n\n    return formatter.formatRange({\n      marker: start,\n      timeZoneOffset: dateOptions.forcedStartTzo != null ? dateOptions.forcedStartTzo : this.offsetForMarker(start)\n    }, {\n      marker: end,\n      timeZoneOffset: dateOptions.forcedEndTzo != null ? dateOptions.forcedEndTzo : this.offsetForMarker(end)\n    }, this);\n  };\n\n  DateEnv.prototype.formatIso = function (marker, extraOptions) {\n    if (extraOptions === void 0) {\n      extraOptions = {};\n    }\n\n    var timeZoneOffset = null;\n\n    if (!extraOptions.omitTimeZoneOffset) {\n      if (extraOptions.forcedTzo != null) {\n        timeZoneOffset = extraOptions.forcedTzo;\n      } else {\n        timeZoneOffset = this.offsetForMarker(marker);\n      }\n    }\n\n    return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n  }; // TimeZone\n\n\n  DateEnv.prototype.timestampToMarker = function (ms) {\n    if (this.timeZone === 'local') {\n      return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n    } else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n      return new Date(ms);\n    } else {\n      return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n    }\n  };\n\n  DateEnv.prototype.offsetForMarker = function (m) {\n    if (this.timeZone === 'local') {\n      return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n    } else if (this.timeZone === 'UTC') {\n      return 0;\n    } else if (this.namedTimeZoneImpl) {\n      return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n    }\n\n    return null;\n  }; // Conversion\n\n\n  DateEnv.prototype.toDate = function (m, forcedTzo) {\n    if (this.timeZone === 'local') {\n      return arrayToLocalDate(dateToUtcArray(m));\n    } else if (this.timeZone === 'UTC') {\n      return new Date(m.valueOf()); // make sure it's a copy\n    } else if (!this.namedTimeZoneImpl) {\n      return new Date(m.valueOf() - (forcedTzo || 0));\n    } else {\n      return new Date(m.valueOf() - this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n      );\n    }\n  };\n\n  return DateEnv;\n}();\n\nvar SIMPLE_SOURCE_PROPS = {\n  id: String,\n  allDayDefault: Boolean,\n  eventDataTransform: Function,\n  success: Function,\n  failure: Function\n};\nvar uid$2 = 0;\n\nfunction doesSourceNeedRange(eventSource, calendar) {\n  var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n  return !defs[eventSource.sourceDefId].ignoreRange;\n}\n\nfunction parseEventSource(raw, calendar) {\n  var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n\n  for (var i = defs.length - 1; i >= 0; i--) {\n    // later-added plugins take precedence\n    var def = defs[i];\n    var meta = def.parseMeta(raw);\n\n    if (meta) {\n      var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n      res._raw = raw;\n      return res;\n    }\n  }\n\n  return null;\n}\n\nfunction parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n  var leftovers0 = {};\n  var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n  var leftovers1 = {};\n  var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n  props.isFetching = false;\n  props.latestFetchId = '';\n  props.fetchRange = null;\n  props.publicId = String(raw.id || '');\n  props.sourceId = String(uid$2++);\n  props.sourceDefId = sourceDefId;\n  props.meta = meta;\n  props.ui = ui;\n  props.extendedProps = leftovers1;\n  return props;\n}\n\nfunction reduceEventSources(eventSources, action, dateProfile, calendar) {\n  switch (action.type) {\n    case 'ADD_EVENT_SOURCES':\n      // already parsed\n      return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n\n    case 'REMOVE_EVENT_SOURCE':\n      return removeSource(eventSources, action.sourceId);\n\n    case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n\n    case 'NEXT':\n    case 'SET_DATE':\n    case 'SET_VIEW_TYPE':\n      if (dateProfile) {\n        return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n      } else {\n        return eventSources;\n      }\n\n    case 'FETCH_EVENT_SOURCES':\n    case 'CHANGE_TIMEZONE':\n      return fetchSourcesByIds(eventSources, action.sourceIds ? arrayToHash(action.sourceIds) : excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n\n    case 'RECEIVE_EVENTS':\n    case 'RECEIVE_EVENT_ERROR':\n      return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n\n    case 'REMOVE_ALL_EVENT_SOURCES':\n      return {};\n\n    default:\n      return eventSources;\n  }\n}\n\nvar uid$3 = 0;\n\nfunction addSources(eventSourceHash, sources, fetchRange, calendar) {\n  var hash = {};\n\n  for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n    var source = sources_1[_i];\n    hash[source.sourceId] = source;\n  }\n\n  if (fetchRange) {\n    hash = fetchDirtySources(hash, fetchRange, calendar);\n  }\n\n  return _assign({}, eventSourceHash, hash);\n}\n\nfunction removeSource(eventSourceHash, sourceId) {\n  return filterHash(eventSourceHash, function (eventSource) {\n    return eventSource.sourceId !== sourceId;\n  });\n}\n\nfunction fetchDirtySources(sourceHash, fetchRange, calendar) {\n  return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n    return isSourceDirty(eventSource, fetchRange, calendar);\n  }), fetchRange, calendar);\n}\n\nfunction isSourceDirty(eventSource, fetchRange, calendar) {\n  if (!doesSourceNeedRange(eventSource, calendar)) {\n    return !eventSource.latestFetchId;\n  } else {\n    return !calendar.opt('lazyFetching') || !eventSource.fetchRange || fetchRange.start < eventSource.fetchRange.start || fetchRange.end > eventSource.fetchRange.end;\n  }\n}\n\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n  var nextSources = {};\n\n  for (var sourceId in prevSources) {\n    var source = prevSources[sourceId];\n\n    if (sourceIdHash[sourceId]) {\n      nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n    } else {\n      nextSources[sourceId] = source;\n    }\n  }\n\n  return nextSources;\n}\n\nfunction fetchSource(eventSource, fetchRange, calendar) {\n  var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n  var fetchId = String(uid$3++);\n  sourceDef.fetch({\n    eventSource: eventSource,\n    calendar: calendar,\n    range: fetchRange\n  }, function (res) {\n    var rawEvents = res.rawEvents;\n    var calSuccess = calendar.opt('eventSourceSuccess');\n    var calSuccessRes;\n    var sourceSuccessRes;\n\n    if (eventSource.success) {\n      sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n    }\n\n    if (calSuccess) {\n      calSuccessRes = calSuccess(rawEvents, res.xhr);\n    }\n\n    rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n    calendar.dispatch({\n      type: 'RECEIVE_EVENTS',\n      sourceId: eventSource.sourceId,\n      fetchId: fetchId,\n      fetchRange: fetchRange,\n      rawEvents: rawEvents\n    });\n  }, function (error) {\n    var callFailure = calendar.opt('eventSourceFailure');\n    console.warn(error.message, error);\n\n    if (eventSource.failure) {\n      eventSource.failure(error);\n    }\n\n    if (callFailure) {\n      callFailure(error);\n    }\n\n    calendar.dispatch({\n      type: 'RECEIVE_EVENT_ERROR',\n      sourceId: eventSource.sourceId,\n      fetchId: fetchId,\n      fetchRange: fetchRange,\n      error: error\n    });\n  });\n  return _assign({}, eventSource, {\n    isFetching: true,\n    latestFetchId: fetchId\n  });\n}\n\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n  var _a;\n\n  var eventSource = sourceHash[sourceId];\n\n  if (eventSource && // not already removed\n  fetchId === eventSource.latestFetchId) {\n    return _assign({}, sourceHash, (_a = {}, _a[sourceId] = _assign({}, eventSource, {\n      isFetching: false,\n      fetchRange: fetchRange\n    }), _a));\n  }\n\n  return sourceHash;\n}\n\nfunction excludeStaticSources(eventSources, calendar) {\n  return filterHash(eventSources, function (eventSource) {\n    return doesSourceNeedRange(eventSource, calendar);\n  });\n}\n\nvar DateProfileGenerator =\n/** @class */\nfunction () {\n  function DateProfileGenerator(viewSpec, calendar) {\n    this.viewSpec = viewSpec;\n    this.options = viewSpec.options;\n    this.dateEnv = calendar.dateEnv;\n    this.calendar = calendar;\n    this.initHiddenDays();\n  }\n  /* Date Range Computation\n  ------------------------------------------------------------------------------------------------------------------*/\n  // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n\n\n  DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n    var dateEnv = this.dateEnv;\n    var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n    currentDateProfile.dateIncrement);\n    return this.build(prevDate, -1);\n  }; // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n\n\n  DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n    var dateEnv = this.dateEnv;\n    var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n    currentDateProfile.dateIncrement);\n    return this.build(nextDate, 1);\n  }; // Builds a structure holding dates/ranges for rendering around the given date.\n  // Optional direction param indicates whether the date is being incremented/decremented\n  // from its previous value. decremented = -1, incremented = 1 (default).\n\n\n  DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n    if (forceToValid === void 0) {\n      forceToValid = false;\n    }\n\n    var validRange;\n    var minTime = null;\n    var maxTime = null;\n    var currentInfo;\n    var isRangeAllDay;\n    var renderRange;\n    var activeRange;\n    var isValid;\n    validRange = this.buildValidRange();\n    validRange = this.trimHiddenDays(validRange);\n\n    if (forceToValid) {\n      currentDate = constrainMarkerToRange(currentDate, validRange);\n    }\n\n    currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n    isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n    renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n    renderRange = this.trimHiddenDays(renderRange);\n    activeRange = renderRange;\n\n    if (!this.options.showNonCurrentDates) {\n      activeRange = intersectRanges(activeRange, currentInfo.range);\n    }\n\n    minTime = createDuration(this.options.minTime);\n    maxTime = createDuration(this.options.maxTime);\n    activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n    activeRange = intersectRanges(activeRange, validRange); // might return null\n    // it's invalid if the originally requested date is not contained,\n    // or if the range is completely outside of the valid range.\n\n    isValid = rangesIntersect(currentInfo.range, validRange);\n    return {\n      // constraint for where prev/next operations can go and where events can be dragged/resized to.\n      // an object with optional start and end properties.\n      validRange: validRange,\n      // range the view is formally responsible for.\n      // for example, a month view might have 1st-31st, excluding padded dates\n      currentRange: currentInfo.range,\n      // name of largest unit being displayed, like \"month\" or \"week\"\n      currentRangeUnit: currentInfo.unit,\n      isRangeAllDay: isRangeAllDay,\n      // dates that display events and accept drag-n-drop\n      // will be `null` if no dates accept events\n      activeRange: activeRange,\n      // date range with a rendered skeleton\n      // includes not-active days that need some sort of DOM\n      renderRange: renderRange,\n      // Duration object that denotes the first visible time of any given day\n      minTime: minTime,\n      // Duration object that denotes the exclusive visible end time of any given day\n      maxTime: maxTime,\n      isValid: isValid,\n      // how far the current date will move for a prev/next operation\n      dateIncrement: this.buildDateIncrement(currentInfo.duration) // pass a fallback (might be null) ^\n\n    };\n  }; // Builds an object with optional start/end properties.\n  // Indicates the minimum/maximum dates to display.\n  // not responsible for trimming hidden days.\n\n\n  DateProfileGenerator.prototype.buildValidRange = function () {\n    return this.getRangeOption('validRange', this.calendar.getNow()) || {\n      start: null,\n      end: null\n    }; // completely open-ended\n  }; // Builds a structure with info about the \"current\" range, the range that is\n  // highlighted as being the current month for example.\n  // See build() for a description of `direction`.\n  // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n\n\n  DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n    var _a = this,\n        viewSpec = _a.viewSpec,\n        dateEnv = _a.dateEnv;\n\n    var duration = null;\n    var unit = null;\n    var range = null;\n    var dayCount;\n\n    if (viewSpec.duration) {\n      duration = viewSpec.duration;\n      unit = viewSpec.durationUnit;\n      range = this.buildRangeFromDuration(date, direction, duration, unit);\n    } else if (dayCount = this.options.dayCount) {\n      unit = 'day';\n      range = this.buildRangeFromDayCount(date, direction, dayCount);\n    } else if (range = this.buildCustomVisibleRange(date)) {\n      unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n    } else {\n      duration = this.getFallbackDuration();\n      unit = greatestDurationDenominator(duration).unit;\n      range = this.buildRangeFromDuration(date, direction, duration, unit);\n    }\n\n    return {\n      duration: duration,\n      unit: unit,\n      range: range\n    };\n  };\n\n  DateProfileGenerator.prototype.getFallbackDuration = function () {\n    return createDuration({\n      day: 1\n    });\n  }; // Returns a new activeRange to have time values (un-ambiguate)\n  // minTime or maxTime causes the range to expand.\n\n\n  DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n    var dateEnv = this.dateEnv;\n    var start = range.start;\n    var end = range.end;\n\n    if (this.viewSpec.class.prototype.usesMinMaxTime) {\n      // expand active range if minTime is negative (why not when positive?)\n      if (asRoughDays(minTime) < 0) {\n        start = startOfDay(start); // necessary?\n\n        start = dateEnv.add(start, minTime);\n      } // expand active range if maxTime is beyond one day (why not when positive?)\n\n\n      if (asRoughDays(maxTime) > 1) {\n        end = startOfDay(end); // necessary?\n\n        end = addDays(end, -1);\n        end = dateEnv.add(end, maxTime);\n      }\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  }; // Builds the \"current\" range when it is specified as an explicit duration.\n  // `unit` is the already-computed greatestDurationDenominator unit of duration.\n\n\n  DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n    var dateEnv = this.dateEnv;\n    var alignment = this.options.dateAlignment;\n    var dateIncrementInput;\n    var dateIncrementDuration;\n    var start;\n    var end;\n    var res; // compute what the alignment should be\n\n    if (!alignment) {\n      dateIncrementInput = this.options.dateIncrement;\n\n      if (dateIncrementInput) {\n        dateIncrementDuration = createDuration(dateIncrementInput); // use the smaller of the two units\n\n        if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n          alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n        } else {\n          alignment = unit;\n        }\n      } else {\n        alignment = unit;\n      }\n    } // if the view displays a single day or smaller\n\n\n    if (asRoughDays(duration) <= 1) {\n      if (this.isHiddenDay(start)) {\n        start = this.skipHiddenDays(start, direction);\n        start = startOfDay(start);\n      }\n    }\n\n    function computeRes() {\n      start = dateEnv.startOf(date, alignment);\n      end = dateEnv.add(start, duration);\n      res = {\n        start: start,\n        end: end\n      };\n    }\n\n    computeRes(); // if range is completely enveloped by hidden days, go past the hidden days\n\n    if (!this.trimHiddenDays(res)) {\n      date = this.skipHiddenDays(date, direction);\n      computeRes();\n    }\n\n    return res;\n  }; // Builds the \"current\" range when a dayCount is specified.\n\n\n  DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n    var dateEnv = this.dateEnv;\n    var customAlignment = this.options.dateAlignment;\n    var runningCount = 0;\n    var start = date;\n    var end;\n\n    if (customAlignment) {\n      start = dateEnv.startOf(start, customAlignment);\n    }\n\n    start = startOfDay(start);\n    start = this.skipHiddenDays(start, direction);\n    end = start;\n\n    do {\n      end = addDays(end, 1);\n\n      if (!this.isHiddenDay(end)) {\n        runningCount++;\n      }\n    } while (runningCount < dayCount);\n\n    return {\n      start: start,\n      end: end\n    };\n  }; // Builds a normalized range object for the \"visible\" range,\n  // which is a way to define the currentRange and activeRange at the same time.\n\n\n  DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n    var dateEnv = this.dateEnv;\n    var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n\n    if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n      return null;\n    }\n\n    return visibleRange;\n  }; // Computes the range that will represent the element/cells for *rendering*,\n  // but which may have voided days/times.\n  // not responsible for trimming hidden days.\n\n\n  DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n    return currentRange;\n  }; // Compute the duration value that should be added/substracted to the current date\n  // when a prev/next operation happens.\n\n\n  DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n    var dateIncrementInput = this.options.dateIncrement;\n    var customAlignment;\n\n    if (dateIncrementInput) {\n      return createDuration(dateIncrementInput);\n    } else if (customAlignment = this.options.dateAlignment) {\n      return createDuration(1, customAlignment);\n    } else if (fallback) {\n      return fallback;\n    } else {\n      return createDuration({\n        days: 1\n      });\n    }\n  }; // Arguments after name will be forwarded to a hypothetical function value\n  // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n  // Always clone your objects if you fear mutation.\n\n\n  DateProfileGenerator.prototype.getRangeOption = function (name) {\n    var otherArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      otherArgs[_i - 1] = arguments[_i];\n    }\n\n    var val = this.options[name];\n\n    if (typeof val === 'function') {\n      val = val.apply(null, otherArgs);\n    }\n\n    if (val) {\n      val = parseRange(val, this.dateEnv);\n    }\n\n    if (val) {\n      val = computeVisibleDayRange(val);\n    }\n\n    return val;\n  };\n  /* Hidden Days\n  ------------------------------------------------------------------------------------------------------------------*/\n  // Initializes internal variables related to calculating hidden days-of-week\n\n\n  DateProfileGenerator.prototype.initHiddenDays = function () {\n    var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n\n    var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n\n    var dayCnt = 0;\n    var i;\n\n    if (this.options.weekends === false) {\n      hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n    }\n\n    for (i = 0; i < 7; i++) {\n      if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n        dayCnt++;\n      }\n    }\n\n    if (!dayCnt) {\n      throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n    }\n\n    this.isHiddenDayHash = isHiddenDayHash;\n  }; // Remove days from the beginning and end of the range that are computed as hidden.\n  // If the whole range is trimmed off, returns null\n\n\n  DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n    var start = range.start;\n    var end = range.end;\n\n    if (start) {\n      start = this.skipHiddenDays(start);\n    }\n\n    if (end) {\n      end = this.skipHiddenDays(end, -1, true);\n    }\n\n    if (start == null || end == null || start < end) {\n      return {\n        start: start,\n        end: end\n      };\n    }\n\n    return null;\n  }; // Is the current day hidden?\n  // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n\n\n  DateProfileGenerator.prototype.isHiddenDay = function (day) {\n    if (day instanceof Date) {\n      day = day.getUTCDay();\n    }\n\n    return this.isHiddenDayHash[day];\n  }; // Incrementing the current day until it is no longer a hidden day, returning a copy.\n  // DOES NOT CONSIDER validRange!\n  // If the initial value of `date` is not a hidden day, don't do anything.\n  // Pass `isExclusive` as `true` if you are dealing with an end date.\n  // `inc` defaults to `1` (increment one day forward each time)\n\n\n  DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n    if (inc === void 0) {\n      inc = 1;\n    }\n\n    if (isExclusive === void 0) {\n      isExclusive = false;\n    }\n\n    while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n      date = addDays(date, inc);\n    }\n\n    return date;\n  };\n\n  return DateProfileGenerator;\n}(); // TODO: find a way to avoid comparing DateProfiles. it's tedious\n\n\nfunction isDateProfilesEqual(p0, p1) {\n  return rangesEqual(p0.validRange, p1.validRange) && rangesEqual(p0.activeRange, p1.activeRange) && rangesEqual(p0.renderRange, p1.renderRange) && durationsEqual(p0.minTime, p1.minTime) && durationsEqual(p0.maxTime, p1.maxTime);\n  /*\n  TODO: compare more?\n    currentRange: DateRange\n    currentRangeUnit: string\n    isRangeAllDay: boolean\n    isValid: boolean\n    dateIncrement: Duration\n  */\n}\n\nfunction reduce(state, action, calendar) {\n  var viewType = reduceViewType(state.viewType, action);\n  var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n  var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n\n  var nextState = _assign({}, state, {\n    viewType: viewType,\n    dateProfile: dateProfile,\n    currentDate: reduceCurrentDate(state.currentDate, action, dateProfile),\n    eventSources: eventSources,\n    eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar),\n    dateSelection: reduceDateSelection(state.dateSelection, action, calendar),\n    eventSelection: reduceSelectedEvent(state.eventSelection, action),\n    eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar),\n    eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar),\n    eventSourceLoadingLevel: computeLoadingLevel(eventSources),\n    loadingLevel: computeLoadingLevel(eventSources)\n  });\n\n  for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n    var reducerFunc = _a[_i];\n    nextState = reducerFunc(nextState, action, calendar);\n  } // console.log(action.type, nextState)\n\n\n  return nextState;\n}\n\nfunction reduceViewType(currentViewType, action) {\n  switch (action.type) {\n    case 'SET_VIEW_TYPE':\n      return action.viewType;\n\n    default:\n      return currentViewType;\n  }\n}\n\nfunction reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n  var newDateProfile;\n\n  switch (action.type) {\n    case 'PREV':\n      newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n      break;\n\n    case 'NEXT':\n      newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n      break;\n\n    case 'SET_DATE':\n      if (!currentDateProfile.activeRange || !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n        newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n        );\n      }\n\n      break;\n\n    case 'SET_VIEW_TYPE':\n      var generator = calendar.dateProfileGenerators[viewType];\n\n      if (!generator) {\n        throw new Error(viewType ? 'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' : 'No available FullCalendar view plugins.');\n      }\n\n      newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n      );\n      break;\n  }\n\n  if (newDateProfile && newDateProfile.isValid && !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n    return newDateProfile;\n  } else {\n    return currentDateProfile;\n  }\n}\n\nfunction reduceCurrentDate(currentDate, action, dateProfile) {\n  switch (action.type) {\n    case 'PREV':\n    case 'NEXT':\n      if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n        return dateProfile.currentRange.start;\n      } else {\n        return currentDate;\n      }\n\n    case 'SET_DATE':\n    case 'SET_VIEW_TYPE':\n      var newDate = action.dateMarker || currentDate;\n\n      if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n        return dateProfile.currentRange.start;\n      } else {\n        return newDate;\n      }\n\n    default:\n      return currentDate;\n  }\n}\n\nfunction reduceDateSelection(currentSelection, action, calendar) {\n  switch (action.type) {\n    case 'SELECT_DATES':\n      return action.selection;\n\n    case 'UNSELECT_DATES':\n      return null;\n\n    default:\n      return currentSelection;\n  }\n}\n\nfunction reduceSelectedEvent(currentInstanceId, action) {\n  switch (action.type) {\n    case 'SELECT_EVENT':\n      return action.eventInstanceId;\n\n    case 'UNSELECT_EVENT':\n      return '';\n\n    default:\n      return currentInstanceId;\n  }\n}\n\nfunction reduceEventDrag(currentDrag, action, sources, calendar) {\n  switch (action.type) {\n    case 'SET_EVENT_DRAG':\n      var newDrag = action.state;\n      return {\n        affectedEvents: newDrag.affectedEvents,\n        mutatedEvents: newDrag.mutatedEvents,\n        isEvent: newDrag.isEvent,\n        origSeg: newDrag.origSeg\n      };\n\n    case 'UNSET_EVENT_DRAG':\n      return null;\n\n    default:\n      return currentDrag;\n  }\n}\n\nfunction reduceEventResize(currentResize, action, sources, calendar) {\n  switch (action.type) {\n    case 'SET_EVENT_RESIZE':\n      var newResize = action.state;\n      return {\n        affectedEvents: newResize.affectedEvents,\n        mutatedEvents: newResize.mutatedEvents,\n        isEvent: newResize.isEvent,\n        origSeg: newResize.origSeg\n      };\n\n    case 'UNSET_EVENT_RESIZE':\n      return null;\n\n    default:\n      return currentResize;\n  }\n}\n\nfunction computeLoadingLevel(eventSources) {\n  var cnt = 0;\n\n  for (var sourceId in eventSources) {\n    if (eventSources[sourceId].isFetching) {\n      cnt++;\n    }\n  }\n\n  return cnt;\n}\n\nvar STANDARD_PROPS = {\n  start: null,\n  end: null,\n  allDay: Boolean\n};\n\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n  var span = parseOpenDateSpan(raw, dateEnv);\n  var range = span.range;\n\n  if (!range.start) {\n    return null;\n  }\n\n  if (!range.end) {\n    if (defaultDuration == null) {\n      return null;\n    } else {\n      range.end = dateEnv.add(range.start, defaultDuration);\n    }\n  }\n\n  return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\n\n\nfunction parseOpenDateSpan(raw, dateEnv) {\n  var leftovers = {};\n  var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n  var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n  var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n  var allDay = standardProps.allDay;\n\n  if (allDay == null) {\n    allDay = startMeta && startMeta.isTimeUnspecified && (!endMeta || endMeta.isTimeUnspecified);\n  } // use this leftover object as the selection object\n\n\n  leftovers.range = {\n    start: startMeta ? startMeta.marker : null,\n    end: endMeta ? endMeta.marker : null\n  };\n  leftovers.allDay = allDay;\n  return leftovers;\n}\n\nfunction isDateSpansEqual(span0, span1) {\n  return rangesEqual(span0.range, span1.range) && span0.allDay === span1.allDay && isSpanPropsEqual(span0, span1);\n} // the NON-DATE-RELATED props\n\n\nfunction isSpanPropsEqual(span0, span1) {\n  for (var propName in span1) {\n    if (propName !== 'range' && propName !== 'allDay') {\n      if (span0[propName] !== span1[propName]) {\n        return false;\n      }\n    }\n  } // are there any props that span0 has that span1 DOESN'T have?\n  // both have range/allDay, so no need to special-case.\n\n\n  for (var propName in span0) {\n    if (!(propName in span1)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction buildDateSpanApi(span, dateEnv) {\n  return {\n    start: dateEnv.toDate(span.range.start),\n    end: dateEnv.toDate(span.range.end),\n    startStr: dateEnv.formatIso(span.range.start, {\n      omitTime: span.allDay\n    }),\n    endStr: dateEnv.formatIso(span.range.end, {\n      omitTime: span.allDay\n    }),\n    allDay: span.allDay\n  };\n}\n\nfunction buildDatePointApi(span, dateEnv) {\n  return {\n    date: dateEnv.toDate(span.range.start),\n    dateStr: dateEnv.formatIso(span.range.start, {\n      omitTime: span.allDay\n    }),\n    allDay: span.allDay\n  };\n}\n\nfunction fabricateEventRange(dateSpan, eventUiBases, calendar) {\n  var def = parseEventDef({\n    editable: false\n  }, '', // sourceId\n  dateSpan.allDay, true, // hasEnd\n  calendar);\n  return {\n    def: def,\n    ui: compileEventUi(def, eventUiBases),\n    instance: createEventInstance(def.defId, dateSpan.range),\n    range: dateSpan.range,\n    isStart: true,\n    isEnd: true\n  };\n}\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n  var hash = {};\n  var viewType;\n\n  for (viewType in defaultConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  for (viewType in overrideConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  return hash;\n}\n\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  if (hash[viewType]) {\n    return hash[viewType];\n  }\n\n  var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n\n  if (viewDef) {\n    hash[viewType] = viewDef;\n  }\n\n  return viewDef;\n}\n\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  var defaultConfig = defaultConfigs[viewType];\n  var overrideConfig = overrideConfigs[viewType];\n\n  var queryProp = function queryProp(name) {\n    return defaultConfig && defaultConfig[name] !== null ? defaultConfig[name] : overrideConfig && overrideConfig[name] !== null ? overrideConfig[name] : null;\n  };\n\n  var theClass = queryProp('class');\n  var superType = queryProp('superType');\n\n  if (!superType && theClass) {\n    superType = findViewNameBySubclass(theClass, overrideConfigs) || findViewNameBySubclass(theClass, defaultConfigs);\n  }\n\n  var superDef = null;\n\n  if (superType) {\n    if (superType === viewType) {\n      throw new Error('Can\\'t have a custom view type that references itself');\n    }\n\n    superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n  }\n\n  if (!theClass && superDef) {\n    theClass = superDef.class;\n  }\n\n  if (!theClass) {\n    return null; // don't throw a warning, might be settings for a single-unit view\n  }\n\n  return {\n    type: viewType,\n    class: theClass,\n    defaults: _assign({}, superDef ? superDef.defaults : {}, defaultConfig ? defaultConfig.options : {}),\n    overrides: _assign({}, superDef ? superDef.overrides : {}, overrideConfig ? overrideConfig.options : {})\n  };\n}\n\nfunction findViewNameBySubclass(viewSubclass, configs) {\n  var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n\n  for (var viewType in configs) {\n    var parsed = configs[viewType]; // need DIRECT subclass, so instanceof won't do it\n\n    if (parsed.class && parsed.class.prototype === superProto) {\n      return viewType;\n    }\n  }\n\n  return '';\n}\n\nfunction parseViewConfigs(inputs) {\n  return mapHash(inputs, parseViewConfig);\n}\n\nvar VIEW_DEF_PROPS = {\n  type: String,\n  class: null\n};\n\nfunction parseViewConfig(input) {\n  if (typeof input === 'function') {\n    input = {\n      class: input\n    };\n  }\n\n  var options = {};\n  var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n  return {\n    superType: props.type,\n    class: props.class,\n    options: options\n  };\n}\n\nfunction buildViewSpecs(defaultInputs, optionsManager) {\n  var defaultConfigs = parseViewConfigs(defaultInputs);\n  var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n  var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n  return mapHash(viewDefs, function (viewDef) {\n    return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n  });\n}\n\nfunction buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n  var durationInput = viewDef.overrides.duration || viewDef.defaults.duration || optionsManager.dynamicOverrides.duration || optionsManager.overrides.duration;\n  var duration = null;\n  var durationUnit = '';\n  var singleUnit = '';\n  var singleUnitOverrides = {};\n\n  if (durationInput) {\n    duration = createDuration(durationInput);\n\n    if (duration) {\n      // valid?\n      var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n      durationUnit = denom.unit;\n\n      if (denom.value === 1) {\n        singleUnit = durationUnit;\n        singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n      }\n    }\n  }\n\n  var queryButtonText = function queryButtonText(options) {\n    var buttonTextMap = options.buttonText || {};\n    var buttonTextKey = viewDef.defaults.buttonTextKey;\n\n    if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n      return buttonTextMap[buttonTextKey];\n    }\n\n    if (buttonTextMap[viewDef.type] != null) {\n      return buttonTextMap[viewDef.type];\n    }\n\n    if (buttonTextMap[singleUnit] != null) {\n      return buttonTextMap[singleUnit];\n    }\n  };\n\n  return {\n    type: viewDef.type,\n    class: viewDef.class,\n    duration: duration,\n    durationUnit: durationUnit,\n    singleUnit: singleUnit,\n    options: _assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n    buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) || queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n    viewDef.overrides.buttonText,\n    buttonTextDefault: queryButtonText(optionsManager.localeDefaults) || queryButtonText(optionsManager.dirDefaults) || viewDef.defaults.buttonText || queryButtonText(globalDefaults) || viewDef.type // fall back to given view name\n\n  };\n}\n\nvar Toolbar =\n/** @class */\nfunction (_super) {\n  __extends(Toolbar, _super);\n\n  function Toolbar(context, extraClassName) {\n    var _this = _super.call(this, context) || this;\n\n    _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n    _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n    _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n    _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n    _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n    _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n    _this.el = createElement('div', {\n      className: 'fc-toolbar ' + extraClassName\n    });\n    return _this;\n  }\n\n  Toolbar.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this._renderLayout.unrender(); // should unrender everything else\n\n\n    removeElement(this.el);\n  };\n\n  Toolbar.prototype.render = function (props) {\n    this._renderLayout(props.layout);\n\n    this._updateTitle(props.title);\n\n    this._updateActiveButton(props.activeButton);\n\n    this._updateToday(props.isTodayEnabled);\n\n    this._updatePrev(props.isPrevEnabled);\n\n    this._updateNext(props.isNextEnabled);\n  };\n\n  Toolbar.prototype.renderLayout = function (layout) {\n    var el = this.el;\n    this.viewsWithButtons = [];\n    appendToElement(el, this.renderSection('left', layout.left));\n    appendToElement(el, this.renderSection('center', layout.center));\n    appendToElement(el, this.renderSection('right', layout.right));\n  };\n\n  Toolbar.prototype.unrenderLayout = function () {\n    this.el.innerHTML = '';\n  };\n\n  Toolbar.prototype.renderSection = function (position, buttonStr) {\n    var _this = this;\n\n    var _a = this,\n        theme = _a.theme,\n        calendar = _a.calendar;\n\n    var optionsManager = calendar.optionsManager;\n    var viewSpecs = calendar.viewSpecs;\n    var sectionEl = createElement('div', {\n      className: 'fc-' + position\n    });\n    var calendarCustomButtons = optionsManager.computed.customButtons || {};\n    var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n    var calendarButtonText = optionsManager.computed.buttonText || {};\n\n    if (buttonStr) {\n      buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n        var groupChildren = [];\n        var isOnlyButtons = true;\n        var groupEl;\n        buttonGroupStr.split(',').forEach(function (buttonName, j) {\n          var customButtonProps;\n          var viewSpec;\n          var buttonClick;\n          var buttonIcon; // only one of these will be set\n\n          var buttonText; // \"\n\n          var buttonInnerHtml;\n          var buttonClasses;\n          var buttonEl;\n          var buttonAriaAttr;\n\n          if (buttonName === 'title') {\n            groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n\n            isOnlyButtons = false;\n          } else {\n            if (customButtonProps = calendarCustomButtons[buttonName]) {\n              buttonClick = function buttonClick(ev) {\n                if (customButtonProps.click) {\n                  customButtonProps.click.call(buttonEl, ev);\n                }\n              };\n\n              (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) || (buttonIcon = theme.getIconClass(buttonName)) || (buttonText = customButtonProps.text);\n            } else if (viewSpec = viewSpecs[buttonName]) {\n              _this.viewsWithButtons.push(buttonName);\n\n              buttonClick = function buttonClick() {\n                calendar.changeView(buttonName);\n              };\n\n              (buttonText = viewSpec.buttonTextOverride) || (buttonIcon = theme.getIconClass(buttonName)) || (buttonText = viewSpec.buttonTextDefault);\n            } else if (calendar[buttonName]) {\n              // a calendar method\n              buttonClick = function buttonClick() {\n                calendar[buttonName]();\n              };\n\n              (buttonText = calendarButtonTextOverrides[buttonName]) || (buttonIcon = theme.getIconClass(buttonName)) || (buttonText = calendarButtonText[buttonName]); //            ^ everything else is considered default\n            }\n\n            if (buttonClick) {\n              buttonClasses = ['fc-' + buttonName + '-button', theme.getClass('button')];\n\n              if (buttonText) {\n                buttonInnerHtml = htmlEscape(buttonText);\n                buttonAriaAttr = '';\n              } else if (buttonIcon) {\n                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n              }\n\n              buttonEl = htmlToElement( // type=\"button\" so that it doesn't submit a form\n              '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' + buttonAriaAttr + '>' + buttonInnerHtml + '</button>');\n              buttonEl.addEventListener('click', buttonClick);\n              groupChildren.push(buttonEl);\n            }\n          }\n        });\n\n        if (groupChildren.length > 1) {\n          groupEl = document.createElement('div');\n          var buttonGroupClassName = theme.getClass('buttonGroup');\n\n          if (isOnlyButtons && buttonGroupClassName) {\n            groupEl.classList.add(buttonGroupClassName);\n          }\n\n          appendToElement(groupEl, groupChildren);\n          sectionEl.appendChild(groupEl);\n        } else {\n          appendToElement(sectionEl, groupChildren); // 1 or 0 children\n        }\n      });\n    }\n\n    return sectionEl;\n  };\n\n  Toolbar.prototype.updateToday = function (isTodayEnabled) {\n    this.toggleButtonEnabled('today', isTodayEnabled);\n  };\n\n  Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n    this.toggleButtonEnabled('prev', isPrevEnabled);\n  };\n\n  Toolbar.prototype.updateNext = function (isNextEnabled) {\n    this.toggleButtonEnabled('next', isNextEnabled);\n  };\n\n  Toolbar.prototype.updateTitle = function (text) {\n    findElements(this.el, 'h2').forEach(function (titleEl) {\n      titleEl.innerText = text;\n    });\n  };\n\n  Toolbar.prototype.updateActiveButton = function (buttonName) {\n    var className = this.theme.getClass('buttonActive');\n    findElements(this.el, 'button').forEach(function (buttonEl) {\n      if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n        buttonEl.classList.add(className);\n      } else {\n        buttonEl.classList.remove(className);\n      }\n    });\n  };\n\n  Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n    findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n      buttonEl.disabled = !bool;\n    });\n  };\n\n  return Toolbar;\n}(Component);\n\nvar CalendarComponent =\n/** @class */\nfunction (_super) {\n  __extends(CalendarComponent, _super);\n\n  function CalendarComponent(context, el) {\n    var _this = _super.call(this, context) || this;\n\n    _this._renderToolbars = memoizeRendering(_this.renderToolbars);\n    _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n    _this.el = el;\n    prependToElement(el, _this.contentEl = createElement('div', {\n      className: 'fc-view-container'\n    }));\n    var calendar = _this.calendar;\n\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n      var modifyViewContainer = _a[_i];\n      modifyViewContainer(_this.contentEl, calendar);\n    }\n\n    _this.toggleElClassNames(true);\n\n    _this.computeTitle = memoize(computeTitle);\n    _this.parseBusinessHours = memoize(function (input) {\n      return parseBusinessHours(input, _this.calendar);\n    });\n    return _this;\n  }\n\n  CalendarComponent.prototype.destroy = function () {\n    if (this.header) {\n      this.header.destroy();\n    }\n\n    if (this.footer) {\n      this.footer.destroy();\n    }\n\n    if (this.view) {\n      this.view.destroy();\n    }\n\n    removeElement(this.contentEl);\n    this.toggleElClassNames(false);\n\n    _super.prototype.destroy.call(this);\n  };\n\n  CalendarComponent.prototype.toggleElClassNames = function (bool) {\n    var classList = this.el.classList;\n    var dirClassName = 'fc-' + this.opt('dir');\n    var themeClassName = this.theme.getClass('widget');\n\n    if (bool) {\n      classList.add('fc');\n      classList.add(dirClassName);\n      classList.add(themeClassName);\n    } else {\n      classList.remove('fc');\n      classList.remove(dirClassName);\n      classList.remove(themeClassName);\n    }\n  };\n\n  CalendarComponent.prototype.render = function (props) {\n    this.freezeHeight();\n    var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n\n    this._renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, props.dateProfileGenerator, title);\n\n    this.renderView(props, title);\n    this.updateSize();\n    this.thawHeight();\n  };\n\n  CalendarComponent.prototype.renderToolbars = function (viewSpec, dateProfile, currentDate, dateProfileGenerator, title) {\n    var headerLayout = this.opt('header');\n    var footerLayout = this.opt('footer');\n    var now = this.calendar.getNow();\n    var todayInfo = dateProfileGenerator.build(now);\n    var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n    var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n    var toolbarProps = {\n      title: title,\n      activeButton: viewSpec.type,\n      isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n      isPrevEnabled: prevInfo.isValid,\n      isNextEnabled: nextInfo.isValid\n    };\n\n    if (headerLayout) {\n      if (!this.header) {\n        this.header = new Toolbar(this.context, 'fc-header-toolbar');\n        prependToElement(this.el, this.header.el);\n      }\n\n      this.header.receiveProps(_assign({\n        layout: headerLayout\n      }, toolbarProps));\n    } else if (this.header) {\n      this.header.destroy();\n      this.header = null;\n    }\n\n    if (footerLayout) {\n      if (!this.footer) {\n        this.footer = new Toolbar(this.context, 'fc-footer-toolbar');\n        appendToElement(this.el, this.footer.el);\n      }\n\n      this.footer.receiveProps(_assign({\n        layout: footerLayout\n      }, toolbarProps));\n    } else if (this.footer) {\n      this.footer.destroy();\n      this.footer = null;\n    }\n  };\n\n  CalendarComponent.prototype.renderView = function (props, title) {\n    var view = this.view;\n    var viewSpec = props.viewSpec,\n        dateProfileGenerator = props.dateProfileGenerator;\n\n    if (!view || view.viewSpec !== viewSpec) {\n      if (view) {\n        view.destroy();\n      }\n\n      view = this.view = new viewSpec['class']({\n        calendar: this.calendar,\n        view: null,\n        dateEnv: this.dateEnv,\n        theme: this.theme,\n        options: viewSpec.options\n      }, viewSpec, dateProfileGenerator, this.contentEl);\n    } else {\n      view.addScroll(view.queryScroll());\n    }\n\n    view.title = title; // for the API\n\n    var viewProps = {\n      dateProfile: props.dateProfile,\n      businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n      eventStore: props.eventStore,\n      eventUiBases: props.eventUiBases,\n      dateSelection: props.dateSelection,\n      eventSelection: props.eventSelection,\n      eventDrag: props.eventDrag,\n      eventResize: props.eventResize\n    };\n    var transformers = this.buildViewPropTransformers(this.calendar.pluginSystem.hooks.viewPropsTransformers);\n\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n      var transformer = transformers_1[_i];\n\n      _assign(viewProps, transformer.transform(viewProps, viewSpec, props, view));\n    }\n\n    view.receiveProps(viewProps);\n  }; // Sizing\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  CalendarComponent.prototype.updateSize = function (isResize) {\n    if (isResize === void 0) {\n      isResize = false;\n    }\n\n    var view = this.view;\n\n    if (isResize) {\n      view.addScroll(view.queryScroll());\n    }\n\n    if (isResize || this.isHeightAuto == null) {\n      this.computeHeightVars();\n    }\n\n    view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n    view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n\n    view.popScroll(isResize);\n  };\n\n  CalendarComponent.prototype.computeHeightVars = function () {\n    var calendar = this.calendar; // yuck. need to handle dynamic options\n\n    var heightInput = calendar.opt('height');\n    var contentHeightInput = calendar.opt('contentHeight');\n    this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n\n    if (typeof contentHeightInput === 'number') {\n      // exists and not 'auto'\n      this.viewHeight = contentHeightInput;\n    } else if (typeof contentHeightInput === 'function') {\n      // exists and is a function\n      this.viewHeight = contentHeightInput();\n    } else if (typeof heightInput === 'number') {\n      // exists and not 'auto'\n      this.viewHeight = heightInput - this.queryToolbarsHeight();\n    } else if (typeof heightInput === 'function') {\n      // exists and is a function\n      this.viewHeight = heightInput() - this.queryToolbarsHeight();\n    } else if (heightInput === 'parent') {\n      // set to height of parent element\n      var parentEl = this.el.parentNode;\n      this.viewHeight = parentEl.getBoundingClientRect().height - this.queryToolbarsHeight();\n    } else {\n      this.viewHeight = Math.round(this.contentEl.getBoundingClientRect().width / Math.max(calendar.opt('aspectRatio'), .5));\n    }\n  };\n\n  CalendarComponent.prototype.queryToolbarsHeight = function () {\n    var height = 0;\n\n    if (this.header) {\n      height += computeHeightAndMargins(this.header.el);\n    }\n\n    if (this.footer) {\n      height += computeHeightAndMargins(this.footer.el);\n    }\n\n    return height;\n  }; // Height \"Freezing\"\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  CalendarComponent.prototype.freezeHeight = function () {\n    applyStyle(this.el, {\n      height: this.el.getBoundingClientRect().height,\n      overflow: 'hidden'\n    });\n  };\n\n  CalendarComponent.prototype.thawHeight = function () {\n    applyStyle(this.el, {\n      height: '',\n      overflow: ''\n    });\n  };\n\n  return CalendarComponent;\n}(Component); // Title and Date Formatting\n// -----------------------------------------------------------------------------------------------------------------\n// Computes what the title at the top of the calendar should be for this view\n\n\nfunction computeTitle(dateProfile, viewOptions) {\n  var range; // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n\n  if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n    range = dateProfile.currentRange;\n  } else {\n    // for day units or smaller, use the actual day range\n    range = dateProfile.activeRange;\n  }\n\n  return this.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), {\n    isEndExclusive: dateProfile.isRangeAllDay\n  });\n} // Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n\n\nfunction computeTitleFormat(dateProfile) {\n  var currentRangeUnit = dateProfile.currentRangeUnit;\n\n  if (currentRangeUnit === 'year') {\n    return {\n      year: 'numeric'\n    };\n  } else if (currentRangeUnit === 'month') {\n    return {\n      year: 'numeric',\n      month: 'long'\n    }; // like \"September 2014\"\n  } else {\n    var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n\n    if (days !== null && days > 1) {\n      // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n      return {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      };\n    } else {\n      // one day. longer, like \"September 9 2014\"\n      return {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n    }\n  }\n} // Plugin\n// -----------------------------------------------------------------------------------------------------------------\n\n\nfunction buildViewPropTransformers(theClasses) {\n  return theClasses.map(function (theClass) {\n    return new theClass();\n  });\n}\n\nvar Interaction =\n/** @class */\nfunction () {\n  function Interaction(settings) {\n    this.component = settings.component;\n  }\n\n  Interaction.prototype.destroy = function () {};\n\n  return Interaction;\n}();\n\nfunction parseInteractionSettings(component, input) {\n  return {\n    component: component,\n    el: input.el,\n    useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n  };\n}\n\nfunction interactionSettingsToStore(settings) {\n  var _a;\n\n  return _a = {}, _a[settings.component.uid] = settings, _a;\n} // global state\n\n\nvar interactionSettingsStore = {};\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\n\nvar EventClicking =\n/** @class */\nfunction (_super) {\n  __extends(EventClicking, _super);\n\n  function EventClicking(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.handleSegClick = function (ev, segEl) {\n      var component = _this.component;\n      var seg = getElSeg(segEl);\n\n      if (seg && // might be the <div> surrounding the more link\n      component.isValidSegDownEl(ev.target)) {\n        // our way to simulate a link click for elements that can't be <a> tags\n        // grab before trigger fired in case trigger trashes DOM thru rerendering\n        var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n        var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n        component.publiclyTrigger('eventClick', [{\n          el: segEl,\n          event: new EventApi(component.calendar, seg.eventRange.def, seg.eventRange.instance),\n          jsEvent: ev,\n          view: component.view\n        }]);\n\n        if (url && !ev.defaultPrevented) {\n          window.location.href = url;\n        }\n      }\n    };\n\n    var component = settings.component;\n    _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n    return _this;\n  }\n\n  return EventClicking;\n}(Interaction);\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\n\n\nvar EventHovering =\n/** @class */\nfunction (_super) {\n  __extends(EventHovering, _super);\n\n  function EventHovering(settings) {\n    var _this = _super.call(this, settings) || this; // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n\n\n    _this.handleEventElRemove = function (el) {\n      if (el === _this.currentSegEl) {\n        _this.handleSegLeave(null, _this.currentSegEl);\n      }\n    };\n\n    _this.handleSegEnter = function (ev, segEl) {\n      if (getElSeg(segEl)) {\n        // TODO: better way to make sure not hovering over more+ link or its wrapper\n        segEl.classList.add('fc-allow-mouse-resize');\n        _this.currentSegEl = segEl;\n\n        _this.triggerEvent('eventMouseEnter', ev, segEl);\n      }\n    };\n\n    _this.handleSegLeave = function (ev, segEl) {\n      if (_this.currentSegEl) {\n        segEl.classList.remove('fc-allow-mouse-resize');\n        _this.currentSegEl = null;\n\n        _this.triggerEvent('eventMouseLeave', ev, segEl);\n      }\n    };\n\n    var component = settings.component;\n    _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n    component.calendar.on('eventElRemove', _this.handleEventElRemove);\n    return _this;\n  }\n\n  EventHovering.prototype.destroy = function () {\n    this.removeHoverListeners();\n    this.component.calendar.off('eventElRemove', this.handleEventElRemove);\n  };\n\n  EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n    var component = this.component;\n    var seg = getElSeg(segEl);\n\n    if (!ev || component.isValidSegDownEl(ev.target)) {\n      component.publiclyTrigger(publicEvName, [{\n        el: segEl,\n        event: new EventApi(this.component.calendar, seg.eventRange.def, seg.eventRange.instance),\n        jsEvent: ev,\n        view: component.view\n      }]);\n    }\n  };\n\n  return EventHovering;\n}(Interaction);\n\nvar StandardTheme =\n/** @class */\nfunction (_super) {\n  __extends(StandardTheme, _super);\n\n  function StandardTheme() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return StandardTheme;\n}(Theme);\n\nStandardTheme.prototype.classes = {\n  widget: 'fc-unthemed',\n  widgetHeader: 'fc-widget-header',\n  widgetContent: 'fc-widget-content',\n  buttonGroup: 'fc-button-group',\n  button: 'fc-button fc-button-primary',\n  buttonActive: 'fc-button-active',\n  popoverHeader: 'fc-widget-header',\n  popoverContent: 'fc-widget-content',\n  // day grid\n  headerRow: 'fc-widget-header',\n  dayRow: 'fc-widget-content',\n  // list view\n  listView: 'fc-widget-content'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n  close: 'fc-icon-x',\n  prev: 'fc-icon-chevron-left',\n  next: 'fc-icon-chevron-right',\n  prevYear: 'fc-icon-chevrons-left',\n  nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons';\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(el, overrides) {\n    var _this = this;\n\n    this.parseRawLocales = memoize(parseRawLocales);\n    this.buildLocale = memoize(buildLocale);\n    this.buildDateEnv = memoize(buildDateEnv);\n    this.buildTheme = memoize(buildTheme);\n    this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n    this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n    this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isPropsEqual);\n    this.buildEventUiBases = memoize(buildEventUiBases);\n    this.interactionsStore = {};\n    this.actionQueue = [];\n    this.isReducing = false; // isDisplaying: boolean = false // installed in DOM? accepting renders?\n\n    this.needsRerender = false; // needs a render?\n\n    this.needsFullRerender = false;\n    this.isRendering = false; // currently in the executeRender function?\n\n    this.renderingPauseDepth = 0;\n    this.buildDelayedRerender = memoize(buildDelayedRerender);\n    this.afterSizingTriggers = {};\n    this.isViewUpdated = false;\n    this.isDatesUpdated = false;\n    this.isEventsUpdated = false;\n    this.el = el;\n    this.optionsManager = new OptionsManager(overrides || {});\n    this.pluginSystem = new PluginSystem(); // only do once. don't do in handleOptions. because can't remove plugins\n\n    this.addPluginInputs(this.optionsManager.computed.plugins || []);\n    this.handleOptions(this.optionsManager.computed);\n    this.publiclyTrigger('_init'); // for tests\n\n    this.hydrate();\n    this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions.map(function (calendarInteractionClass) {\n      return new calendarInteractionClass(_this);\n    });\n  }\n\n  Calendar.prototype.addPluginInputs = function (pluginInputs) {\n    var pluginDefs = refinePluginDefs(pluginInputs);\n\n    for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n      var pluginDef = pluginDefs_1[_i];\n      this.pluginSystem.add(pluginDef);\n    }\n  };\n\n  Object.defineProperty(Calendar.prototype, \"view\", {\n    // public API\n    get: function get() {\n      return this.component ? this.component.view : null;\n    },\n    enumerable: true,\n    configurable: true\n  }); // Public API for rendering\n  // -----------------------------------------------------------------------------------------------------------------\n\n  Calendar.prototype.render = function () {\n    if (!this.component) {\n      this.renderableEventStore = createEmptyEventStore();\n      this.bindHandlers();\n      this.executeRender();\n    } else {\n      this.requestRerender(true);\n    }\n  };\n\n  Calendar.prototype.destroy = function () {\n    if (this.component) {\n      this.unbindHandlers();\n      this.component.destroy(); // don't null-out. in case API needs access\n\n      this.component = null; // umm ???\n\n      for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n        var interaction = _a[_i];\n        interaction.destroy();\n      }\n\n      this.publiclyTrigger('_destroyed');\n    }\n  }; // Handlers\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.bindHandlers = function () {\n    var _this = this; // event delegation for nav links\n\n\n    this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n      var gotoOptions = anchorEl.getAttribute('data-goto');\n      gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n      var dateEnv = _this.dateEnv;\n      var dateMarker = dateEnv.createMarker(gotoOptions.date);\n      var viewType = gotoOptions.type; // property like \"navLinkDayClick\". might be a string or a function\n\n      var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n\n      if (typeof customAction === 'function') {\n        customAction(dateEnv.toDate(dateMarker), ev);\n      } else {\n        if (typeof customAction === 'string') {\n          viewType = customAction;\n        }\n\n        _this.zoomTo(dateMarker, viewType);\n      }\n    });\n\n    if (this.opt('handleWindowResize')) {\n      window.addEventListener('resize', this.windowResizeProxy = debounce( // prevents rapid calls\n      this.windowResize.bind(this), this.opt('windowResizeDelay')));\n    }\n  };\n\n  Calendar.prototype.unbindHandlers = function () {\n    this.removeNavLinkListener();\n\n    if (this.windowResizeProxy) {\n      window.removeEventListener('resize', this.windowResizeProxy);\n      this.windowResizeProxy = null;\n    }\n  }; // Dispatcher\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.hydrate = function () {\n    var _this = this;\n\n    this.state = this.buildInitialState();\n    var rawSources = this.opt('eventSources') || [];\n    var singleRawSource = this.opt('events');\n    var sources = []; // parsed\n\n    if (singleRawSource) {\n      rawSources.unshift(singleRawSource);\n    }\n\n    for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n      var rawSource = rawSources_1[_i];\n      var source = parseEventSource(rawSource, this);\n\n      if (source) {\n        sources.push(source);\n      }\n    }\n\n    this.batchRendering(function () {\n      _this.dispatch({\n        type: 'INIT'\n      }); // pass in sources here?\n\n\n      _this.dispatch({\n        type: 'ADD_EVENT_SOURCES',\n        sources: sources\n      });\n\n      _this.dispatch({\n        type: 'SET_VIEW_TYPE',\n        viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n      });\n    });\n  };\n\n  Calendar.prototype.buildInitialState = function () {\n    return {\n      viewType: null,\n      loadingLevel: 0,\n      eventSourceLoadingLevel: 0,\n      currentDate: this.getInitialDate(),\n      dateProfile: null,\n      eventSources: {},\n      eventStore: createEmptyEventStore(),\n      dateSelection: null,\n      eventSelection: '',\n      eventDrag: null,\n      eventResize: null\n    };\n  };\n\n  Calendar.prototype.dispatch = function (action) {\n    this.actionQueue.push(action);\n\n    if (!this.isReducing) {\n      this.isReducing = true;\n      var oldState = this.state;\n\n      while (this.actionQueue.length) {\n        this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n      }\n\n      var newState = this.state;\n      this.isReducing = false;\n\n      if (!oldState.loadingLevel && newState.loadingLevel) {\n        this.publiclyTrigger('loading', [true]);\n      } else if (oldState.loadingLevel && !newState.loadingLevel) {\n        this.publiclyTrigger('loading', [false]);\n      }\n\n      var view = this.component && this.component.view;\n\n      if (oldState.eventStore !== newState.eventStore || this.needsFullRerender) {\n        if (oldState.eventStore) {\n          this.isEventsUpdated = true;\n        }\n      }\n\n      if (oldState.dateProfile !== newState.dateProfile || this.needsFullRerender) {\n        if (oldState.dateProfile && view) {\n          // why would view be null!?\n          this.publiclyTrigger('datesDestroy', [{\n            view: view,\n            el: view.el\n          }]);\n        }\n\n        this.isDatesUpdated = true;\n      }\n\n      if (oldState.viewType !== newState.viewType || this.needsFullRerender) {\n        if (oldState.viewType && view) {\n          // why would view be null!?\n          this.publiclyTrigger('viewSkeletonDestroy', [{\n            view: view,\n            el: view.el\n          }]);\n        }\n\n        this.isViewUpdated = true;\n      }\n\n      this.requestRerender();\n    }\n  };\n\n  Calendar.prototype.reduce = function (state, action, calendar) {\n    return reduce(state, action, calendar);\n  }; // Render Queue\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.requestRerender = function (needsFull) {\n    if (needsFull === void 0) {\n      needsFull = false;\n    }\n\n    this.needsRerender = true;\n    this.needsFullRerender = this.needsFullRerender || needsFull;\n    this.delayedRerender(); // will call a debounced-version of tryRerender\n  };\n\n  Calendar.prototype.tryRerender = function () {\n    if (this.component && // must be accepting renders\n    this.needsRerender && // indicates that a rerender was requested\n    !this.renderingPauseDepth && // not paused\n    !this.isRendering // not currently in the render loop\n    ) {\n        this.executeRender();\n      }\n  };\n\n  Calendar.prototype.batchRendering = function (func) {\n    this.renderingPauseDepth++;\n    func();\n    this.renderingPauseDepth--;\n\n    if (this.needsRerender) {\n      this.requestRerender();\n    }\n  }; // Rendering\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.executeRender = function () {\n    var needsFullRerender = this.needsFullRerender; // save before clearing\n    // clear these BEFORE the render so that new values will accumulate during render\n\n    this.needsRerender = false;\n    this.needsFullRerender = false;\n    this.isRendering = true;\n    this.renderComponent(needsFullRerender);\n    this.isRendering = false; // received a rerender request while rendering\n\n    if (this.needsRerender) {\n      this.delayedRerender();\n    }\n  };\n  /*\n  don't call this directly. use executeRender instead\n  */\n\n\n  Calendar.prototype.renderComponent = function (needsFull) {\n    var _a = this,\n        state = _a.state,\n        component = _a.component;\n\n    var viewType = state.viewType;\n    var viewSpec = this.viewSpecs[viewType];\n    var savedScroll = needsFull && component ? component.view.queryScroll() : null;\n\n    if (!viewSpec) {\n      throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n    } // if event sources are still loading and progressive rendering hasn't been enabled,\n    // keep rendering the last fully loaded set of events\n\n\n    var renderableEventStore = this.renderableEventStore = state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering') ? this.renderableEventStore : state.eventStore;\n    var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n    var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n    var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n\n    if (needsFull || !component) {\n      if (component) {\n        component.freezeHeight(); // next component will unfreeze it\n\n        component.destroy();\n      }\n\n      component = this.component = new CalendarComponent({\n        calendar: this,\n        view: null,\n        dateEnv: this.dateEnv,\n        theme: this.theme,\n        options: this.optionsManager.computed\n      }, this.el);\n      this.isViewUpdated = true;\n      this.isDatesUpdated = true;\n      this.isEventsUpdated = true;\n    }\n\n    component.receiveProps(_assign({}, state, {\n      viewSpec: viewSpec,\n      dateProfile: state.dateProfile,\n      dateProfileGenerator: this.dateProfileGenerators[viewType],\n      eventStore: renderableEventStore,\n      eventUiBases: eventUiBases,\n      dateSelection: state.dateSelection,\n      eventSelection: state.eventSelection,\n      eventDrag: state.eventDrag,\n      eventResize: state.eventResize\n    }));\n\n    if (savedScroll) {\n      component.view.applyScroll(savedScroll, false);\n    }\n\n    if (this.isViewUpdated) {\n      this.isViewUpdated = false;\n      this.publiclyTrigger('viewSkeletonRender', [{\n        view: component.view,\n        el: component.view.el\n      }]);\n    }\n\n    if (this.isDatesUpdated) {\n      this.isDatesUpdated = false;\n      this.publiclyTrigger('datesRender', [{\n        view: component.view,\n        el: component.view.el\n      }]);\n    }\n\n    if (this.isEventsUpdated) {\n      this.isEventsUpdated = false;\n    }\n\n    this.releaseAfterSizingTriggers();\n  }; // Options\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.setOption = function (name, val) {\n    var _a;\n\n    this.mutateOptions((_a = {}, _a[name] = val, _a), [], true);\n  };\n\n  Calendar.prototype.getOption = function (name) {\n    return this.optionsManager.computed[name];\n  };\n\n  Calendar.prototype.opt = function (name) {\n    return this.optionsManager.computed[name];\n  };\n\n  Calendar.prototype.viewOpt = function (name) {\n    return this.viewOpts()[name];\n  };\n\n  Calendar.prototype.viewOpts = function () {\n    return this.viewSpecs[this.state.viewType].options;\n  };\n  /*\n  handles option changes (like a diff)\n  */\n\n\n  Calendar.prototype.mutateOptions = function (updates, removals, isDynamic, deepEqual) {\n    var _this = this;\n\n    var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n    var normalUpdates = {};\n    var specialUpdates = {};\n    var oldDateEnv = this.dateEnv; // do this before handleOptions\n\n    var isTimeZoneDirty = false;\n    var isSizeDirty = false;\n    var anyDifficultOptions = Boolean(removals.length);\n\n    for (var name_1 in updates) {\n      if (changeHandlers[name_1]) {\n        specialUpdates[name_1] = updates[name_1];\n      } else {\n        normalUpdates[name_1] = updates[name_1];\n      }\n    }\n\n    for (var name_2 in normalUpdates) {\n      if (/^(height|contentHeight|aspectRatio)$/.test(name_2)) {\n        isSizeDirty = true;\n      } else if (/^(defaultDate|defaultView)$/.test(name_2)) ;else {\n        anyDifficultOptions = true;\n\n        if (name_2 === 'timeZone') {\n          isTimeZoneDirty = true;\n        }\n      }\n    }\n\n    this.optionsManager.mutate(normalUpdates, removals, isDynamic);\n\n    if (anyDifficultOptions) {\n      this.handleOptions(this.optionsManager.computed);\n      this.needsFullRerender = true;\n    }\n\n    this.batchRendering(function () {\n      if (anyDifficultOptions) {\n        if (isTimeZoneDirty) {\n          _this.dispatch({\n            type: 'CHANGE_TIMEZONE',\n            oldDateEnv: oldDateEnv\n          });\n        }\n        /* HACK\n        has the same effect as calling this.requestRerender(true)\n        but recomputes the state's dateProfile\n        */\n\n\n        _this.dispatch({\n          type: 'SET_VIEW_TYPE',\n          viewType: _this.state.viewType\n        });\n      } else if (isSizeDirty) {\n        _this.updateSize();\n      } // special updates\n\n\n      if (deepEqual) {\n        for (var name_3 in specialUpdates) {\n          changeHandlers[name_3](specialUpdates[name_3], _this, deepEqual);\n        }\n      }\n    });\n  };\n  /*\n  rebuilds things based off of a complete set of refined options\n  */\n\n\n  Calendar.prototype.handleOptions = function (options) {\n    var _this = this;\n\n    var pluginHooks = this.pluginSystem.hooks;\n    this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n    this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n    this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n    this.theme = this.buildTheme(options);\n    var available = this.parseRawLocales(options.locales);\n    this.availableRawLocales = available.map;\n    var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n    this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n    this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n    // ineffecient to do every time?\n\n    this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager); // ineffecient to do every time?\n\n    this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n      return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n    });\n  };\n\n  Calendar.prototype.getAvailableLocaleCodes = function () {\n    return Object.keys(this.availableRawLocales);\n  };\n\n  Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n    return processScopedUiProps('select', rawOpts, this);\n  };\n\n  Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n    if (rawOpts.editable) {\n      // so 'editable' affected events\n      rawOpts = _assign({}, rawOpts, {\n        eventEditable: true\n      });\n    }\n\n    return processScopedUiProps('event', rawOpts, this);\n  }; // Trigger\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.hasPublicHandlers = function (name) {\n    return this.hasHandlers(name) || this.opt(name); // handler specified in options\n  };\n\n  Calendar.prototype.publiclyTrigger = function (name, args) {\n    var optHandler = this.opt(name);\n    this.triggerWith(name, this, args);\n\n    if (optHandler) {\n      return optHandler.apply(this, args);\n    }\n  };\n\n  Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n    var afterSizingTriggers = this.afterSizingTriggers;\n    (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n  };\n\n  Calendar.prototype.releaseAfterSizingTriggers = function () {\n    var afterSizingTriggers = this.afterSizingTriggers;\n\n    for (var name_4 in afterSizingTriggers) {\n      for (var _i = 0, _a = afterSizingTriggers[name_4]; _i < _a.length; _i++) {\n        var args = _a[_i];\n        this.publiclyTrigger(name_4, args);\n      }\n    }\n\n    this.afterSizingTriggers = {};\n  }; // View\n  // -----------------------------------------------------------------------------------------------------------------\n  // Returns a boolean about whether the view is okay to instantiate at some point\n\n\n  Calendar.prototype.isValidViewType = function (viewType) {\n    return Boolean(this.viewSpecs[viewType]);\n  };\n\n  Calendar.prototype.changeView = function (viewType, dateOrRange) {\n    var dateMarker = null;\n\n    if (dateOrRange) {\n      if (dateOrRange.start && dateOrRange.end) {\n        // a range\n        this.optionsManager.mutate({\n          visibleRange: dateOrRange\n        }, []); // will not rerender\n\n        this.handleOptions(this.optionsManager.computed); // ...but yuck\n      } else {\n        // a date\n        dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n      }\n    }\n\n    this.unselect();\n    this.dispatch({\n      type: 'SET_VIEW_TYPE',\n      viewType: viewType,\n      dateMarker: dateMarker\n    });\n  }; // Forces navigation to a view for the given date.\n  // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n  // needs to change\n\n\n  Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n    var spec;\n    viewType = viewType || 'day'; // day is default zoom\n\n    spec = this.viewSpecs[viewType] || this.getUnitViewSpec(viewType);\n    this.unselect();\n\n    if (spec) {\n      this.dispatch({\n        type: 'SET_VIEW_TYPE',\n        viewType: spec.type,\n        dateMarker: dateMarker\n      });\n    } else {\n      this.dispatch({\n        type: 'SET_DATE',\n        dateMarker: dateMarker\n      });\n    }\n  }; // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n  // Preference is given to views that have corresponding buttons.\n\n\n  Calendar.prototype.getUnitViewSpec = function (unit) {\n    var component = this.component;\n    var viewTypes = [];\n    var i;\n    var spec; // put views that have buttons first. there will be duplicates, but oh\n\n    if (component.header) {\n      viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n    }\n\n    if (component.footer) {\n      viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n    }\n\n    for (var viewType in this.viewSpecs) {\n      viewTypes.push(viewType);\n    }\n\n    for (i = 0; i < viewTypes.length; i++) {\n      spec = this.viewSpecs[viewTypes[i]];\n\n      if (spec) {\n        if (spec.singleUnit === unit) {\n          return spec;\n        }\n      }\n    }\n  }; // Current Date\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.getInitialDate = function () {\n    var defaultDateInput = this.opt('defaultDate'); // compute the initial ambig-timezone date\n\n    if (defaultDateInput != null) {\n      return this.dateEnv.createMarker(defaultDateInput);\n    } else {\n      return this.getNow(); // getNow already returns unzoned\n    }\n  };\n\n  Calendar.prototype.prev = function () {\n    this.unselect();\n    this.dispatch({\n      type: 'PREV'\n    });\n  };\n\n  Calendar.prototype.next = function () {\n    this.unselect();\n    this.dispatch({\n      type: 'NEXT'\n    });\n  };\n\n  Calendar.prototype.prevYear = function () {\n    this.unselect();\n    this.dispatch({\n      type: 'SET_DATE',\n      dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n    });\n  };\n\n  Calendar.prototype.nextYear = function () {\n    this.unselect();\n    this.dispatch({\n      type: 'SET_DATE',\n      dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n    });\n  };\n\n  Calendar.prototype.today = function () {\n    this.unselect();\n    this.dispatch({\n      type: 'SET_DATE',\n      dateMarker: this.getNow()\n    });\n  };\n\n  Calendar.prototype.gotoDate = function (zonedDateInput) {\n    this.unselect();\n    this.dispatch({\n      type: 'SET_DATE',\n      dateMarker: this.dateEnv.createMarker(zonedDateInput)\n    });\n  };\n\n  Calendar.prototype.incrementDate = function (deltaInput) {\n    var delta = createDuration(deltaInput);\n\n    if (delta) {\n      // else, warn about invalid input?\n      this.unselect();\n      this.dispatch({\n        type: 'SET_DATE',\n        dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n      });\n    }\n  }; // for external API\n\n\n  Calendar.prototype.getDate = function () {\n    return this.dateEnv.toDate(this.state.currentDate);\n  }; // Date Formatting Utils\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.formatDate = function (d, formatter) {\n    var dateEnv = this.dateEnv;\n    return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n  }; // `settings` is for formatter AND isEndExclusive\n\n\n  Calendar.prototype.formatRange = function (d0, d1, settings) {\n    var dateEnv = this.dateEnv;\n    return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n  };\n\n  Calendar.prototype.formatIso = function (d, omitTime) {\n    var dateEnv = this.dateEnv;\n    return dateEnv.formatIso(dateEnv.createMarker(d), {\n      omitTime: omitTime\n    });\n  }; // Sizing\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.windowResize = function (ev) {\n    if (!this.isHandlingWindowResize && this.component && // why?\n    ev.target === window // not a jqui resize event\n    ) {\n        this.isHandlingWindowResize = true;\n        this.updateSize();\n        this.publiclyTrigger('windowResize', [this.view]);\n        this.isHandlingWindowResize = false;\n      }\n  };\n\n  Calendar.prototype.updateSize = function () {\n    if (this.component) {\n      // when?\n      this.component.updateSize(true);\n    }\n  }; // Component Registration\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n    var settings = parseInteractionSettings(component, settingsInput);\n    var DEFAULT_INTERACTIONS = [EventClicking, EventHovering];\n    var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n    var interactions = interactionClasses.map(function (interactionClass) {\n      return new interactionClass(settings);\n    });\n    this.interactionsStore[component.uid] = interactions;\n    interactionSettingsStore[component.uid] = settings;\n  };\n\n  Calendar.prototype.unregisterInteractiveComponent = function (component) {\n    for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n      var listener = _a[_i];\n      listener.destroy();\n    }\n\n    delete this.interactionsStore[component.uid];\n    delete interactionSettingsStore[component.uid];\n  }; // Date Selection / Event Selection / DayClick\n  // -----------------------------------------------------------------------------------------------------------------\n  // this public method receives start/end dates in any format, with any timezone\n  // NOTE: args were changed from v3\n\n\n  Calendar.prototype.select = function (dateOrObj, endDate) {\n    var selectionInput;\n\n    if (endDate == null) {\n      if (dateOrObj.start != null) {\n        selectionInput = dateOrObj;\n      } else {\n        selectionInput = {\n          start: dateOrObj,\n          end: null\n        };\n      }\n    } else {\n      selectionInput = {\n        start: dateOrObj,\n        end: endDate\n      };\n    }\n\n    var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({\n      days: 1\n    }) // TODO: cache this?\n    );\n\n    if (selection) {\n      // throw parse error otherwise?\n      this.dispatch({\n        type: 'SELECT_DATES',\n        selection: selection\n      });\n      this.triggerDateSelect(selection);\n    }\n  }; // public method\n\n\n  Calendar.prototype.unselect = function (pev) {\n    if (this.state.dateSelection) {\n      this.dispatch({\n        type: 'UNSELECT_DATES'\n      });\n      this.triggerDateUnselect(pev);\n    }\n  };\n\n  Calendar.prototype.triggerDateSelect = function (selection, pev) {\n    var arg = _assign({}, this.buildDateSpanApi(selection), {\n      jsEvent: pev ? pev.origEvent : null,\n      view: this.view\n    });\n\n    this.publiclyTrigger('select', [arg]);\n  };\n\n  Calendar.prototype.triggerDateUnselect = function (pev) {\n    this.publiclyTrigger('unselect', [{\n      jsEvent: pev ? pev.origEvent : null,\n      view: this.view\n    }]);\n  }; // TODO: receive pev?\n\n\n  Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n    var arg = _assign({}, this.buildDatePointApi(dateSpan), {\n      dayEl: dayEl,\n      jsEvent: ev,\n      // Is this always a mouse event? See #4655\n      view: view\n    });\n\n    this.publiclyTrigger('dateClick', [arg]);\n  };\n\n  Calendar.prototype.buildDatePointApi = function (dateSpan) {\n    var props = {};\n\n    for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n      var transform = _a[_i];\n\n      _assign(props, transform(dateSpan, this));\n    }\n\n    _assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n\n    return props;\n  };\n\n  Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n    var props = {};\n\n    for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n      var transform = _a[_i];\n\n      _assign(props, transform(dateSpan, this));\n    }\n\n    _assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n\n    return props;\n  }; // Date Utils\n  // -----------------------------------------------------------------------------------------------------------------\n  // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n\n\n  Calendar.prototype.getNow = function () {\n    var now = this.opt('now');\n\n    if (typeof now === 'function') {\n      now = now();\n    }\n\n    if (now == null) {\n      return this.dateEnv.createNowMarker();\n    }\n\n    return this.dateEnv.createMarker(now);\n  }; // Event-Date Utilities\n  // -----------------------------------------------------------------------------------------------------------------\n  // Given an event's allDay status and start date, return what its fallback end date should be.\n  // TODO: rename to computeDefaultEventEnd\n\n\n  Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n    var end = marker;\n\n    if (allDay) {\n      end = startOfDay(end);\n      end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n    } else {\n      end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n    }\n\n    return end;\n  }; // Public Events API\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n    if (eventInput instanceof EventApi) {\n      var def = eventInput._def;\n      var instance = eventInput._instance; // not already present? don't want to add an old snapshot\n\n      if (!this.state.eventStore.defs[def.defId]) {\n        this.dispatch({\n          type: 'ADD_EVENTS',\n          eventStore: eventTupleToStore({\n            def: def,\n            instance: instance\n          }) // TODO: better util for two args?\n\n        });\n      }\n\n      return eventInput;\n    }\n\n    var sourceId;\n\n    if (sourceInput instanceof EventSourceApi) {\n      sourceId = sourceInput.internalEventSource.sourceId;\n    } else if (sourceInput != null) {\n      var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n\n      if (!sourceApi) {\n        console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n\n        return null;\n      } else {\n        sourceId = sourceApi.internalEventSource.sourceId;\n      }\n    }\n\n    var tuple = parseEvent(eventInput, sourceId, this);\n\n    if (tuple) {\n      this.dispatch({\n        type: 'ADD_EVENTS',\n        eventStore: eventTupleToStore(tuple)\n      });\n      return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n    }\n\n    return null;\n  }; // TODO: optimize\n\n\n  Calendar.prototype.getEventById = function (id) {\n    var _a = this.state.eventStore,\n        defs = _a.defs,\n        instances = _a.instances;\n    id = String(id);\n\n    for (var defId in defs) {\n      var def = defs[defId];\n\n      if (def.publicId === id) {\n        if (def.recurringDef) {\n          return new EventApi(this, def, null);\n        } else {\n          for (var instanceId in instances) {\n            var instance = instances[instanceId];\n\n            if (instance.defId === def.defId) {\n              return new EventApi(this, def, instance);\n            }\n          }\n        }\n      }\n    }\n\n    return null;\n  };\n\n  Calendar.prototype.getEvents = function () {\n    var _a = this.state.eventStore,\n        defs = _a.defs,\n        instances = _a.instances;\n    var eventApis = [];\n\n    for (var id in instances) {\n      var instance = instances[id];\n      var def = defs[instance.defId];\n      eventApis.push(new EventApi(this, def, instance));\n    }\n\n    return eventApis;\n  };\n\n  Calendar.prototype.removeAllEvents = function () {\n    this.dispatch({\n      type: 'REMOVE_ALL_EVENTS'\n    });\n  };\n\n  Calendar.prototype.rerenderEvents = function () {\n    this.dispatch({\n      type: 'RESET_EVENTS'\n    });\n  }; // Public Event Sources API\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.getEventSources = function () {\n    var sourceHash = this.state.eventSources;\n    var sourceApis = [];\n\n    for (var internalId in sourceHash) {\n      sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n    }\n\n    return sourceApis;\n  };\n\n  Calendar.prototype.getEventSourceById = function (id) {\n    var sourceHash = this.state.eventSources;\n    id = String(id);\n\n    for (var sourceId in sourceHash) {\n      if (sourceHash[sourceId].publicId === id) {\n        return new EventSourceApi(this, sourceHash[sourceId]);\n      }\n    }\n\n    return null;\n  };\n\n  Calendar.prototype.addEventSource = function (sourceInput) {\n    if (sourceInput instanceof EventSourceApi) {\n      // not already present? don't want to add an old snapshot\n      if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n        this.dispatch({\n          type: 'ADD_EVENT_SOURCES',\n          sources: [sourceInput.internalEventSource]\n        });\n      }\n\n      return sourceInput;\n    }\n\n    var eventSource = parseEventSource(sourceInput, this);\n\n    if (eventSource) {\n      // TODO: error otherwise?\n      this.dispatch({\n        type: 'ADD_EVENT_SOURCES',\n        sources: [eventSource]\n      });\n      return new EventSourceApi(this, eventSource);\n    }\n\n    return null;\n  };\n\n  Calendar.prototype.removeAllEventSources = function () {\n    this.dispatch({\n      type: 'REMOVE_ALL_EVENT_SOURCES'\n    });\n  };\n\n  Calendar.prototype.refetchEvents = function () {\n    this.dispatch({\n      type: 'FETCH_EVENT_SOURCES'\n    });\n  }; // Scroll\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  Calendar.prototype.scrollToTime = function (timeInput) {\n    var duration = createDuration(timeInput);\n\n    if (duration) {\n      this.component.view.scrollToDuration(duration);\n    }\n  };\n\n  return Calendar;\n}();\n\nEmitterMixin.mixInto(Calendar); // for memoizers\n// -----------------------------------------------------------------------------------------------------------------\n\nfunction buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n  return new DateEnv({\n    calendarSystem: 'gregory',\n    timeZone: timeZone,\n    namedTimeZoneImpl: namedTimeZoneImpl,\n    locale: locale,\n    weekNumberCalculation: weekNumberCalculation,\n    firstDay: firstDay,\n    weekLabel: weekLabel,\n    cmdFormatter: cmdFormatter\n  });\n}\n\nfunction buildTheme(calendarOptions) {\n  var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n  return new themeClass(calendarOptions);\n}\n\nfunction buildDelayedRerender(wait) {\n  var func = this.tryRerender.bind(this);\n\n  if (wait != null) {\n    func = debounce(func, wait);\n  }\n\n  return func;\n}\n\nfunction buildEventUiBySource(eventSources) {\n  return mapHash(eventSources, function (eventSource) {\n    return eventSource.ui;\n  });\n}\n\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n  var eventUiBases = {\n    '': eventUiSingleBase\n  };\n\n  for (var defId in eventDefs) {\n    var def = eventDefs[defId];\n\n    if (def.sourceId && eventUiBySource[def.sourceId]) {\n      eventUiBases[defId] = eventUiBySource[def.sourceId];\n    }\n  }\n\n  return eventUiBases;\n}\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(context, viewSpec, dateProfileGenerator, parentEl) {\n    var _this = _super.call(this, context, createElement('div', {\n      className: 'fc-view fc-' + viewSpec.type + '-view'\n    }), true // isView (HACK)\n    ) || this;\n\n    _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n    _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n    _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n    _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n    _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n    _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n    _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n    _this.viewSpec = viewSpec;\n    _this.dateProfileGenerator = dateProfileGenerator;\n    _this.type = viewSpec.type;\n    _this.eventOrderSpecs = parseFieldSpecs(_this.opt('eventOrder'));\n    _this.nextDayThreshold = createDuration(_this.opt('nextDayThreshold'));\n    parentEl.appendChild(_this.el);\n\n    _this.initialize();\n\n    return _this;\n  }\n\n  View.prototype.initialize = function () {};\n\n  Object.defineProperty(View.prototype, \"activeStart\", {\n    // Date Setting/Unsetting\n    // -----------------------------------------------------------------------------------------------------------------\n    get: function get() {\n      return this.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(View.prototype, \"activeEnd\", {\n    get: function get() {\n      return this.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(View.prototype, \"currentStart\", {\n    get: function get() {\n      return this.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(View.prototype, \"currentEnd\", {\n    get: function get() {\n      return this.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n    },\n    enumerable: true,\n    configurable: true\n  }); // General Rendering\n  // -----------------------------------------------------------------------------------------------------------------\n\n  View.prototype.render = function (props) {\n    this.renderDatesMem(props.dateProfile);\n    this.renderBusinessHoursMem(props.businessHours);\n    this.renderDateSelectionMem(props.dateSelection);\n    this.renderEventsMem(props.eventStore);\n    this.renderEventSelectionMem(props.eventSelection);\n    this.renderEventDragMem(props.eventDrag);\n    this.renderEventResizeMem(props.eventResize);\n  };\n\n  View.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.renderDatesMem.unrender(); // should unrender everything else\n  }; // Sizing\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n    var calendar = this.calendar;\n\n    if (isResize || // HACKS...\n    calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated) {\n      // sort of the catch-all sizing\n      // anything that might cause dimension changes\n      this.updateBaseSize(isResize, viewHeight, isAuto);\n    }\n  };\n\n  View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {}; // Date Rendering\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderDatesWrap = function (dateProfile) {\n    this.renderDates(dateProfile);\n    this.addScroll({\n      duration: createDuration(this.opt('scrollTime'))\n    });\n    this.startNowIndicator(dateProfile); // shouldn't render yet because updateSize will be called soon\n  };\n\n  View.prototype.unrenderDatesWrap = function () {\n    this.stopNowIndicator();\n    this.unrenderDates();\n  };\n\n  View.prototype.renderDates = function (dateProfile) {};\n\n  View.prototype.unrenderDates = function () {}; // Business Hours\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderBusinessHours = function (businessHours) {};\n\n  View.prototype.unrenderBusinessHours = function () {}; // Date Selection\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderDateSelectionWrap = function (selection) {\n    if (selection) {\n      this.renderDateSelection(selection);\n    }\n  };\n\n  View.prototype.unrenderDateSelectionWrap = function (selection) {\n    if (selection) {\n      this.unrenderDateSelection(selection);\n    }\n  };\n\n  View.prototype.renderDateSelection = function (selection) {};\n\n  View.prototype.unrenderDateSelection = function (selection) {}; // Event Rendering\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderEvents = function (eventStore) {};\n\n  View.prototype.unrenderEvents = function () {}; // util for subclasses\n\n\n  View.prototype.sliceEvents = function (eventStore, allDay) {\n    var props = this.props;\n    return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.nextDayThreshold : null).fg;\n  };\n\n  View.prototype.computeEventDraggable = function (eventDef, eventUi) {\n    var transformers = this.calendar.pluginSystem.hooks.isDraggableTransformers;\n    var val = eventUi.startEditable;\n\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n      var transformer = transformers_1[_i];\n      val = transformer(val, eventDef, eventUi, this);\n    }\n\n    return val;\n  };\n\n  View.prototype.computeEventStartResizable = function (eventDef, eventUi) {\n    return eventUi.durationEditable && this.opt('eventResizableFromStart');\n  };\n\n  View.prototype.computeEventEndResizable = function (eventDef, eventUi) {\n    return eventUi.durationEditable;\n  }; // Event Selection\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderEventSelectionWrap = function (instanceId) {\n    if (instanceId) {\n      this.renderEventSelection(instanceId);\n    }\n  };\n\n  View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n    if (instanceId) {\n      this.unrenderEventSelection(instanceId);\n    }\n  };\n\n  View.prototype.renderEventSelection = function (instanceId) {};\n\n  View.prototype.unrenderEventSelection = function (instanceId) {}; // Event Drag\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderEventDragWrap = function (state) {\n    if (state) {\n      this.renderEventDrag(state);\n    }\n  };\n\n  View.prototype.unrenderEventDragWrap = function (state) {\n    if (state) {\n      this.unrenderEventDrag(state);\n    }\n  };\n\n  View.prototype.renderEventDrag = function (state) {};\n\n  View.prototype.unrenderEventDrag = function (state) {}; // Event Resize\n  // -----------------------------------------------------------------------------------------------------------------\n\n\n  View.prototype.renderEventResizeWrap = function (state) {\n    if (state) {\n      this.renderEventResize(state);\n    }\n  };\n\n  View.prototype.unrenderEventResizeWrap = function (state) {\n    if (state) {\n      this.unrenderEventResize(state);\n    }\n  };\n\n  View.prototype.renderEventResize = function (state) {};\n\n  View.prototype.unrenderEventResize = function (state) {};\n  /* Now Indicator\n  ------------------------------------------------------------------------------------------------------------------*/\n  // Immediately render the current time indicator and begins re-rendering it at an interval,\n  // which is defined by this.getNowIndicatorUnit().\n  // TODO: somehow do this for the current whole day's background too\n\n\n  View.prototype.startNowIndicator = function (dateProfile) {\n    var _this = this;\n\n    var dateEnv = this.dateEnv;\n    var unit;\n    var update;\n    var delay; // ms wait value\n\n    if (this.opt('nowIndicator')) {\n      unit = this.getNowIndicatorUnit(dateProfile);\n\n      if (unit) {\n        update = this.updateNowIndicator.bind(this);\n        this.initialNowDate = this.calendar.getNow();\n        this.initialNowQueriedMs = new Date().valueOf(); // wait until the beginning of the next interval\n\n        delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf(); // TODO: maybe always use setTimeout, waiting until start of next unit\n\n        this.nowIndicatorTimeoutID = setTimeout(function () {\n          _this.nowIndicatorTimeoutID = null;\n          update();\n\n          if (unit === 'second') {\n            delay = 1000; // every second\n          } else {\n            delay = 1000 * 60; // otherwise, every minute\n          }\n\n          _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n        }, delay);\n      } // rendering will be initiated in updateSize\n\n    }\n  }; // rerenders the now indicator, computing the new current time from the amount of time that has passed\n  // since the initial getNow call.\n\n\n  View.prototype.updateNowIndicator = function () {\n    if (this.props.dateProfile && // a way to determine if dates were rendered yet\n    this.initialNowDate // activated before?\n    ) {\n        this.unrenderNowIndicator(); // won't unrender if unnecessary\n\n        this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n        this.isNowIndicatorRendered = true;\n      }\n  }; // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n  // Won't cause side effects if indicator isn't rendered.\n\n\n  View.prototype.stopNowIndicator = function () {\n    if (this.isNowIndicatorRendered) {\n      if (this.nowIndicatorTimeoutID) {\n        clearTimeout(this.nowIndicatorTimeoutID);\n        this.nowIndicatorTimeoutID = null;\n      }\n\n      if (this.nowIndicatorIntervalID) {\n        clearInterval(this.nowIndicatorIntervalID);\n        this.nowIndicatorIntervalID = null;\n      }\n\n      this.unrenderNowIndicator();\n      this.isNowIndicatorRendered = false;\n    }\n  };\n\n  View.prototype.getNowIndicatorUnit = function (dateProfile) {// subclasses should implement\n  }; // Renders a current time indicator at the given datetime\n\n\n  View.prototype.renderNowIndicator = function (date) {// SUBCLASSES MUST PASS TO CHILDREN!\n  }; // Undoes the rendering actions from renderNowIndicator\n\n\n  View.prototype.unrenderNowIndicator = function () {// SUBCLASSES MUST PASS TO CHILDREN!\n  };\n  /* Scroller\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  View.prototype.addScroll = function (scroll) {\n    var queuedScroll = this.queuedScroll || (this.queuedScroll = {});\n\n    _assign(queuedScroll, scroll);\n  };\n\n  View.prototype.popScroll = function (isResize) {\n    this.applyQueuedScroll(isResize);\n    this.queuedScroll = null;\n  };\n\n  View.prototype.applyQueuedScroll = function (isResize) {\n    this.applyScroll(this.queuedScroll || {}, isResize);\n  };\n\n  View.prototype.queryScroll = function () {\n    var scroll = {};\n\n    if (this.props.dateProfile) {\n      // dates rendered yet?\n      _assign(scroll, this.queryDateScroll());\n    }\n\n    return scroll;\n  };\n\n  View.prototype.applyScroll = function (scroll, isResize) {\n    var duration = scroll.duration;\n\n    if (duration != null) {\n      delete scroll.duration;\n\n      if (this.props.dateProfile) {\n        // dates rendered yet?\n        _assign(scroll, this.computeDateScroll(duration));\n      }\n    }\n\n    if (this.props.dateProfile) {\n      // dates rendered yet?\n      this.applyDateScroll(scroll);\n    }\n  };\n\n  View.prototype.computeDateScroll = function (duration) {\n    return {}; // subclasses must implement\n  };\n\n  View.prototype.queryDateScroll = function () {\n    return {}; // subclasses must implement\n  };\n\n  View.prototype.applyDateScroll = function (scroll) {// subclasses must implement\n  }; // for API\n\n\n  View.prototype.scrollToDuration = function (duration) {\n    this.applyScroll({\n      duration: duration\n    }, false);\n  };\n\n  return View;\n}(DateComponent);\n\nEmitterMixin.mixInto(View);\nView.prototype.usesMinMaxTime = false;\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\nvar FgEventRenderer =\n/** @class */\nfunction () {\n  function FgEventRenderer(context) {\n    this.segs = [];\n    this.isSizeDirty = false;\n    this.context = context;\n  }\n\n  FgEventRenderer.prototype.renderSegs = function (segs, mirrorInfo) {\n    this.rangeUpdated(); // called too frequently :(\n    // render an `.el` on each seg\n    // returns a subset of the segs. segs that were actually rendered\n\n    segs = this.renderSegEls(segs, mirrorInfo);\n    this.segs = segs;\n    this.attachSegs(segs, mirrorInfo);\n    this.isSizeDirty = true;\n    this.context.view.triggerRenderedSegs(this.segs, Boolean(mirrorInfo));\n  };\n\n  FgEventRenderer.prototype.unrender = function (_segs, mirrorInfo) {\n    this.context.view.triggerWillRemoveSegs(this.segs, Boolean(mirrorInfo));\n    this.detachSegs(this.segs);\n    this.segs = [];\n  }; // Updates values that rely on options and also relate to range\n\n\n  FgEventRenderer.prototype.rangeUpdated = function () {\n    var options = this.context.options;\n    var displayEventTime;\n    var displayEventEnd;\n    this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n    displayEventTime = options.displayEventTime;\n\n    if (displayEventTime == null) {\n      displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n    }\n\n    displayEventEnd = options.displayEventEnd;\n\n    if (displayEventEnd == null) {\n      displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n    }\n\n    this.displayEventTime = displayEventTime;\n    this.displayEventEnd = displayEventEnd;\n  }; // Renders and assigns an `el` property for each foreground event segment.\n  // Only returns segments that successfully rendered.\n\n\n  FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n    var html = '';\n    var i;\n\n    if (segs.length) {\n      // don't build an empty html string\n      // build a large concatenation of event segment HTML\n      for (i = 0; i < segs.length; i++) {\n        html += this.renderSegHtml(segs[i], mirrorInfo);\n      } // Grab individual elements from the combined HTML string. Use each as the default rendering.\n      // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n\n\n      htmlToElements(html).forEach(function (el, i) {\n        var seg = segs[i];\n\n        if (el) {\n          seg.el = el;\n        }\n      });\n      segs = filterSegsViaEls(this.context.view, segs, Boolean(mirrorInfo));\n    }\n\n    return segs;\n  }; // Generic utility for generating the HTML classNames for an event segment's element\n\n\n  FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n    var classes = ['fc-event', seg.isStart ? 'fc-start' : 'fc-not-start', seg.isEnd ? 'fc-end' : 'fc-not-end'].concat(seg.eventRange.ui.classNames);\n\n    if (isDraggable) {\n      classes.push('fc-draggable');\n    }\n\n    if (isResizable) {\n      classes.push('fc-resizable');\n    }\n\n    if (mirrorInfo) {\n      classes.push('fc-mirror');\n\n      if (mirrorInfo.isDragging) {\n        classes.push('fc-dragging');\n      }\n\n      if (mirrorInfo.isResizing) {\n        classes.push('fc-resizing');\n      }\n    }\n\n    return classes;\n  }; // Compute the text that should be displayed on an event's element.\n  // `range` can be the Event object itself, or something range-like, with at least a `start`.\n  // If event times are disabled, or the event has no time, will return a blank string.\n  // If not specified, formatter will default to the eventTimeFormat setting,\n  // and displayEnd will default to the displayEventEnd setting.\n\n\n  FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n    var def = eventRange.def,\n        instance = eventRange.instance;\n    return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n  };\n\n  FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n    var dateEnv = this.context.dateEnv;\n\n    if (formatter == null) {\n      formatter = this.eventTimeFormat;\n    }\n\n    if (displayEnd == null) {\n      displayEnd = this.displayEventEnd;\n    }\n\n    if (this.displayEventTime && !allDay) {\n      if (displayEnd && end) {\n        return dateEnv.formatRange(start, end, formatter, {\n          forcedStartTzo: forcedStartTzo,\n          forcedEndTzo: forcedEndTzo\n        });\n      } else {\n        return dateEnv.format(start, formatter, {\n          forcedTzo: forcedStartTzo\n        });\n      }\n    }\n\n    return '';\n  };\n\n  FgEventRenderer.prototype.computeEventTimeFormat = function () {\n    return {\n      hour: 'numeric',\n      minute: '2-digit',\n      omitZeroMinute: true\n    };\n  };\n\n  FgEventRenderer.prototype.computeDisplayEventTime = function () {\n    return true;\n  };\n\n  FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return true;\n  }; // Utility for generating event skin-related CSS properties\n\n\n  FgEventRenderer.prototype.getSkinCss = function (ui) {\n    return {\n      'background-color': ui.backgroundColor,\n      'border-color': ui.borderColor,\n      color: ui.textColor\n    };\n  };\n\n  FgEventRenderer.prototype.sortEventSegs = function (segs) {\n    var specs = this.context.view.eventOrderSpecs;\n    var objs = segs.map(buildSegCompareObj);\n    objs.sort(function (obj0, obj1) {\n      return compareByFieldSpecs(obj0, obj1, specs);\n    });\n    return objs.map(function (c) {\n      return c._seg;\n    });\n  };\n\n  FgEventRenderer.prototype.computeSizes = function (force) {\n    if (force || this.isSizeDirty) {\n      this.computeSegSizes(this.segs);\n    }\n  };\n\n  FgEventRenderer.prototype.assignSizes = function (force) {\n    if (force || this.isSizeDirty) {\n      this.assignSegSizes(this.segs);\n      this.isSizeDirty = false;\n    }\n  };\n\n  FgEventRenderer.prototype.computeSegSizes = function (segs) {};\n\n  FgEventRenderer.prototype.assignSegSizes = function (segs) {}; // Manipulation on rendered segs\n\n\n  FgEventRenderer.prototype.hideByHash = function (hash) {\n    if (hash) {\n      for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n        var seg = _a[_i];\n\n        if (hash[seg.eventRange.instance.instanceId]) {\n          seg.el.style.visibility = 'hidden';\n        }\n      }\n    }\n  };\n\n  FgEventRenderer.prototype.showByHash = function (hash) {\n    if (hash) {\n      for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n        var seg = _a[_i];\n\n        if (hash[seg.eventRange.instance.instanceId]) {\n          seg.el.style.visibility = '';\n        }\n      }\n    }\n  };\n\n  FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n    if (instanceId) {\n      for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n        var seg = _a[_i];\n        var eventInstance = seg.eventRange.instance;\n\n        if (eventInstance && eventInstance.instanceId === instanceId && seg.el // necessary?\n        ) {\n            seg.el.classList.add('fc-selected');\n          }\n      }\n    }\n  };\n\n  FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n    if (instanceId) {\n      for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n        var seg = _a[_i];\n\n        if (seg.el) {\n          // necessary?\n          seg.el.classList.remove('fc-selected');\n        }\n      }\n    }\n  };\n\n  return FgEventRenderer;\n}(); // returns a object with all primitive props that can be compared\n\n\nfunction buildSegCompareObj(seg) {\n  var eventDef = seg.eventRange.def;\n  var range = seg.eventRange.instance.range;\n  var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n\n  var end = range.end ? range.end.valueOf() : 0; // \"\n\n  return _assign({}, eventDef.extendedProps, eventDef, {\n    id: eventDef.publicId,\n    start: start,\n    end: end,\n    duration: end - start,\n    allDay: Number(eventDef.allDay),\n    _seg: seg // for later retrieval\n\n  });\n}\n\nvar FillRenderer =\n/** @class */\nfunction () {\n  function FillRenderer(context) {\n    this.fillSegTag = 'div';\n    this.dirtySizeFlags = {};\n    this.context = context;\n    this.containerElsByType = {};\n    this.segsByType = {};\n  }\n\n  FillRenderer.prototype.getSegsByType = function (type) {\n    return this.segsByType[type] || [];\n  };\n\n  FillRenderer.prototype.renderSegs = function (type, segs) {\n    var _a;\n\n    var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n\n    var containerEls = this.attachSegs(type, renderedSegs);\n\n    if (containerEls) {\n      (_a = this.containerElsByType[type] || (this.containerElsByType[type] = [])).push.apply(_a, containerEls);\n    }\n\n    this.segsByType[type] = renderedSegs;\n\n    if (type === 'bgEvent') {\n      this.context.view.triggerRenderedSegs(renderedSegs, false); // isMirror=false\n    }\n\n    this.dirtySizeFlags[type] = true;\n  }; // Unrenders a specific type of fill that is currently rendered on the grid\n\n\n  FillRenderer.prototype.unrender = function (type) {\n    var segs = this.segsByType[type];\n\n    if (segs) {\n      if (type === 'bgEvent') {\n        this.context.view.triggerWillRemoveSegs(segs, false); // isMirror=false\n      }\n\n      this.detachSegs(type, segs);\n    }\n  }; // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n  // Only returns segments that successfully rendered.\n\n\n  FillRenderer.prototype.renderSegEls = function (type, segs) {\n    var _this = this;\n\n    var html = '';\n    var i;\n\n    if (segs.length) {\n      // build a large concatenation of segment HTML\n      for (i = 0; i < segs.length; i++) {\n        html += this.renderSegHtml(type, segs[i]);\n      } // Grab individual elements from the combined HTML string. Use each as the default rendering.\n      // Then, compute the 'el' for each segment.\n\n\n      htmlToElements(html).forEach(function (el, i) {\n        var seg = segs[i];\n\n        if (el) {\n          seg.el = el;\n        }\n      });\n\n      if (type === 'bgEvent') {\n        segs = filterSegsViaEls(this.context.view, segs, false // isMirror. background events can never be mirror elements\n        );\n      } // correct element type? (would be bad if a non-TD were inserted into a table for example)\n\n\n      segs = segs.filter(function (seg) {\n        return elementMatches(seg.el, _this.fillSegTag);\n      });\n    }\n\n    return segs;\n  }; // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n\n\n  FillRenderer.prototype.renderSegHtml = function (type, seg) {\n    var css = null;\n    var classNames = [];\n\n    if (type !== 'highlight' && type !== 'businessHours') {\n      css = {\n        'background-color': seg.eventRange.ui.backgroundColor\n      };\n    }\n\n    if (type !== 'highlight') {\n      classNames = classNames.concat(seg.eventRange.ui.classNames);\n    }\n\n    if (type === 'businessHours') {\n      classNames.push('fc-bgevent');\n    } else {\n      classNames.push('fc-' + type.toLowerCase());\n    }\n\n    return '<' + this.fillSegTag + (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') + (css ? ' style=\"' + cssToStr(css) + '\"' : '') + '></' + this.fillSegTag + '>';\n  };\n\n  FillRenderer.prototype.detachSegs = function (type, segs) {\n    var containerEls = this.containerElsByType[type];\n\n    if (containerEls) {\n      containerEls.forEach(removeElement);\n      delete this.containerElsByType[type];\n    }\n  };\n\n  FillRenderer.prototype.computeSizes = function (force) {\n    for (var type in this.segsByType) {\n      if (force || this.dirtySizeFlags[type]) {\n        this.computeSegSizes(this.segsByType[type]);\n      }\n    }\n  };\n\n  FillRenderer.prototype.assignSizes = function (force) {\n    for (var type in this.segsByType) {\n      if (force || this.dirtySizeFlags[type]) {\n        this.assignSegSizes(this.segsByType[type]);\n      }\n    }\n\n    this.dirtySizeFlags = {};\n  };\n\n  FillRenderer.prototype.computeSegSizes = function (segs) {};\n\n  FillRenderer.prototype.assignSegSizes = function (segs) {};\n\n  return FillRenderer;\n}();\n\nvar NamedTimeZoneImpl =\n/** @class */\nfunction () {\n  function NamedTimeZoneImpl(timeZoneName) {\n    this.timeZoneName = timeZoneName;\n  }\n\n  return NamedTimeZoneImpl;\n}();\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\n\n\nvar ElementDragging =\n/** @class */\nfunction () {\n  function ElementDragging(el) {\n    this.emitter = new EmitterMixin();\n  }\n\n  ElementDragging.prototype.destroy = function () {};\n\n  ElementDragging.prototype.setMirrorIsVisible = function (bool) {// optional if subclass doesn't want to support a mirror\n  };\n\n  ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {// optional if subclass doesn't want to support a mirror\n  };\n\n  ElementDragging.prototype.setAutoScrollEnabled = function (bool) {// optional\n  };\n\n  return ElementDragging;\n}();\n\nfunction formatDate(dateInput, settings) {\n  if (settings === void 0) {\n    settings = {};\n  }\n\n  var dateEnv = buildDateEnv$1(settings);\n  var formatter = createFormatter(settings);\n  var dateMeta = dateEnv.createMarkerMeta(dateInput);\n\n  if (!dateMeta) {\n    // TODO: warning?\n    return '';\n  }\n\n  return dateEnv.format(dateMeta.marker, formatter, {\n    forcedTzo: dateMeta.forcedTzo\n  });\n}\n\nfunction formatRange(startInput, endInput, settings // mixture of env and formatter settings\n) {\n  var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n\n  var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n  var startMeta = dateEnv.createMarkerMeta(startInput);\n  var endMeta = dateEnv.createMarkerMeta(endInput);\n\n  if (!startMeta || !endMeta) {\n    // TODO: warning?\n    return '';\n  }\n\n  return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n    forcedStartTzo: startMeta.forcedTzo,\n    forcedEndTzo: endMeta.forcedTzo,\n    isEndExclusive: settings.isEndExclusive\n  });\n} // TODO: more DRY and optimized\n\n\nfunction buildDateEnv$1(settings) {\n  var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n  // ensure required settings\n\n  settings = _assign({\n    timeZone: globalDefaults.timeZone,\n    calendarSystem: 'gregory'\n  }, settings, {\n    locale: locale\n  });\n  return new DateEnv(settings);\n}\n\nvar DRAG_META_PROPS = {\n  startTime: createDuration,\n  duration: createDuration,\n  create: Boolean,\n  sourceId: String\n};\nvar DRAG_META_DEFAULTS = {\n  create: true\n};\n\nfunction parseDragMeta(raw) {\n  var leftoverProps = {};\n  var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n  refined.leftoverProps = leftoverProps;\n  return refined;\n} // Computes a default column header formatting string if `colFormat` is not explicitly defined\n\n\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n  // if more than one week row, or if there are a lot of columns with not much space,\n  // put just the day numbers will be in each cell\n  if (!datesRepDistinctDays || dayCnt > 10) {\n    return {\n      weekday: 'short'\n    }; // \"Sat\"\n  } else if (dayCnt > 1) {\n    return {\n      weekday: 'short',\n      month: 'numeric',\n      day: 'numeric',\n      omitCommas: true\n    }; // \"Sat 11/12\"\n  } else {\n    return {\n      weekday: 'long'\n    }; // \"Saturday\"\n  }\n}\n\nfunction renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n  var view = context.view,\n      dateEnv = context.dateEnv,\n      theme = context.theme,\n      options = context.options;\n  var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n\n  var classNames = ['fc-day-header', theme.getClass('widgetHeader')];\n  var innerHtml;\n\n  if (typeof options.columnHeaderHtml === 'function') {\n    innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n  } else if (typeof options.columnHeaderText === 'function') {\n    innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n  } else {\n    innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n  } // if only one row of days, the classNames on the header can represent the specific days beneath\n\n\n  if (datesRepDistinctDays) {\n    classNames = classNames.concat( // includes the day-of-week class\n    // noThemeHighlight=true (don't highlight the header)\n    getDayClasses(dateMarker, dateProfile, context, true));\n  } else {\n    classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n  }\n\n  return '' + '<th class=\"' + classNames.join(' ') + '\"' + (isDateValid && datesRepDistinctDays ? ' data-date=\"' + dateEnv.formatIso(dateMarker, {\n    omitTime: true\n  }) + '\"' : '') + (colspan > 1 ? ' colspan=\"' + colspan + '\"' : '') + (otherAttrs ? ' ' + otherAttrs : '') + '>' + (isDateValid ? // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n  buildGotoAnchorHtml(view, {\n    date: dateMarker,\n    forceOff: !datesRepDistinctDays || colCnt === 1\n  }, innerHtml) : // if not valid, display text, but no link\n  innerHtml) + '</th>';\n}\n\nvar DayHeader =\n/** @class */\nfunction (_super) {\n  __extends(DayHeader, _super);\n\n  function DayHeader(context, parentEl) {\n    var _this = _super.call(this, context) || this;\n\n    parentEl.innerHTML = ''; // because might be nbsp\n\n    parentEl.appendChild(_this.el = htmlToElement('<div class=\"fc-row ' + _this.theme.getClass('headerRow') + '\">' + '<table class=\"' + _this.theme.getClass('tableGrid') + '\">' + '<thead></thead>' + '</table>' + '</div>'));\n    _this.thead = _this.el.querySelector('thead');\n    return _this;\n  }\n\n  DayHeader.prototype.destroy = function () {\n    removeElement(this.el);\n  };\n\n  DayHeader.prototype.render = function (props) {\n    var dates = props.dates,\n        datesRepDistinctDays = props.datesRepDistinctDays;\n    var parts = [];\n\n    if (props.renderIntroHtml) {\n      parts.push(props.renderIntroHtml());\n    }\n\n    var colHeadFormat = createFormatter(this.opt('columnHeaderFormat') || computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n\n    for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n      var date = dates_1[_i];\n      parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, this.context));\n    }\n\n    if (this.isRtl) {\n      parts.reverse();\n    }\n\n    this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n  };\n\n  return DayHeader;\n}(Component);\n\nvar DaySeries =\n/** @class */\nfunction () {\n  function DaySeries(range, dateProfileGenerator) {\n    var date = range.start;\n    var end = range.end;\n    var indices = [];\n    var dates = [];\n    var dayIndex = -1;\n\n    while (date < end) {\n      // loop each day from start to end\n      if (dateProfileGenerator.isHiddenDay(date)) {\n        indices.push(dayIndex + 0.5); // mark that it's between indices\n      } else {\n        dayIndex++;\n        indices.push(dayIndex);\n        dates.push(date);\n      }\n\n      date = addDays(date, 1);\n    }\n\n    this.dates = dates;\n    this.indices = indices;\n    this.cnt = dates.length;\n  }\n\n  DaySeries.prototype.sliceRange = function (range) {\n    var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n\n    var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n\n    var clippedFirstIndex = Math.max(0, firstIndex);\n    var clippedLastIndex = Math.min(this.cnt - 1, lastIndex); // deal with in-between indices\n\n    clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n\n    clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n\n    if (clippedFirstIndex <= clippedLastIndex) {\n      return {\n        firstIndex: clippedFirstIndex,\n        lastIndex: clippedLastIndex,\n        isStart: firstIndex === clippedFirstIndex,\n        isEnd: lastIndex === clippedLastIndex\n      };\n    } else {\n      return null;\n    }\n  }; // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n  // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n  // If before the first offset, returns a negative number.\n  // If after the last offset, returns an offset past the last cell offset.\n  // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n\n\n  DaySeries.prototype.getDateDayIndex = function (date) {\n    var indices = this.indices;\n    var dayOffset = Math.floor(diffDays(this.dates[0], date));\n\n    if (dayOffset < 0) {\n      return indices[0] - 1;\n    } else if (dayOffset >= indices.length) {\n      return indices[indices.length - 1] + 1;\n    } else {\n      return indices[dayOffset];\n    }\n  };\n\n  return DaySeries;\n}();\n\nvar DayTable =\n/** @class */\nfunction () {\n  function DayTable(daySeries, breakOnWeeks) {\n    var dates = daySeries.dates;\n    var daysPerRow;\n    var firstDay;\n    var rowCnt;\n\n    if (breakOnWeeks) {\n      // count columns until the day-of-week repeats\n      firstDay = dates[0].getUTCDay();\n\n      for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n        if (dates[daysPerRow].getUTCDay() === firstDay) {\n          break;\n        }\n      }\n\n      rowCnt = Math.ceil(dates.length / daysPerRow);\n    } else {\n      rowCnt = 1;\n      daysPerRow = dates.length;\n    }\n\n    this.rowCnt = rowCnt;\n    this.colCnt = daysPerRow;\n    this.daySeries = daySeries;\n    this.cells = this.buildCells();\n    this.headerDates = this.buildHeaderDates();\n  }\n\n  DayTable.prototype.buildCells = function () {\n    var rows = [];\n\n    for (var row = 0; row < this.rowCnt; row++) {\n      var cells = [];\n\n      for (var col = 0; col < this.colCnt; col++) {\n        cells.push(this.buildCell(row, col));\n      }\n\n      rows.push(cells);\n    }\n\n    return rows;\n  };\n\n  DayTable.prototype.buildCell = function (row, col) {\n    return {\n      date: this.daySeries.dates[row * this.colCnt + col]\n    };\n  };\n\n  DayTable.prototype.buildHeaderDates = function () {\n    var dates = [];\n\n    for (var col = 0; col < this.colCnt; col++) {\n      dates.push(this.cells[0][col].date);\n    }\n\n    return dates;\n  };\n\n  DayTable.prototype.sliceRange = function (range) {\n    var colCnt = this.colCnt;\n    var seriesSeg = this.daySeries.sliceRange(range);\n    var segs = [];\n\n    if (seriesSeg) {\n      var firstIndex = seriesSeg.firstIndex,\n          lastIndex = seriesSeg.lastIndex;\n      var index = firstIndex;\n\n      while (index <= lastIndex) {\n        var row = Math.floor(index / colCnt);\n        var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n        segs.push({\n          row: row,\n          firstCol: index % colCnt,\n          lastCol: (nextIndex - 1) % colCnt,\n          isStart: seriesSeg.isStart && index === firstIndex,\n          isEnd: seriesSeg.isEnd && nextIndex - 1 === lastIndex\n        });\n        index = nextIndex;\n      }\n    }\n\n    return segs;\n  };\n\n  return DayTable;\n}();\n\nvar Slicer =\n/** @class */\nfunction () {\n  function Slicer() {\n    this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n    this.sliceDateSelection = memoize(this._sliceDateSpan);\n    this.sliceEventStore = memoize(this._sliceEventStore);\n    this.sliceEventDrag = memoize(this._sliceInteraction);\n    this.sliceEventResize = memoize(this._sliceInteraction);\n  }\n\n  Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, component) {\n    var extraArgs = [];\n\n    for (var _i = 4; _i < arguments.length; _i++) {\n      extraArgs[_i - 4] = arguments[_i];\n    }\n\n    var eventUiBases = props.eventUiBases;\n    var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n    return {\n      dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n      businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n      fgEventSegs: eventSegs.fg,\n      bgEventSegs: eventSegs.bg,\n      eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n      eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n      eventSelection: props.eventSelection\n    }; // TODO: give interactionSegs?\n  };\n\n  Slicer.prototype.sliceNowDate = function ( // does not memoize\n  date, component) {\n    var extraArgs = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      extraArgs[_i - 2] = arguments[_i];\n    }\n\n    return this._sliceDateSpan.apply(this, [{\n      range: {\n        start: date,\n        end: addMs(date, 1)\n      },\n      allDay: false\n    }, {}, component].concat(extraArgs));\n  };\n\n  Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, component) {\n    var extraArgs = [];\n\n    for (var _i = 4; _i < arguments.length; _i++) {\n      extraArgs[_i - 4] = arguments[_i];\n    }\n\n    if (!businessHours) {\n      return [];\n    }\n\n    return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), component.calendar), {}, dateProfile, nextDayThreshold, component].concat(extraArgs)).bg;\n  };\n\n  Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n    var extraArgs = [];\n\n    for (var _i = 5; _i < arguments.length; _i++) {\n      extraArgs[_i - 5] = arguments[_i];\n    }\n\n    if (eventStore) {\n      var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n      return {\n        bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n        fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n      };\n    } else {\n      return {\n        bg: [],\n        fg: []\n      };\n    }\n  };\n\n  Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n    var extraArgs = [];\n\n    for (var _i = 5; _i < arguments.length; _i++) {\n      extraArgs[_i - 5] = arguments[_i];\n    }\n\n    if (!interaction) {\n      return null;\n    }\n\n    var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n    return {\n      segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n      affectedInstances: interaction.affectedEvents.instances,\n      isEvent: interaction.isEvent,\n      sourceSeg: interaction.origSeg\n    };\n  };\n\n  Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n    var extraArgs = [];\n\n    for (var _i = 3; _i < arguments.length; _i++) {\n      extraArgs[_i - 3] = arguments[_i];\n    }\n\n    if (!dateSpan) {\n      return [];\n    }\n\n    var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.calendar);\n    var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n\n    for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n      var seg = segs_1[_a];\n      seg.component = component;\n      seg.eventRange = eventRange;\n    }\n\n    return segs;\n  };\n  /*\n  \"complete\" seg means it has component and eventRange\n  */\n\n\n  Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n  extraArgs) {\n    var segs = [];\n\n    for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n      var eventRange = eventRanges_1[_i];\n      segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n    }\n\n    return segs;\n  };\n  /*\n  \"complete\" seg means it has component and eventRange\n  */\n\n\n  Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n  extraArgs) {\n    var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      seg.component = component;\n      seg.eventRange = eventRange;\n      seg.isStart = eventRange.isStart && seg.isStart;\n      seg.isEnd = eventRange.isEnd && seg.isEnd;\n    }\n\n    return segs;\n  };\n\n  return Slicer;\n}();\n/*\nfor incorporating minTime/maxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\n\n\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n  var range = dateProfile.activeRange;\n\n  if (isComponentAllDay) {\n    return range;\n  }\n\n  return {\n    start: addMs(range.start, dateProfile.minTime.milliseconds),\n    end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n\n  };\n} // exports\n// --------------------------------------------------------------------------------------------------\n\n\nvar version = '4.3.1';\nexport { Calendar, Component, DateComponent, DateEnv, DateProfileGenerator, DayHeader, DaySeries, DayTable, ElementDragging, ElementScrollController, EmitterMixin, EventApi, FgEventRenderer, FillRenderer, Interaction, Mixin, NamedTimeZoneImpl, PositionCache, ScrollComponent, ScrollController, Slicer, Splitter, Theme, View, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, appendToElement, applyAll, applyMutationToEventStore, applyStyle, applyStyleProp, asRoughMinutes, asRoughMs, asRoughSeconds, buildGotoAnchorHtml, buildSegCompareObj, capitaliseFirstLetter, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compensateScroll, computeClippingRect, computeEdges, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeVisibleDayRange, config, constrainPoint, createDuration, createElement, createEmptyEventStore, createEventInstance, createFormatter, createPlugin, cssToStr, debounce, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, distributeHeight, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findChildren, findElements, flexibleCompare, forceClassName, formatDate, formatIsoTimeString, formatRange, getAllDayHtml, getClippingParents, getDayClasses, getElSeg, getRectCenter, getRelevantEvents, globalDefaults, greatestDurationDenominator, hasBgRendering, htmlEscape, htmlToElement, insertAfterElement, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, isArraysEqual, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isSingleDay, isValidDate, listenBySelector, mapHash, matchCellWidths, memoize, memoizeOutput, memoizeRendering, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, prependToElement, preventContextMenu, preventDefault, preventSelection, processScopedUiProps, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineProps, removeElement, removeExact, renderDateCell, requestJson, sliceEventStore, startOfDay, subtractInnerElHeight, translateRect, uncompensateScroll, undistributeHeight, unpromisify, version, whenTransitionDone, wholeDivideDurations };","/*\nFullCalendar React Component v4.3.0\nDocs: https://fullcalendar.io/docs/react\nLicense: MIT\n*/\nimport deepEqual from 'fast-deep-equal';\nimport { createElement, createRef, Component } from 'react';\nimport { Calendar } from '@fullcalendar/core';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar FullCalendar =\n/** @class */\nfunction (_super) {\n  __extends(FullCalendar, _super);\n\n  function FullCalendar() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.elRef = createRef();\n    return _this;\n  }\n\n  FullCalendar.prototype.render = function () {\n    return createElement(\"div\", {\n      ref: this.elRef\n    });\n  };\n\n  FullCalendar.prototype.componentDidMount = function () {\n    this.calendar = new Calendar(this.elRef.current, this.props);\n    this.calendar.render();\n  };\n\n  FullCalendar.prototype.componentDidUpdate = function (oldProps) {\n    var props = this.props;\n    var updates = {};\n    var removals = [];\n\n    for (var propName in oldProps) {\n      if (!(propName in props)) {\n        removals.push(propName);\n      }\n    }\n    /*\n    Do a deep-comparison for prop changes. We do this because often times the parent component will pass in\n    an object literal that generates a new reference every time its render() function runs.\n    This isn't too much of a performance hit because normally these object literals are rather small.\n    For larger data, the parent component will almost definitely generate a new reference on every mutation,\n    because immutable prop data is the norm in React-world, making the deepEqual function execute really fast.\n    */\n\n\n    for (var propName in props) {\n      if (!deepEqual(props[propName], oldProps[propName])) {\n        updates[propName] = props[propName];\n      }\n    }\n\n    this.calendar.mutateOptions(updates, removals, false, deepEqual);\n  };\n\n  FullCalendar.prototype.componentWillUnmount = function () {\n    this.calendar.destroy();\n  };\n\n  FullCalendar.prototype.getApi = function () {\n    return this.calendar;\n  };\n\n  return FullCalendar;\n}(Component);\n\nexport default FullCalendar;","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a),\n        arrB = isArray(b),\n        i,\n        length,\n        key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n    var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    var keys = keyList(a);\n    length = keys.length;\n    if (length !== keyList(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!hasProp.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n};","/*!\nFullCalendar Day Grid Plugin v4.3.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, memoize, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nvar DayGridDateProfileGenerator =\n/** @class */\nfunction (_super) {\n  __extends(DayGridDateProfileGenerator, _super);\n\n  function DayGridDateProfileGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Computes the date range that will be rendered.\n\n\n  DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n    var dateEnv = this.dateEnv;\n\n    var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n\n    var start = renderRange.start;\n    var end = renderRange.end;\n    var endOfWeek; // year and month views should be aligned with weeks. this is already done for week\n\n    if (/^(year|month)$/.test(currentRangeUnit)) {\n      start = dateEnv.startOfWeek(start); // make end-of-week if not already\n\n      endOfWeek = dateEnv.startOfWeek(end);\n\n      if (endOfWeek.valueOf() !== end.valueOf()) {\n        end = addWeeks(endOfWeek, 1);\n      }\n    } // ensure 6 weeks\n\n\n    if (this.options.monthMode && this.options.fixedWeekCount) {\n      var rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n      diffWeeks(start, end));\n      end = addWeeks(end, 6 - rowCnt);\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return DayGridDateProfileGenerator;\n}(DateProfileGenerator);\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\n\n\nvar Popover =\n/** @class */\nfunction () {\n  function Popover(options) {\n    var _this = this;\n\n    this.isHidden = true;\n    this.margin = 10; // the space required between the popover and the edges of the scroll container\n    // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\n    this.documentMousedown = function (ev) {\n      // only hide the popover if the click happened outside the popover\n      if (_this.el && !_this.el.contains(ev.target)) {\n        _this.hide();\n      }\n    };\n\n    this.options = options;\n  } // Shows the popover on the specified position. Renders it if not already\n\n\n  Popover.prototype.show = function () {\n    if (this.isHidden) {\n      if (!this.el) {\n        this.render();\n      }\n\n      this.el.style.display = '';\n      this.position();\n      this.isHidden = false;\n      this.trigger('show');\n    }\n  }; // Hides the popover, through CSS, but does not remove it from the DOM\n\n\n  Popover.prototype.hide = function () {\n    if (!this.isHidden) {\n      this.el.style.display = 'none';\n      this.isHidden = true;\n      this.trigger('hide');\n    }\n  }; // Creates `this.el` and renders content inside of it\n\n\n  Popover.prototype.render = function () {\n    var _this = this;\n\n    var options = this.options;\n    var el = this.el = createElement('div', {\n      className: 'fc-popover ' + (options.className || ''),\n      style: {\n        top: '0',\n        left: '0'\n      }\n    });\n\n    if (typeof options.content === 'function') {\n      options.content(el);\n    }\n\n    options.parentEl.appendChild(el); // when a click happens on anything inside with a 'fc-close' className, hide the popover\n\n    listenBySelector(el, 'click', '.fc-close', function (ev) {\n      _this.hide();\n    });\n\n    if (options.autoHide) {\n      document.addEventListener('mousedown', this.documentMousedown);\n    }\n  }; // Hides and unregisters any handlers\n\n\n  Popover.prototype.destroy = function () {\n    this.hide();\n\n    if (this.el) {\n      removeElement(this.el);\n      this.el = null;\n    }\n\n    document.removeEventListener('mousedown', this.documentMousedown);\n  }; // Positions the popover optimally, using the top/left/right options\n\n\n  Popover.prototype.position = function () {\n    var options = this.options;\n    var el = this.el;\n    var elDims = el.getBoundingClientRect(); // only used for width,height\n\n    var origin = computeRect(el.offsetParent);\n    var clippingRect = computeClippingRect(options.parentEl);\n    var top; // the \"position\" (not \"offset\") values for the popover\n\n    var left; //\n    // compute top and left\n\n    top = options.top || 0;\n\n    if (options.left !== undefined) {\n      left = options.left;\n    } else if (options.right !== undefined) {\n      left = options.right - elDims.width; // derive the left value from the right value\n    } else {\n      left = 0;\n    } // constrain to the view port. if constrained by two edges, give precedence to top/left\n\n\n    top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n    top = Math.max(top, clippingRect.top + this.margin);\n    left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n    left = Math.max(left, clippingRect.left + this.margin);\n    applyStyle(el, {\n      top: top - origin.top,\n      left: left - origin.left\n    });\n  }; // Triggers a callback. Calls a function in the option hash of the same name.\n  // Arguments beyond the first `name` are forwarded on.\n  // TODO: better code reuse for this. Repeat code\n  // can kill this???\n\n\n  Popover.prototype.trigger = function (name) {\n    if (this.options[name]) {\n      this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n  };\n\n  return Popover;\n}();\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n\n\nvar SimpleDayGridEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(SimpleDayGridEventRenderer, _super);\n\n  function SimpleDayGridEventRenderer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Builds the HTML to be used for the default element for an individual segment\n\n\n  SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n    var _a = this.context,\n        view = _a.view,\n        options = _a.options;\n    var eventRange = seg.eventRange;\n    var eventDef = eventRange.def;\n    var eventUi = eventRange.ui;\n    var allDay = eventDef.allDay;\n    var isDraggable = view.computeEventDraggable(eventDef, eventUi);\n    var isResizableFromStart = allDay && seg.isStart && view.computeEventStartResizable(eventDef, eventUi);\n    var isResizableFromEnd = allDay && seg.isEnd && view.computeEventEndResizable(eventDef, eventUi);\n    var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n    var skinCss = cssToStr(this.getSkinCss(eventUi));\n    var timeHtml = '';\n    var timeText;\n    var titleHtml;\n    classes.unshift('fc-day-grid-event', 'fc-h-event'); // Only display a timed events time if it is the starting segment\n\n    if (seg.isStart) {\n      timeText = this.getTimeText(eventRange);\n\n      if (timeText) {\n        timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n      }\n    }\n\n    titleHtml = '<span class=\"fc-title\">' + (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n    '</span>';\n    return '<a class=\"' + classes.join(' ') + '\"' + (eventDef.url ? ' href=\"' + htmlEscape(eventDef.url) + '\"' : '') + (skinCss ? ' style=\"' + skinCss + '\"' : '') + '>' + '<div class=\"fc-content\">' + (options.dir === 'rtl' ? titleHtml + ' ' + timeHtml : // put a natural space in between\n    timeHtml + ' ' + titleHtml //\n    ) + '</div>' + (isResizableFromStart ? '<div class=\"fc-resizer fc-start-resizer\"></div>' : '') + (isResizableFromEnd ? '<div class=\"fc-resizer fc-end-resizer\"></div>' : '') + '</a>';\n  }; // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n\n\n  SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n    return {\n      hour: 'numeric',\n      minute: '2-digit',\n      omitZeroMinute: true,\n      meridiem: 'narrow'\n    };\n  };\n\n  SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return false; // TODO: somehow consider the originating DayGrid's column count\n  };\n\n  return SimpleDayGridEventRenderer;\n}(FgEventRenderer);\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nvar DayGridEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridEventRenderer, _super);\n\n  function DayGridEventRenderer(dayGrid) {\n    var _this = _super.call(this, dayGrid.context) || this;\n\n    _this.dayGrid = dayGrid;\n    return _this;\n  } // Renders the given foreground event segments onto the grid\n\n\n  DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n    var rowStructs = this.rowStructs = this.renderSegRows(segs); // append to each row's content skeleton\n\n    this.dayGrid.rowEls.forEach(function (rowNode, i) {\n      rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n    }); // removes the \"more..\" events popover\n\n    if (!mirrorInfo) {\n      this.dayGrid.removeSegPopover();\n    }\n  }; // Unrenders all currently rendered foreground event segments\n\n\n  DayGridEventRenderer.prototype.detachSegs = function () {\n    var rowStructs = this.rowStructs || [];\n    var rowStruct;\n\n    while (rowStruct = rowStructs.pop()) {\n      removeElement(rowStruct.tbodyEl);\n    }\n\n    this.rowStructs = null;\n  }; // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n  // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n  // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\n\n  DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n    var rowStructs = [];\n    var segRows;\n    var row;\n    segRows = this.groupSegRows(segs); // group into nested arrays\n    // iterate each row of segment groupings\n\n    for (row = 0; row < segRows.length; row++) {\n      rowStructs.push(this.renderSegRow(row, segRows[row]));\n    }\n\n    return rowStructs;\n  }; // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n  // the segments. Returns object with a bunch of internal data about how the render was calculated.\n  // NOTE: modifies rowSegs\n\n\n  DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n    var dayGrid = this.dayGrid;\n    var colCnt = dayGrid.colCnt,\n        isRtl = dayGrid.isRtl;\n    var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\n    var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\n    var tbody = document.createElement('tbody');\n    var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\n    var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\n    var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\n    var i;\n    var levelSegs;\n    var col;\n    var tr;\n    var j;\n    var seg;\n    var td; // populates empty cells from the current column (`col`) to `endCol`\n\n    function emptyCellsUntil(endCol) {\n      while (col < endCol) {\n        // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n        td = (loneCellMatrix[i - 1] || [])[col];\n\n        if (td) {\n          td.rowSpan = (td.rowSpan || 1) + 1;\n        } else {\n          td = document.createElement('td');\n          tr.appendChild(td);\n        }\n\n        cellMatrix[i][col] = td;\n        loneCellMatrix[i][col] = td;\n        col++;\n      }\n    }\n\n    for (i = 0; i < levelCnt; i++) {\n      // iterate through all levels\n      levelSegs = segLevels[i];\n      col = 0;\n      tr = document.createElement('tr');\n      segMatrix.push([]);\n      cellMatrix.push([]);\n      loneCellMatrix.push([]); // levelCnt might be 1 even though there are no actual levels. protect against this.\n      // this single empty row is useful for styling.\n\n      if (levelSegs) {\n        for (j = 0; j < levelSegs.length; j++) {\n          // iterate through segments in level\n          seg = levelSegs[j];\n          var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n          var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n          emptyCellsUntil(leftCol); // create a container that occupies or more columns. append the event element.\n\n          td = createElement('td', {\n            className: 'fc-event-container'\n          }, seg.el);\n\n          if (leftCol !== rightCol) {\n            td.colSpan = rightCol - leftCol + 1;\n          } else {\n            // a single-column segment\n            loneCellMatrix[i][col] = td;\n          }\n\n          while (col <= rightCol) {\n            cellMatrix[i][col] = td;\n            segMatrix[i][col] = seg;\n            col++;\n          }\n\n          tr.appendChild(td);\n        }\n      }\n\n      emptyCellsUntil(colCnt); // finish off the row\n\n      var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n      if (introHtml) {\n        if (dayGrid.isRtl) {\n          appendToElement(tr, introHtml);\n        } else {\n          prependToElement(tr, introHtml);\n        }\n      }\n\n      tbody.appendChild(tr);\n    }\n\n    return {\n      row: row,\n      tbodyEl: tbody,\n      cellMatrix: cellMatrix,\n      segMatrix: segMatrix,\n      segLevels: segLevels,\n      segs: rowSegs\n    };\n  }; // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n  // NOTE: modifies segs\n\n\n  DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n    var _a = this.dayGrid,\n        isRtl = _a.isRtl,\n        colCnt = _a.colCnt;\n    var levels = [];\n    var i;\n    var seg;\n    var j; // Give preference to elements with certain criteria, so they have\n    // a chance to be closer to the top.\n\n    segs = this.sortEventSegs(segs);\n\n    for (i = 0; i < segs.length; i++) {\n      seg = segs[i]; // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\n      for (j = 0; j < levels.length; j++) {\n        if (!isDaySegCollision(seg, levels[j])) {\n          break;\n        }\n      } // `j` now holds the desired subrow index\n\n\n      seg.level = j;\n      seg.leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol; // for sorting only\n\n      seg.rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol // for sorting only\n      ;\n      (levels[j] || (levels[j] = [])).push(seg);\n    } // order segments left-to-right. very important if calendar is RTL\n\n\n    for (j = 0; j < levels.length; j++) {\n      levels[j].sort(compareDaySegCols);\n    }\n\n    return levels;\n  }; // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\n\n  DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n    var segRows = [];\n    var i;\n\n    for (i = 0; i < this.dayGrid.rowCnt; i++) {\n      segRows.push([]);\n    }\n\n    for (i = 0; i < segs.length; i++) {\n      segRows[segs[i].row].push(segs[i]);\n    }\n\n    return segRows;\n  }; // Computes a default `displayEventEnd` value if one is not expliclty defined\n\n\n  DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n  };\n\n  return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer); // Computes whether two segments' columns collide. They are assumed to be in the same row.\n\n\nfunction isDaySegCollision(seg, otherSegs) {\n  var i;\n  var otherSeg;\n\n  for (i = 0; i < otherSegs.length; i++) {\n    otherSeg = otherSegs[i];\n\n    if (otherSeg.firstCol <= seg.lastCol && otherSeg.lastCol >= seg.firstCol) {\n      return true;\n    }\n  }\n\n  return false;\n} // A cmp function for determining the leftmost event\n\n\nfunction compareDaySegCols(a, b) {\n  return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridMirrorRenderer, _super);\n\n  function DayGridMirrorRenderer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n    var sourceSeg = mirrorInfo.sourceSeg;\n    var rowStructs = this.rowStructs = this.renderSegRows(segs); // inject each new event skeleton into each associated row\n\n    this.dayGrid.rowEls.forEach(function (rowNode, row) {\n      var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n\n      var skeletonTopEl;\n      var skeletonTop; // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\n      if (sourceSeg && sourceSeg.row === row) {\n        skeletonTopEl = sourceSeg.el;\n      } else {\n        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n\n        if (!skeletonTopEl) {\n          // when no events\n          skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n        }\n      }\n\n      skeletonTop = skeletonTopEl.getBoundingClientRect().top - rowNode.getBoundingClientRect().top; // the offsetParent origin\n\n      skeletonEl.style.top = skeletonTop + 'px';\n      skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n      rowNode.appendChild(skeletonEl);\n    });\n  };\n\n  return DayGridMirrorRenderer;\n}(DayGridEventRenderer);\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\n\nvar DayGridFillRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridFillRenderer, _super);\n\n  function DayGridFillRenderer(dayGrid) {\n    var _this = _super.call(this, dayGrid.context) || this;\n\n    _this.fillSegTag = 'td'; // override the default tag name\n\n    _this.dayGrid = dayGrid;\n    return _this;\n  }\n\n  DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n    // don't render timed background events\n    if (type === 'bgEvent') {\n      segs = segs.filter(function (seg) {\n        return seg.eventRange.def.allDay;\n      });\n    }\n\n    _super.prototype.renderSegs.call(this, type, segs);\n  };\n\n  DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n    var els = [];\n    var i;\n    var seg;\n    var skeletonEl;\n\n    for (i = 0; i < segs.length; i++) {\n      seg = segs[i];\n      skeletonEl = this.renderFillRow(type, seg);\n      this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n      els.push(skeletonEl);\n    }\n\n    return els;\n  }; // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\n\n  DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n    var dayGrid = this.dayGrid;\n    var colCnt = dayGrid.colCnt,\n        isRtl = dayGrid.isRtl;\n    var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n    var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n    var startCol = leftCol;\n    var endCol = rightCol + 1;\n    var className;\n    var skeletonEl;\n    var trEl;\n\n    if (type === 'businessHours') {\n      className = 'bgevent';\n    } else {\n      className = type.toLowerCase();\n    }\n\n    skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' + '<table><tr></tr></table>' + '</div>');\n    trEl = skeletonEl.getElementsByTagName('tr')[0];\n\n    if (startCol > 0) {\n      appendToElement(trEl, // will create (startCol + 1) td's\n      new Array(startCol + 1).join(EMPTY_CELL_HTML));\n    }\n\n    seg.el.colSpan = endCol - startCol;\n    trEl.appendChild(seg.el);\n\n    if (endCol < colCnt) {\n      appendToElement(trEl, // will create (colCnt - endCol) td's\n      new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n    }\n\n    var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n    if (introHtml) {\n      if (dayGrid.isRtl) {\n        appendToElement(trEl, introHtml);\n      } else {\n        prependToElement(trEl, introHtml);\n      }\n    }\n\n    return skeletonEl;\n  };\n\n  return DayGridFillRenderer;\n}(FillRenderer);\n\nvar DayTile =\n/** @class */\nfunction (_super) {\n  __extends(DayTile, _super);\n\n  function DayTile(context, el) {\n    var _this = _super.call(this, context, el) || this;\n\n    var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n    var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n    _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n    _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n    _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n    _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n    context.calendar.registerInteractiveComponent(_this, {\n      el: _this.el,\n      useEventCenter: false\n    });\n    return _this;\n  }\n\n  DayTile.prototype.render = function (props) {\n    this.renderFrame(props.date);\n    this.renderFgEvents(props.fgSegs);\n    this.renderEventSelection(props.eventSelection);\n    this.renderEventDrag(props.eventDragInstances);\n    this.renderEventResize(props.eventResizeInstances);\n  };\n\n  DayTile.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.renderFrame.unrender(); // should unrender everything else\n\n    this.calendar.unregisterInteractiveComponent(this);\n  };\n\n  DayTile.prototype._renderFrame = function (date) {\n    var _a = this,\n        theme = _a.theme,\n        dateEnv = _a.dateEnv;\n\n    var title = dateEnv.format(date, createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n    );\n    this.el.innerHTML = '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' + '<span class=\"fc-title\">' + htmlEscape(title) + '</span>' + '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' + '</div>' + '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' + '<div class=\"fc-event-container\"></div>' + '</div>';\n    this.segContainerEl = this.el.querySelector('.fc-event-container');\n  };\n\n  DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n    var date = this.props.date; // HACK\n\n    if (positionLeft < elWidth && positionTop < elHeight) {\n      return {\n        component: this,\n        dateSpan: {\n          allDay: true,\n          range: {\n            start: date,\n            end: addDays(date, 1)\n          }\n        },\n        dayEl: this.el,\n        rect: {\n          left: 0,\n          top: 0,\n          right: elWidth,\n          bottom: elHeight\n        },\n        layer: 1\n      };\n    }\n  };\n\n  return DayTile;\n}(DateComponent);\n\nvar DayTileEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayTileEventRenderer, _super);\n\n  function DayTileEventRenderer(dayTile) {\n    var _this = _super.call(this, dayTile.context) || this;\n\n    _this.dayTile = dayTile;\n    return _this;\n  }\n\n  DayTileEventRenderer.prototype.attachSegs = function (segs) {\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n      var seg = segs_1[_i];\n      this.dayTile.segContainerEl.appendChild(seg.el);\n    }\n  };\n\n  DayTileEventRenderer.prototype.detachSegs = function (segs) {\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      removeElement(seg.el);\n    }\n  };\n\n  return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer);\n\nvar DayBgRow =\n/** @class */\nfunction () {\n  function DayBgRow(context) {\n    this.context = context;\n  }\n\n  DayBgRow.prototype.renderHtml = function (props) {\n    var parts = [];\n\n    if (props.renderIntroHtml) {\n      parts.push(props.renderIntroHtml());\n    }\n\n    for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n      var cell = _a[_i];\n      parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n    }\n\n    if (!props.cells.length) {\n      parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n    }\n\n    if (this.context.options.dir === 'rtl') {\n      parts.reverse();\n    }\n\n    return '<tr>' + parts.join('') + '</tr>';\n  };\n\n  return DayBgRow;\n}();\n\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n  var dateEnv = context.dateEnv,\n      theme = context.theme;\n  var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n  var classes = getDayClasses(date, dateProfile, context);\n  classes.unshift('fc-day', theme.getClass('widgetContent'));\n  return '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n    omitTime: true\n  }) + '\"' : '') + (otherAttrs ? ' ' + otherAttrs : '') + '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({\n  day: 'numeric'\n});\nvar WEEK_NUM_FORMAT = createFormatter({\n  week: 'numeric'\n});\n\nvar DayGrid =\n/** @class */\nfunction (_super) {\n  __extends(DayGrid, _super);\n\n  function DayGrid(context, el, renderProps) {\n    var _this = _super.call(this, context, el) || this;\n\n    _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n\n    _this.isCellSizesDirty = false;\n    var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n    var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n    _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n    var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n    _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n    _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n    _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n    _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n    _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n    _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n    _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n    _this.renderProps = renderProps;\n    return _this;\n  }\n\n  DayGrid.prototype.render = function (props) {\n    var cells = props.cells;\n    this.rowCnt = cells.length;\n    this.colCnt = cells[0].length;\n    this.renderCells(cells, props.isRigid);\n    this.renderBusinessHours(props.businessHourSegs);\n    this.renderDateSelection(props.dateSelectionSegs);\n    this.renderBgEvents(props.bgEventSegs);\n    this.renderFgEvents(props.fgEventSegs);\n    this.renderEventSelection(props.eventSelection);\n    this.renderEventDrag(props.eventDrag);\n    this.renderEventResize(props.eventResize);\n\n    if (this.segPopoverTile) {\n      this.updateSegPopoverTile();\n    }\n  };\n\n  DayGrid.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.renderCells.unrender(); // will unrender everything else\n  };\n\n  DayGrid.prototype.getCellRange = function (row, col) {\n    var start = this.props.cells[row][col].date;\n    var end = addDays(start, 1);\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n    var ownProps = this.props;\n    this.segPopoverTile.receiveProps({\n      date: date || this.segPopoverTile.props.date,\n      fgSegs: segs || this.segPopoverTile.props.fgSegs,\n      eventSelection: ownProps.eventSelection,\n      eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n      eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n    });\n  };\n  /* Date Rendering\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderCells = function (cells, isRigid) {\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var _b = this,\n        rowCnt = _b.rowCnt,\n        colCnt = _b.colCnt;\n\n    var html = '';\n    var row;\n    var col;\n\n    for (row = 0; row < rowCnt; row++) {\n      html += this.renderDayRowHtml(row, isRigid);\n    }\n\n    this.el.innerHTML = html;\n    this.rowEls = findElements(this.el, '.fc-row');\n    this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n\n    if (this.isRtl) {\n      this.cellEls.reverse();\n    }\n\n    this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n    );\n    this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n    true, false // horizontal\n    ); // trigger dayRender with each cell's element\n\n    for (row = 0; row < rowCnt; row++) {\n      for (col = 0; col < colCnt; col++) {\n        this.publiclyTrigger('dayRender', [{\n          date: dateEnv.toDate(cells[row][col].date),\n          el: this.getCellEl(row, col),\n          view: view\n        }]);\n      }\n    }\n\n    this.isCellSizesDirty = true;\n  };\n\n  DayGrid.prototype._unrenderCells = function () {\n    this.removeSegPopover();\n  }; // Generates the HTML for a single row, which is a div that wraps a table.\n  // `row` is the row number.\n\n\n  DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n    var theme = this.theme;\n    var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n\n    if (isRigid) {\n      classes.push('fc-rigid');\n    }\n\n    var bgRow = new DayBgRow(this.context);\n    return '' + '<div class=\"' + classes.join(' ') + '\">' + '<div class=\"fc-bg\">' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + bgRow.renderHtml({\n      cells: this.props.cells[row],\n      dateProfile: this.props.dateProfile,\n      renderIntroHtml: this.renderProps.renderBgIntroHtml\n    }) + '</table>' + '</div>' + '<div class=\"fc-content-skeleton\">' + '<table>' + (this.getIsNumbersVisible() ? '<thead>' + this.renderNumberTrHtml(row) + '</thead>' : '') + '</table>' + '</div>' + '</div>';\n  };\n\n  DayGrid.prototype.getIsNumbersVisible = function () {\n    return this.getIsDayNumbersVisible() || this.renderProps.cellWeekNumbersVisible || this.renderProps.colWeekNumbersVisible;\n  };\n\n  DayGrid.prototype.getIsDayNumbersVisible = function () {\n    return this.rowCnt > 1;\n  };\n  /* Grid Number Rendering\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.renderNumberTrHtml = function (row) {\n    var intro = this.renderProps.renderNumberIntroHtml(row, this);\n    return '' + '<tr>' + (this.isRtl ? '' : intro) + this.renderNumberCellsHtml(row) + (this.isRtl ? intro : '') + '</tr>';\n  };\n\n  DayGrid.prototype.renderNumberCellsHtml = function (row) {\n    var htmls = [];\n    var col;\n    var date;\n\n    for (col = 0; col < this.colCnt; col++) {\n      date = this.props.cells[row][col].date;\n      htmls.push(this.renderNumberCellHtml(date));\n    }\n\n    if (this.isRtl) {\n      htmls.reverse();\n    }\n\n    return htmls.join('');\n  }; // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n  // The number row will only exist if either day numbers or week numbers are turned on.\n\n\n  DayGrid.prototype.renderNumberCellHtml = function (date) {\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var html = '';\n    var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n    var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n    var classes;\n    var weekCalcFirstDow;\n\n    if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n      // no numbers in day cell (week number must be along the side)\n      return '<td></td>'; //  will create an empty space above events :(\n    }\n\n    classes = getDayClasses(date, this.props.dateProfile, this.context);\n    classes.unshift('fc-day-top');\n\n    if (this.renderProps.cellWeekNumbersVisible) {\n      weekCalcFirstDow = dateEnv.weekDow;\n    }\n\n    html += '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n      omitTime: true\n    }) + '\"' : '') + '>';\n\n    if (this.renderProps.cellWeekNumbersVisible && date.getUTCDay() === weekCalcFirstDow) {\n      html += buildGotoAnchorHtml(view, {\n        date: date,\n        type: 'week'\n      }, {\n        'class': 'fc-week-number'\n      }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n      );\n    }\n\n    if (isDayNumberVisible) {\n      html += buildGotoAnchorHtml(view, date, {\n        'class': 'fc-day-number'\n      }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n      );\n    }\n\n    html += '</td>';\n    return html;\n  };\n  /* Sizing\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.updateSize = function (isResize) {\n    var _a = this,\n        fillRenderer = _a.fillRenderer,\n        eventRenderer = _a.eventRenderer,\n        mirrorRenderer = _a.mirrorRenderer;\n\n    if (isResize || this.isCellSizesDirty || this.view.calendar.isEventsUpdated // hack\n    ) {\n        this.buildPositionCaches();\n        this.isCellSizesDirty = false;\n      }\n\n    fillRenderer.computeSizes(isResize);\n    eventRenderer.computeSizes(isResize);\n    mirrorRenderer.computeSizes(isResize);\n    fillRenderer.assignSizes(isResize);\n    eventRenderer.assignSizes(isResize);\n    mirrorRenderer.assignSizes(isResize);\n  };\n\n  DayGrid.prototype.buildPositionCaches = function () {\n    this.buildColPositions();\n    this.buildRowPositions();\n  };\n\n  DayGrid.prototype.buildColPositions = function () {\n    this.colPositions.build();\n  };\n\n  DayGrid.prototype.buildRowPositions = function () {\n    this.rowPositions.build();\n    this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n  };\n  /* Hit System\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n    var _a = this,\n        colPositions = _a.colPositions,\n        rowPositions = _a.rowPositions;\n\n    var col = colPositions.leftToIndex(leftPosition);\n    var row = rowPositions.topToIndex(topPosition);\n\n    if (row != null && col != null) {\n      return {\n        row: row,\n        col: col,\n        dateSpan: {\n          range: this.getCellRange(row, col),\n          allDay: true\n        },\n        dayEl: this.getCellEl(row, col),\n        relativeRect: {\n          left: colPositions.lefts[col],\n          right: colPositions.rights[col],\n          top: rowPositions.tops[row],\n          bottom: rowPositions.bottoms[row]\n        }\n      };\n    }\n  };\n  /* Cell System\n  ------------------------------------------------------------------------------------------------------------------*/\n  // FYI: the first column is the leftmost column, regardless of date\n\n\n  DayGrid.prototype.getCellEl = function (row, col) {\n    return this.cellEls[row * this.colCnt + col];\n  };\n  /* Event Drag Visualization\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.fillRenderer.renderSegs('highlight', state.segs);\n    }\n  };\n\n  DayGrid.prototype._unrenderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.fillRenderer.unrender('highlight');\n    }\n  };\n  /* Event Resize Visualization\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderEventResize = function (state) {\n    if (state) {\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.fillRenderer.renderSegs('highlight', state.segs);\n      this.mirrorRenderer.renderSegs(state.segs, {\n        isResizing: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n\n  DayGrid.prototype._unrenderEventResize = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.fillRenderer.unrender('highlight');\n      this.mirrorRenderer.unrender(state.segs, {\n        isResizing: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  /* More+ Link Popover\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.removeSegPopover = function () {\n    if (this.segPopover) {\n      this.segPopover.hide(); // in handler, will call segPopover's removeElement\n    }\n  }; // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n  // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\n\n  DayGrid.prototype.limitRows = function (levelLimit) {\n    var rowStructs = this.eventRenderer.rowStructs || [];\n    var row; // row #\n\n    var rowLevelLimit;\n\n    for (row = 0; row < rowStructs.length; row++) {\n      this.unlimitRow(row);\n\n      if (!levelLimit) {\n        rowLevelLimit = false;\n      } else if (typeof levelLimit === 'number') {\n        rowLevelLimit = levelLimit;\n      } else {\n        rowLevelLimit = this.computeRowLevelLimit(row);\n      }\n\n      if (rowLevelLimit !== false) {\n        this.limitRow(row, rowLevelLimit);\n      }\n    }\n  }; // Computes the number of levels a row will accomodate without going outside its bounds.\n  // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n  // `row` is the row number.\n\n\n  DayGrid.prototype.computeRowLevelLimit = function (row) {\n    var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n\n    var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n\n    var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n    var i;\n    var trEl; // Reveal one level <tr> at a time and stop when we find one out of bounds\n\n    for (i = 0; i < trEls.length; i++) {\n      trEl = trEls[i];\n      trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n\n      if (trEl.getBoundingClientRect().bottom > rowBottom) {\n        return i;\n      }\n    }\n\n    return false; // should not limit at all\n  }; // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n  // `row` is the row number.\n  // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\n\n  DayGrid.prototype.limitRow = function (row, levelLimit) {\n    var _this = this;\n\n    var _a = this,\n        colCnt = _a.colCnt,\n        isRtl = _a.isRtl;\n\n    var rowStruct = this.eventRenderer.rowStructs[row];\n    var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\n    var col = 0; // col #, left-to-right (not chronologically)\n\n    var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\n    var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n\n    var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\n    var i;\n    var seg;\n    var segsBelow; // array of segment objects below `seg` in the current `col`\n\n    var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\n    var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\n    var td;\n    var rowSpan;\n    var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\n    var j;\n    var moreTd;\n    var moreWrap;\n    var moreLink; // Iterates through empty level cells and places \"more\" links inside if need be\n\n    var emptyCellsUntil = function emptyCellsUntil(endCol) {\n      while (col < endCol) {\n        segsBelow = _this.getCellSegs(row, col, levelLimit);\n\n        if (segsBelow.length) {\n          td = cellMatrix[levelLimit - 1][col];\n          moreLink = _this.renderMoreLink(row, col, segsBelow);\n          moreWrap = createElement('div', null, moreLink);\n          td.appendChild(moreWrap);\n          moreNodes.push(moreWrap);\n        }\n\n        col++;\n      }\n    };\n\n    if (levelLimit && levelLimit < rowStruct.segLevels.length) {\n      // is it actually over the limit?\n      levelSegs = rowStruct.segLevels[levelLimit - 1];\n      cellMatrix = rowStruct.cellMatrix;\n      limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n\n      limitedNodes.forEach(function (node) {\n        node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n      }); // iterate though segments in the last allowable level\n\n      for (i = 0; i < levelSegs.length; i++) {\n        seg = levelSegs[i];\n        var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n        var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n        emptyCellsUntil(leftCol); // process empty cells before the segment\n        // determine *all* segments below `seg` that occupy the same columns\n\n        colSegsBelow = [];\n        totalSegsBelow = 0;\n\n        while (col <= rightCol) {\n          segsBelow = this.getCellSegs(row, col, levelLimit);\n          colSegsBelow.push(segsBelow);\n          totalSegsBelow += segsBelow.length;\n          col++;\n        }\n\n        if (totalSegsBelow) {\n          // do we need to replace this segment with one or many \"more\" links?\n          td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n\n          rowSpan = td.rowSpan || 1;\n          segMoreNodes = []; // make a replacement <td> for each column the segment occupies. will be one for each colspan\n\n          for (j = 0; j < colSegsBelow.length; j++) {\n            moreTd = createElement('td', {\n              className: 'fc-more-cell',\n              rowSpan: rowSpan\n            });\n            segsBelow = colSegsBelow[j];\n            moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n            );\n            moreWrap = createElement('div', null, moreLink);\n            moreTd.appendChild(moreWrap);\n            segMoreNodes.push(moreTd);\n            moreNodes.push(moreTd);\n          }\n\n          td.classList.add('fc-limited');\n          insertAfterElement(td, segMoreNodes);\n          limitedNodes.push(td);\n        }\n      }\n\n      emptyCellsUntil(this.colCnt); // finish off the level\n\n      rowStruct.moreEls = moreNodes; // for easy undoing later\n\n      rowStruct.limitedEls = limitedNodes; // for easy undoing later\n    }\n  }; // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n  // `row` is a row number.\n\n\n  DayGrid.prototype.unlimitRow = function (row) {\n    var rowStruct = this.eventRenderer.rowStructs[row];\n\n    if (rowStruct.moreEls) {\n      rowStruct.moreEls.forEach(removeElement);\n      rowStruct.moreEls = null;\n    }\n\n    if (rowStruct.limitedEls) {\n      rowStruct.limitedEls.forEach(function (limitedEl) {\n        limitedEl.classList.remove('fc-limited');\n      });\n      rowStruct.limitedEls = null;\n    }\n  }; // Renders an <a> element that represents hidden event element for a cell.\n  // Responsible for attaching click handler as well.\n\n\n  DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n    var _this = this;\n\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var a = createElement('a', {\n      className: 'fc-more'\n    });\n    a.innerText = this.getMoreLinkText(hiddenSegs.length);\n    a.addEventListener('click', function (ev) {\n      var clickOption = _this.opt('eventLimitClick');\n\n      var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n      var date = _this.props.cells[row][_col].date;\n      var moreEl = ev.currentTarget;\n\n      var dayEl = _this.getCellEl(row, col);\n\n      var allSegs = _this.getCellSegs(row, col); // rescope the segments to be within the cell's date\n\n\n      var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\n      var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n      if (typeof clickOption === 'function') {\n        // the returned value can be an atomic option\n        clickOption = _this.publiclyTrigger('eventLimitClick', [{\n          date: dateEnv.toDate(date),\n          allDay: true,\n          dayEl: dayEl,\n          moreEl: moreEl,\n          segs: reslicedAllSegs,\n          hiddenSegs: reslicedHiddenSegs,\n          jsEvent: ev,\n          view: view\n        }]);\n      }\n\n      if (clickOption === 'popover') {\n        _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n      } else if (typeof clickOption === 'string') {\n        // a view name\n        view.calendar.zoomTo(date, clickOption);\n      }\n    });\n    return a;\n  }; // Reveals the popover that displays all events within a cell\n\n\n  DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n    var _this = this;\n\n    var _a = this,\n        calendar = _a.calendar,\n        view = _a.view,\n        theme = _a.theme;\n\n    var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n    var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n\n    var topEl; // the element we want to match the top coordinate of\n\n    var options;\n\n    if (this.rowCnt === 1) {\n      topEl = view.el; // will cause the popover to cover any sort of header\n    } else {\n      topEl = this.rowEls[row]; // will align with top of row\n    }\n\n    options = {\n      className: 'fc-more-popover ' + theme.getClass('popover'),\n      parentEl: view.el,\n      top: computeRect(topEl).top,\n      autoHide: true,\n      content: function content(el) {\n        _this.segPopoverTile = new DayTile(_this.context, el);\n\n        _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n      },\n      hide: function hide() {\n        _this.segPopoverTile.destroy();\n\n        _this.segPopoverTile = null;\n\n        _this.segPopover.destroy();\n\n        _this.segPopover = null;\n      }\n    }; // Determine horizontal coordinate.\n    // We use the moreWrap instead of the <td> to avoid border confusion.\n\n    if (this.isRtl) {\n      options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n    } else {\n      options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n    }\n\n    this.segPopover = new Popover(options);\n    this.segPopover.show();\n    calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n  }; // Given the events within an array of segment objects, reslice them to be in a single day\n\n\n  DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n    var dayStart = dayDate;\n    var dayEnd = addDays(dayStart, 1);\n    var dayRange = {\n      start: dayStart,\n      end: dayEnd\n    };\n    var newSegs = [];\n\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n      var seg = segs_1[_i];\n      var eventRange = seg.eventRange;\n      var origRange = eventRange.range;\n      var slicedRange = intersectRanges(origRange, dayRange);\n\n      if (slicedRange) {\n        newSegs.push(_assign({}, seg, {\n          eventRange: {\n            def: eventRange.def,\n            ui: _assign({}, eventRange.ui, {\n              durationEditable: false\n            }),\n            instance: eventRange.instance,\n            range: slicedRange\n          },\n          isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\n          isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\n        }));\n      }\n    }\n\n    return newSegs;\n  }; // Generates the text that should be inside a \"more\" link, given the number of events it represents\n\n\n  DayGrid.prototype.getMoreLinkText = function (num) {\n    var opt = this.opt('eventLimitText');\n\n    if (typeof opt === 'function') {\n      return opt(num);\n    } else {\n      return '+' + num + ' ' + opt;\n    }\n  }; // Returns segments within a given cell.\n  // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\n\n  DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n    var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n    var level = startLevel || 0;\n    var segs = [];\n    var seg;\n\n    while (level < segMatrix.length) {\n      seg = segMatrix[level][col];\n\n      if (seg) {\n        segs.push(seg);\n      }\n\n      level++;\n    }\n\n    return segs;\n  };\n\n  return DayGrid;\n}(DateComponent);\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({\n  week: 'numeric'\n});\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar DayGridView =\n/** @class */\nfunction (_super) {\n  __extends(DayGridView, _super);\n\n  function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n    var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n    /* Header Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Generates the HTML that will go before the day-of week header cells\n\n\n    _this.renderHeadIntroHtml = function () {\n      var theme = _this.theme;\n\n      if (_this.colWeekNumbersVisible) {\n        return '' + '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' + '<span>' + // needed for matchCellWidths\n        htmlEscape(_this.opt('weekLabel')) + '</span>' + '</th>';\n      }\n\n      return '';\n    };\n    /* Day Grid Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\n\n    _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n      var dateEnv = _this.dateEnv;\n      var weekStart = dayGrid.props.cells[row][0].date;\n\n      if (_this.colWeekNumbersVisible) {\n        return '' + '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' + buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n        _this, {\n          date: weekStart,\n          type: 'week',\n          forceOff: dayGrid.colCnt === 1\n        }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n        ) + '</td>';\n      }\n\n      return '';\n    }; // Generates the HTML that goes before the day bg cells for each day-row\n\n\n    _this.renderDayGridBgIntroHtml = function () {\n      var theme = _this.theme;\n\n      if (_this.colWeekNumbersVisible) {\n        return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n      }\n\n      return '';\n    }; // Generates the HTML that goes before every other type of row generated by DayGrid.\n    // Affects mirror-skeleton and highlight-skeleton rows.\n\n\n    _this.renderDayGridIntroHtml = function () {\n      if (_this.colWeekNumbersVisible) {\n        return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n      }\n\n      return '';\n    };\n\n    _this.el.classList.add('fc-dayGrid-view');\n\n    _this.el.innerHTML = _this.renderSkeletonHtml();\n    _this.scroller = new ScrollComponent('hidden', // overflow x\n    'auto' // overflow y\n    );\n    var dayGridContainerEl = _this.scroller.el;\n\n    _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n\n    dayGridContainerEl.classList.add('fc-day-grid-container');\n    var dayGridEl = createElement('div', {\n      className: 'fc-day-grid'\n    });\n    dayGridContainerEl.appendChild(dayGridEl);\n    var cellWeekNumbersVisible;\n\n    if (_this.opt('weekNumbers')) {\n      if (_this.opt('weekNumbersWithinDays')) {\n        cellWeekNumbersVisible = true;\n        _this.colWeekNumbersVisible = false;\n      } else {\n        cellWeekNumbersVisible = false;\n        _this.colWeekNumbersVisible = true;\n      }\n    } else {\n      _this.colWeekNumbersVisible = false;\n      cellWeekNumbersVisible = false;\n    }\n\n    _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n      renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n      renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n      renderIntroHtml: _this.renderDayGridIntroHtml,\n      colWeekNumbersVisible: _this.colWeekNumbersVisible,\n      cellWeekNumbersVisible: cellWeekNumbersVisible\n    });\n    return _this;\n  }\n\n  DayGridView.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.dayGrid.destroy();\n    this.scroller.destroy();\n  }; // Builds the HTML skeleton for the view.\n  // The day-grid component will render inside of a container defined by this HTML.\n\n\n  DayGridView.prototype.renderSkeletonHtml = function () {\n    var theme = this.theme;\n    return '' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + (this.opt('columnHeader') ? '<thead class=\"fc-head\">' + '<tr>' + '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' + '</tr>' + '</thead>' : '') + '<tbody class=\"fc-body\">' + '<tr>' + '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' + '</tr>' + '</tbody>' + '</table>';\n  }; // Generates an HTML attribute string for setting the width of the week number column, if it is known\n\n\n  DayGridView.prototype.weekNumberStyleAttr = function () {\n    if (this.weekNumberWidth != null) {\n      return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n    }\n\n    return '';\n  }; // Determines whether each row should have a constant height\n\n\n  DayGridView.prototype.hasRigidRows = function () {\n    var eventLimit = this.opt('eventLimit');\n    return eventLimit && typeof eventLimit !== 'number';\n  };\n  /* Dimensions\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n    _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n\n\n    this.dayGrid.updateSize(isResize);\n  }; // Refreshes the horizontal dimensions of the view\n\n\n  DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    var dayGrid = this.dayGrid;\n    var eventLimit = this.opt('eventLimit');\n    var headRowEl = this.header ? this.header.el : null; // HACK\n\n    var scrollerHeight;\n    var scrollbarWidths; // hack to give the view some height prior to dayGrid's columns being rendered\n    // TODO: separate setting height from scroller VS dayGrid.\n\n    if (!dayGrid.rowEls) {\n      if (!isAuto) {\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.scroller.setHeight(scrollerHeight);\n      }\n\n      return;\n    }\n\n    if (this.colWeekNumbersVisible) {\n      // Make sure all week number cells running down the side have the same width.\n      this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n    } // reset all heights to be natural\n\n\n    this.scroller.clear();\n\n    if (headRowEl) {\n      uncompensateScroll(headRowEl);\n    }\n\n    dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n    // is the event limit a constant level number?\n\n    if (eventLimit && typeof eventLimit === 'number') {\n      dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n    } // distribute the height to the rows\n    // (viewHeight is a \"recommended\" value if isAuto)\n\n\n    scrollerHeight = this.computeScrollerHeight(viewHeight);\n    this.setGridHeight(scrollerHeight, isAuto); // is the event limit dynamically calculated?\n\n    if (eventLimit && typeof eventLimit !== 'number') {\n      dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n    }\n\n    if (!isAuto) {\n      // should we force dimensions of the scroll container?\n      this.scroller.setHeight(scrollerHeight);\n      scrollbarWidths = this.scroller.getScrollbarWidths();\n\n      if (scrollbarWidths.left || scrollbarWidths.right) {\n        // using scrollbars?\n        if (headRowEl) {\n          compensateScroll(headRowEl, scrollbarWidths);\n        } // doing the scrollbar compensation might have created text overflow which created more height. redo\n\n\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.scroller.setHeight(scrollerHeight);\n      } // guarantees the same scrollbar widths\n\n\n      this.scroller.lockOverflow(scrollbarWidths);\n    }\n  }; // given a desired total height of the view, returns what the height of the scroller should be\n\n\n  DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n    return viewHeight - subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n  }; // Sets the height of just the DayGrid component in this view\n\n\n  DayGridView.prototype.setGridHeight = function (height, isAuto) {\n    if (this.opt('monthMode')) {\n      // if auto, make the height of each row the height that it would be if there were 6 weeks\n      if (isAuto) {\n        height *= this.dayGrid.rowCnt / 6;\n      }\n\n      distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n    } else {\n      if (isAuto) {\n        undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n      } else {\n        distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n      }\n    }\n  };\n  /* Scroll\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGridView.prototype.computeDateScroll = function (duration) {\n    return {\n      top: 0\n    };\n  };\n\n  DayGridView.prototype.queryDateScroll = function () {\n    return {\n      top: this.scroller.getScrollTop()\n    };\n  };\n\n  DayGridView.prototype.applyDateScroll = function (scroll) {\n    if (scroll.top !== undefined) {\n      this.scroller.setScrollTop(scroll.top);\n    }\n  };\n\n  return DayGridView;\n}(View);\n\nDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid =\n/** @class */\nfunction (_super) {\n  __extends(SimpleDayGrid, _super);\n\n  function SimpleDayGrid(context, dayGrid) {\n    var _this = _super.call(this, context, dayGrid.el) || this;\n\n    _this.slicer = new DayGridSlicer();\n    _this.dayGrid = dayGrid;\n    context.calendar.registerInteractiveComponent(_this, {\n      el: _this.dayGrid.el\n    });\n    return _this;\n  }\n\n  SimpleDayGrid.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.calendar.unregisterInteractiveComponent(this);\n  };\n\n  SimpleDayGrid.prototype.render = function (props) {\n    var dayGrid = this.dayGrid;\n    var dateProfile = props.dateProfile,\n        dayTable = props.dayTable;\n    dayGrid.receiveProps(_assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), {\n      dateProfile: dateProfile,\n      cells: dayTable.cells,\n      isRigid: props.isRigid\n    }));\n  };\n\n  SimpleDayGrid.prototype.buildPositionCaches = function () {\n    this.dayGrid.buildPositionCaches();\n  };\n\n  SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n    var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n\n    if (rawHit) {\n      return {\n        component: this.dayGrid,\n        dateSpan: rawHit.dateSpan,\n        dayEl: rawHit.dayEl,\n        rect: {\n          left: rawHit.relativeRect.left,\n          right: rawHit.relativeRect.right,\n          top: rawHit.relativeRect.top,\n          bottom: rawHit.relativeRect.bottom\n        },\n        layer: 0\n      };\n    }\n  };\n\n  return SimpleDayGrid;\n}(DateComponent);\n\nvar DayGridSlicer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridSlicer, _super);\n\n  function DayGridSlicer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n    return dayTable.sliceRange(dateRange);\n  };\n\n  return DayGridSlicer;\n}(Slicer);\n\nvar DayGridView$1 =\n/** @class */\nfunction (_super) {\n  __extends(DayGridView, _super);\n\n  function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n    var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n\n    _this.buildDayTable = memoize(buildDayTable);\n\n    if (_this.opt('columnHeader')) {\n      _this.header = new DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n    }\n\n    _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n    return _this;\n  }\n\n  DayGridView.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    if (this.header) {\n      this.header.destroy();\n    }\n\n    this.simpleDayGrid.destroy();\n  };\n\n  DayGridView.prototype.render = function (props) {\n    _super.prototype.render.call(this, props);\n\n    var dateProfile = this.props.dateProfile;\n    var dayTable = this.dayTable = this.buildDayTable(dateProfile, this.dateProfileGenerator);\n\n    if (this.header) {\n      this.header.receiveProps({\n        dateProfile: dateProfile,\n        dates: dayTable.headerDates,\n        datesRepDistinctDays: dayTable.rowCnt === 1,\n        renderIntroHtml: this.renderHeadIntroHtml\n      });\n    }\n\n    this.simpleDayGrid.receiveProps({\n      dateProfile: dateProfile,\n      dayTable: dayTable,\n      businessHours: props.businessHours,\n      dateSelection: props.dateSelection,\n      eventStore: props.eventStore,\n      eventUiBases: props.eventUiBases,\n      eventSelection: props.eventSelection,\n      eventDrag: props.eventDrag,\n      eventResize: props.eventResize,\n      isRigid: this.hasRigidRows(),\n      nextDayThreshold: this.nextDayThreshold\n    });\n  };\n\n  return DayGridView;\n}(DayGridView);\n\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n  var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n  return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n  defaultView: 'dayGridMonth',\n  views: {\n    dayGrid: DayGridView$1,\n    dayGridDay: {\n      type: 'dayGrid',\n      duration: {\n        days: 1\n      }\n    },\n    dayGridWeek: {\n      type: 'dayGrid',\n      duration: {\n        weeks: 1\n      }\n    },\n    dayGridMonth: {\n      type: 'dayGrid',\n      duration: {\n        months: 1\n      },\n      monthMode: true,\n      fixedWeekCount: true\n    }\n  }\n});\nexport default main;\nexport { DayGridView as AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView$1 as DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, (global.FullCalendarLocales = global.FullCalendarLocales || {}, global.FullCalendarLocales.lt = factory()));\n})(this, function () {\n  'use strict';\n\n  var lt = {\n    code: \"lt\",\n    week: {\n      dow: 1,\n      doy: 4 // The week that contains Jan 4th is the first week of the year.\n\n    },\n    buttonText: {\n      prev: \"Atgal\",\n      next: \"Pirmyn\",\n      today: \"Šiandien\",\n      month: \"Mėnuo\",\n      week: \"Savaitė\",\n      day: \"Diena\",\n      list: \"Darbotvarkė\"\n    },\n    weekLabel: \"SAV\",\n    allDayText: \"Visą dieną\",\n    eventLimitText: \"daugiau\",\n    noEventsMessage: \"Nėra įvykių rodyti\"\n  };\n  return lt;\n});"],"sourceRoot":""}